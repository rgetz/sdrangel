<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SDRAngel: plugins/channelrx/demoddatv/leansdr/dvb.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../sdrangel_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SDRAngel
   &#160;<span id="projectnumber">4.11.5</span>
   </div>
   <div id="projectbrief">Developer docs for &lt;a href=&quot;https://github.com/f4exb/sdrangel&quot;&gt;SDRangel&lt;\a&gt;, an Open Source Qt5 / OpenGL 3.0+ SDR and signal analyzer frontend to various hardware.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_38c8d24aef3972a7f87b834274e76e31.html">plugins</a></li><li class="navelem"><a class="el" href="../../dir_6e513960e68e46b2e554ba62bddfbfbf.html">channelrx</a></li><li class="navelem"><a class="el" href="../../dir_457c74979bdff71df4e5e7bc44778c6e.html">demoddatv</a></li><li class="navelem"><a class="el" href="../../dir_536c4d637791c0c272bd6905719b5624.html">leansdr</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">dvb.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d0/d2f/dvb_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// This file is part of LeanSDR Copyright (C) 2016-2019 &lt;pabr@pabr.org&gt;.</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// See the toplevel README for more information.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// This program is free software: you can redistribute it and/or modify</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// it under the terms of the GNU General Public License as published by</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// the Free Software Foundation, either version 3 of the License, or</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// (at your option) any later version.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This program is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// GNU General Public License for more details.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// You should have received a copy of the GNU General Public License</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#ifndef LEANSDR_DVB_H</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#define LEANSDR_DVB_H</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/da5/convolutional_8h.html">leansdr/convolutional.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/de1/rs_8h.html">leansdr/rs.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/da2/sdr_8h.html">leansdr/sdr.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/db7/viterbi_8h.html">leansdr/viterbi.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#ifndef M_PI</span></div><div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="../../d0/d2f/dvb_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">   28</a></span>&#160;<span class="preprocessor">#    define M_PI 3.14159265358979323846</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../d7/d1e/namespaceleansdr.html">leansdr</a></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;{</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> SIZE_RSPACKET = 204;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> MPEG_SYNC = 0x47;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> MPEG_SYNC_INV = (MPEG_SYNC ^ 0xff);</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> MPEG_SYNC_CORRUPTED = 0x55;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">// Generic deconvolution</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2b">   41</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2b">code_rate</a></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;{</div><div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2bafefb28fbc382c3aaace561437c2175d0">   43</a></span>&#160;    <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2bafefb28fbc382c3aaace561437c2175d0">FEC12</a>,</div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2baa690727fd198dbd519e0c4297c0ad340">   44</a></span>&#160;    <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2baa690727fd198dbd519e0c4297c0ad340">FEC23</a>,</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2bac1f654cd167e547979febea95439cd99">   45</a></span>&#160;    <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2bac1f654cd167e547979febea95439cd99">FEC46</a>,</div><div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2ba69046f3944150aa26eacae39a26bb960">   46</a></span>&#160;    <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2ba69046f3944150aa26eacae39a26bb960">FEC34</a>,</div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2ba82ac441ed55a58a2b9238282c9f3b74b">   47</a></span>&#160;    <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2ba82ac441ed55a58a2b9238282c9f3b74b">FEC56</a>,</div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2ba93beb875e9ae351925bb8a66f13a86ee">   48</a></span>&#160;    <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2ba93beb875e9ae351925bb8a66f13a86ee">FEC78</a>, <span class="comment">// DVB-S</span></div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2babd34833962ab127a97e0717a7dbfa15e">   49</a></span>&#160;    <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2babd34833962ab127a97e0717a7dbfa15e">FEC45</a>,</div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2ba165d59b9a758238902bde817a3b622f7">   50</a></span>&#160;    <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2ba165d59b9a758238902bde817a3b622f7">FEC89</a>,</div><div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2bafce630e9456733bc2026e25a2d05fa69">   51</a></span>&#160;    <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2bafce630e9456733bc2026e25a2d05fa69">FEC910</a>, <span class="comment">// DVB-S2</span></div><div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2baad3ee196ceeca6fe0cdf5f5ae893f23d">   52</a></span>&#160;    <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2baad3ee196ceeca6fe0cdf5f5ae893f23d">FEC14</a>,</div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2bae06eaabaa08c8df217ac841692ab2ac7">   53</a></span>&#160;    <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2bae06eaabaa08c8df217ac841692ab2ac7">FEC13</a>,</div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2bab8d812a27f59c3d1c5c5202228fa56b5">   54</a></span>&#160;    <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2bab8d812a27f59c3d1c5c5202228fa56b5">FEC25</a>,</div><div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2bafbc890ded30a355b3e208250a452b588">   55</a></span>&#160;    <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2bafbc890ded30a355b3e208250a452b588">FEC35</a>, <span class="comment">// DVB-S2</span></div><div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2baffa7c516f292d5a07e358c4fa8ddac2c">   56</a></span>&#160;    <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2baffa7c516f292d5a07e358c4fa8ddac2c">FEC_COUNT</a></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;};</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">// static const char *fec_names[] = {</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">//     [FEC12] = &quot;1/2&quot;,</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">//     [FEC23] = &quot;2/3&quot;,</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">//     [FEC46] = &quot;4/6&quot;,</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">//     [FEC34] = &quot;3/4&quot;,</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">//     [FEC56] = &quot;5/6&quot;,</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">//     [FEC78] = &quot;7/8&quot;,</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">//     [FEC45] = &quot;4/5&quot;,</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">//     [FEC89] = &quot;8/9&quot;,</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">//     [FEC910] = &quot;9/10&quot;,</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">//     [FEC14] = &quot;1/4&quot;,</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">//     [FEC13] = &quot;1/3&quot;,</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">//     [FEC25] = &quot;2/5&quot;,</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">//     [FEC35] = &quot;3/5&quot;,</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">// };</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">// EN 300 421, section 4.4.3, table 2 Punctured code, G1=0171, G2=0133</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> DVBS_G1 = 0171;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> DVBS_G2 = 0133;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">//  G1 = 0b1111001</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">//  G2 = 0b1011011</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">//  G1 = [ 1 1 1 1 0 0 1 ]</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">//  G2 = [ 1 0 1 1 0 1 1 ]</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">//  C = [ G2     ;</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">//        G1     ;</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">//        0 G2   ;</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">//        0 G1   ;</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">//        0 0 G2 ;</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">//        0 0 G1 ]</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">//  C = [ 1 0 1 1 0 1 1 0 0 0 0 0 0 ;</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">//        1 1 1 1 0 0 1 0 0 0 0 0 0 ;</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">//        0 1 0 1 1 0 1 1 0 0 0 0 0 ;</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">//        0 1 1 1 1 0 0 1 0 0 0 0 0 ;</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">//        0 0 1 0 1 1 0 1 1 0 0 0 0 ;</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">//        0 0 1 1 1 1 0 0 1 0 0 0 0 ;</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">//        0 0 0 1 0 1 1 0 1 1 0 0 0 ;</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">//        0 0 0 1 1 1 1 0 0 1 0 0 0 ;</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">//        0 0 0 0 1 0 1 1 0 1 1 0 0 ;</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">//        0 0 0 0 1 1 1 1 0 0 1 0 0 ;</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">//        0 0 0 0 0 1 0 1 1 0 1 1 0 ;</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">//        0 0 0 0 0 1 1 1 1 0 0 1 0 ;</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">//        0 0 0 0 0 0 1 0 1 1 0 1 1 ;</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">//        0 0 0 0 0 0 1 1 1 1 0 0 1 ]</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">//  IQ = [ Q1; I1; ... Q10; I10 ] = C * S</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">//  D * C == [ 1 0 0 0 0 0 0 0 0 0 0 0 0 0 ]</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">//  D = [ 0 1 0 1 1 1 0 1 1 1 0 0 0 0]</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">//  D = 0x3ba</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Tbyte, Tbyte BYTE_ERASED&gt;</div><div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html">  115</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html">deconvol_sync</a> : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;{</div><div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#aec5c5742bcbdb39ae2b9dfe54d3106a1">  117</a></span>&#160;    <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#aec5c5742bcbdb39ae2b9dfe54d3106a1">deconvol_sync</a>(<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html">scheduler</a> *<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>,</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                  <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;eucl_ss&gt;</a> &amp;_in,</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                  <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;Tbyte&gt;</a> &amp;_out,</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                  <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> gX,</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                  <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> gY,</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                  <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> pX,</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                  <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> pY) : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a>(sch, <span class="stringliteral">&quot;deconvol_sync&quot;</span>),</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                                 <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a77759874d3693553770cd69c0e97de94">fastlock</a>(false),</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                                 <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ae4b3b5579ef4267e502649d83f209366">in</a>(_in),</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                 <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3ad99478a5684ee56d79d72c6f593104">out</a>(_out, SIZE_RSPACKET),</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                                 <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3ad09ae7ae55d237e0c8a2d76d3305ed">skip</a>(0)</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad35f51462d016b0fb1fa47a22037c46d">conv</a> = <span class="keyword">new</span> <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>[2];</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad35f51462d016b0fb1fa47a22037c46d">conv</a>[0] = gX;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad35f51462d016b0fb1fa47a22037c46d">conv</a>[1] = gY;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a971e682c38a4a6a8c8ae4ae391e2d768">nG</a> = 2;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a60811a9076b3205f45119da968681191">punct</a> = <span class="keyword">new</span> <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>[2];</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a60811a9076b3205f45119da968681191">punct</a>[0] = pX;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a60811a9076b3205f45119da968681191">punct</a>[1] = pY;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a40514bf82d4434c6463dd58e28f9c9af">punctperiod</a> = 0;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a75f1b97fda6be6e9cd20820001eb86cf">punctweight</a> = 0;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a> = 0; <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a> &lt; 2; ++<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>)</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <span class="keywordtype">int</span> nbits = <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#af3f22cc5e8bf95664147a354b18abbe2">log2</a>(<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a60811a9076b3205f45119da968681191">punct</a>[<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>]) + 1;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <span class="keywordflow">if</span> (nbits &gt; <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a40514bf82d4434c6463dd58e28f9c9af">punctperiod</a>)</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a40514bf82d4434c6463dd58e28f9c9af">punctperiod</a> = nbits;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a75f1b97fda6be6e9cd20820001eb86cf">punctweight</a> += <a class="code" href="../../d7/d1e/namespaceleansdr.html#a3afe578114ae6a586e5a10ae916e1c71">hamming_weight</a>(<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a60811a9076b3205f45119da968681191">punct</a>[i]);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        }</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">if</span> (sch-&gt;<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html#a248d1229f9b48fcb8a8dc206d43d8ba4">verbose</a>)</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;puncturing %d/%d\n&quot;</span>, <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a40514bf82d4434c6463dd58e28f9c9af">punctperiod</a>, <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a75f1b97fda6be6e9cd20820001eb86cf">punctweight</a>);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a768f9e3839ea487faa010e27f9ff9c18">deconv</a> = <span class="keyword">new</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a42cc80159225266343565b51f53f9fee">iq_t</a>[<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a40514bf82d4434c6463dd58e28f9c9af">punctperiod</a>];</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#abe91d9cce4bbf77e3368b4af65b56e91">deconv2</a> = <span class="keyword">new</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a42cc80159225266343565b51f53f9fee">iq_t</a>[<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a40514bf82d4434c6463dd58e28f9c9af">punctperiod</a>];</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a8d89220cf3c82109959ae19ccd4ce70f">inverse_convolution</a>();</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#aa47fef46b6e9074e31e5abd355774940">init_syncs</a>();</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3722751038c3f0d328759615fdd7d7dc">locked</a> = &amp;<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[0];</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a6a3cfa2d5e77f922cc428a0533b3bb3e">  157</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a6a3cfa2d5e77f922cc428a0533b3bb3e">signal_t</a>;</div><div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a42cc80159225266343565b51f53f9fee">  158</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a42cc80159225266343565b51f53f9fee">iq_t</a>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#af3f22cc5e8bf95664147a354b18abbe2">  160</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#af3f22cc5e8bf95664147a354b18abbe2">log2</a>(<a class="code" href="../../d8/d3d/rtptypes__win_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> x)</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordtype">int</span> n = -1;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">for</span> (; x; ++n, x &gt;&gt;= 1)</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            ;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">return</span> n;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    }</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a705e9e0d663c0fcae87aecfbea157db6">  168</a></span>&#160;    iq_t <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a705e9e0d663c0fcae87aecfbea157db6">convolve</a>(signal_t s)</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordtype">int</span> sbits = <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#af3f22cc5e8bf95664147a354b18abbe2">log2</a>(s) + 1;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        iq_t iq = 0;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> state = 0;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> b = sbits - 1; b &gt;= 0; --b)</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        { <span class="comment">// Feed into convolver, MSB first</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> bit = (s &gt;&gt; b) &amp; 1;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            state = (state &gt;&gt; 1) | (bit &lt;&lt; 6); <span class="comment">// Shift register</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a971e682c38a4a6a8c8ae4ae391e2d768">nG</a>; ++j)</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> xy = <a class="code" href="../../d7/d1e/namespaceleansdr.html#a23cbe621900dd50ab53844646e556301">parity</a>(state &amp; <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad35f51462d016b0fb1fa47a22037c46d">conv</a>[j]); <span class="comment">// Taps</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a60811a9076b3205f45119da968681191">punct</a>[j] &amp; (1 &lt;&lt; (b % <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a40514bf82d4434c6463dd58e28f9c9af">punctperiod</a>)))</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                    iq = (iq &lt;&lt; 1) | xy;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            }</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="keywordflow">return</span> iq;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a89a2a66e0698eaf49dcd37f7d6fb9ab2">  190</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a89a2a66e0698eaf49dcd37f7d6fb9ab2">run</a>()</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a4d7cea3418fa6a37e6d96757a609aa2c">run_decoding</a>();</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a73de36a8be9d747f8dd48356e3545188">  195</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a73de36a8be9d747f8dd48356e3545188">next_sync</a>()</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a77759874d3693553770cd69c0e97de94">fastlock</a>)</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <a class="code" href="../../d7/d1e/namespaceleansdr.html#aa7ac6e394835c089a0a359dbdb72e0b8">fail</a>(<span class="stringliteral">&quot;Bug: next_sync() called with fastlock&quot;</span>);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        ++<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3722751038c3f0d328759615fdd7d7dc">locked</a>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3722751038c3f0d328759615fdd7d7dc">locked</a> == &amp;<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#adae747ae94590fc00fbfd4fbaf9cc4ea">NSYNCS</a>])</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3722751038c3f0d328759615fdd7d7dc">locked</a> = &amp;<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[0];</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <span class="comment">// Try next symbol alignment (for FEC other than 1/2)</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3ad09ae7ae55d237e0c8a2d76d3305ed">skip</a> = 1;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    }</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a77759874d3693553770cd69c0e97de94">  210</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a77759874d3693553770cd69c0e97de94">fastlock</a>;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a0af97560854a69f798f4b50f9dc29582">  213</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a0af97560854a69f798f4b50f9dc29582">maxsbits</a> = 64;</div><div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a41837a37df55a94cf84d2559c43756db">  214</a></span>&#160;    iq_t <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a41837a37df55a94cf84d2559c43756db">response</a>[<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a0af97560854a69f798f4b50f9dc29582">maxsbits</a>];</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">//static const int traceback = 48;  // For code rate 7/8</span></div><div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a783fc57e030d418f53acd38e1f5e0545">  217</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a783fc57e030d418f53acd38e1f5e0545">traceback</a> = 64; <span class="comment">// For code rate 7/8 with fastlock</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a6344ef8b82fa1aac82d9a0fba72f439f">  219</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a6344ef8b82fa1aac82d9a0fba72f439f">solve_rec</a>(iq_t prefix, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nprefix, signal_t <a class="code" href="../../dd/d58/fixed_8h.html#a47ff3dd3b526d335b62ee3e1d4f175d3">exp</a>, iq_t *best)</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">if</span> (prefix &gt; *best)</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">if</span> (nprefix &gt; <span class="keyword">sizeof</span>(prefix) * 8)</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordtype">int</span> solved = 1;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> b = 0; b &lt; <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a0af97560854a69f798f4b50f9dc29582">maxsbits</a>; ++b)</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d7/d1e/namespaceleansdr.html#a23cbe621900dd50ab53844646e556301">parity</a>(prefix &amp; response[b]) != ((exp &gt;&gt; b) &amp; 1))</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                <span class="comment">// Current candidate does not solve this column.</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                <span class="keywordflow">if</span> ((response[b] &gt;&gt; nprefix) == 0)</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                    <span class="comment">// No more bits to trace back.</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                solved = 0;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">if</span> (solved)</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            *best = prefix;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        }</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a6344ef8b82fa1aac82d9a0fba72f439f">solve_rec</a>(prefix, nprefix + 1, exp, best);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a6344ef8b82fa1aac82d9a0fba72f439f">solve_rec</a>(prefix | ((iq_t)1 &lt;&lt; nprefix), nprefix + 1, exp, best);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    }</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a9188b03bbe86cfbe1df8a51f004c9f65">  250</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a9188b03bbe86cfbe1df8a51f004c9f65">LATENCY</a> = 0;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a8d89220cf3c82109959ae19ccd4ce70f">  252</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a8d89220cf3c82109959ae19ccd4ce70f">inverse_convolution</a>()</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> sbit = 0; sbit &lt; <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a0af97560854a69f798f4b50f9dc29582">maxsbits</a>; ++sbit)</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            response[sbit] = <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a705e9e0d663c0fcae87aecfbea157db6">convolve</a>((iq_t)1 &lt;&lt; sbit);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="comment">//fprintf(stderr, &quot;response %d = %x\n&quot;, sbit, response[sbit]);</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> b = 0; b &lt; <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a40514bf82d4434c6463dd58e28f9c9af">punctperiod</a>; ++b)</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a768f9e3839ea487faa010e27f9ff9c18">deconv</a>[b] = -(<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a42cc80159225266343565b51f53f9fee">iq_t</a>)1;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a6344ef8b82fa1aac82d9a0fba72f439f">solve_rec</a>(0, 0, 1 &lt;&lt; (LATENCY + b), &amp;<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a768f9e3839ea487faa010e27f9ff9c18">deconv</a>[b]);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="comment">// Alternate polynomials for fastlock</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> b = 0; b &lt; <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a40514bf82d4434c6463dd58e28f9c9af">punctperiod</a>; ++b)</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> d = <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a768f9e3839ea487faa010e27f9ff9c18">deconv</a>[b], d2 = d;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="comment">// 1/2</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="keywordflow">if</span> (d == 0x00000000000003baLL)</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                d2 = 0x0000000000038ccaLL;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="comment">// 2/3</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="keywordflow">if</span> (d == 0x0000000000000f29LL)</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                d2 = 0x000000003c569329LL;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordflow">if</span> (d == 0x000000000003c552LL)</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                d2 = 0x00000000001dee1cLL;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <span class="keywordflow">if</span> (d == 0x0000000000007948LL)</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                d2 = 0x00000001e2b49948LL;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <span class="keywordflow">if</span> (d == 0x00000000000001deLL)</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                d2 = 0x00000000001e2a90LL;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <span class="comment">// 3/4</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <span class="keywordflow">if</span> (d == 0x000000000000f247LL)</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                d2 = 0x000000000fd6383bLL;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="keywordflow">if</span> (d == 0x00000000000fd9eeLL)</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                d2 = 0x000000000fd91392LL;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <span class="keywordflow">if</span> (d == 0x0000000000f248d8LL)</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                d2 = 0x00000000fd9eef18LL;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <span class="comment">// 5/6</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <span class="keywordflow">if</span> (d == 0x0000000000f5727fLL)</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                d2 = 0x000003d5c909758fLL;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <span class="keywordflow">if</span> (d == 0x000000003d5c90aaLL)</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                d2 = 0x0f5727f0229c90aaLL;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <span class="keywordflow">if</span> (d == 0x000000003daa371cLL)</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                d2 = 0x000003d5f45630ecLL;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <span class="keywordflow">if</span> (d == 0x0000000f5727ff48LL)</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                d2 = 0x0000f57d28260348LL;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="keywordflow">if</span> (d == 0x0000000f57d28260LL)</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                d2 = 0xf5727ff48128260LL;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="comment">// 7/8</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <span class="keywordflow">if</span> (d == 0x0000fbeac76c454fLL)</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                d2 = 0x00fb11d6ba045a8fLL;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <span class="keywordflow">if</span> (d == 0x00000000fb11d6baLL)</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                d2 = 0xfbea3c7d930e16baLL;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <span class="keywordflow">if</span> (d == 0x0000fb112d5038dcLL)</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                d2 = 0x00fb112d5038271cLL;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="keywordflow">if</span> (d == 0x000000fbea3c7d68LL)</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                d2 = 0x00fbeac7975462a8LL;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">if</span> (d == 0x00000000fb112d50LL)</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                d2 = 0x00fbea3c86793290LL;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            <span class="keywordflow">if</span> (d == 0x0000fb112dabd2e0LL)</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                d2 = 0x00fb112d50c3cd20LL;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            <span class="keywordflow">if</span> (d == 0x00000000fb11d640LL)</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                d2 = 0x00fbea3c8679c980LL;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keywordflow">if</span> (d2 == d)</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                <a class="code" href="../../d7/d1e/namespaceleansdr.html#aa7ac6e394835c089a0a359dbdb72e0b8">fail</a>(<span class="stringliteral">&quot;Alt polynomial not provided&quot;</span>);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#abe91d9cce4bbf77e3368b4af65b56e91">deconv2</a>[b] = d2;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        }</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>-&gt;<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html#aaeb22741e64a6fac0a7bee7c86db63be">debug</a>)</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> b = 0; b &lt; <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a40514bf82d4434c6463dd58e28f9c9af">punctperiod</a>; ++b)</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                fprintf(stderr, <span class="stringliteral">&quot;deconv[%d]=0x%016llx %d taps / %d bits\n&quot;</span>,</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                        b, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>)<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a768f9e3839ea487faa010e27f9ff9c18">deconv</a>[b], <a class="code" href="../../d7/d1e/namespaceleansdr.html#a3afe578114ae6a586e5a10ae916e1c71">hamming_weight</a>(<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a768f9e3839ea487faa010e27f9ff9c18">deconv</a>[b]), <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#af3f22cc5e8bf95664147a354b18abbe2">log2</a>(<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a768f9e3839ea487faa010e27f9ff9c18">deconv</a>[b]) + 1);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            }</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        }</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="comment">// Sanity check</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> b = 0; b &lt; <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a40514bf82d4434c6463dd58e28f9c9af">punctperiod</a>; ++b)</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a> = 0; <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a> &lt; <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a0af97560854a69f798f4b50f9dc29582">maxsbits</a>; ++<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>)</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            {</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                iq_t iq = <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a705e9e0d663c0fcae87aecfbea157db6">convolve</a>((iq_t)1 &lt;&lt; (LATENCY + <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>));</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                <span class="keywordtype">int</span> expect = (b == <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>) ? 1 : 0;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                <span class="keywordtype">int</span> d = <a class="code" href="../../d7/d1e/namespaceleansdr.html#a23cbe621900dd50ab53844646e556301">parity</a>(iq &amp; <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a768f9e3839ea487faa010e27f9ff9c18">deconv</a>[b]);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                <span class="keywordflow">if</span> (d != expect)</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                    <a class="code" href="../../d7/d1e/namespaceleansdr.html#aa7ac6e394835c089a0a359dbdb72e0b8">fail</a>(<span class="stringliteral">&quot;Failed to inverse convolutional coding&quot;</span>);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                <span class="keywordtype">int</span> d2 = <a class="code" href="../../d7/d1e/namespaceleansdr.html#a23cbe621900dd50ab53844646e556301">parity</a>(iq &amp; <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#abe91d9cce4bbf77e3368b4af65b56e91">deconv2</a>[b]);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                <span class="keywordflow">if</span> (d2 != expect)</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                    <a class="code" href="../../d7/d1e/namespaceleansdr.html#aa7ac6e394835c089a0a359dbdb72e0b8">fail</a>(<span class="stringliteral">&quot;Failed to inverse convolutional coding (alt)&quot;</span>);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            }</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            <span class="keywordflow">if</span> (traceback &gt; <span class="keyword">sizeof</span>(iq_t) * 8)</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                <a class="code" href="../../d7/d1e/namespaceleansdr.html#aa7ac6e394835c089a0a359dbdb72e0b8">fail</a>(<span class="stringliteral">&quot;Bug: traceback exceeds register size&quot;</span>);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#af3f22cc5e8bf95664147a354b18abbe2">log2</a>(<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a768f9e3839ea487faa010e27f9ff9c18">deconv</a>[b]) + 1 &gt; traceback)</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                <a class="code" href="../../d7/d1e/namespaceleansdr.html#aa7ac6e394835c089a0a359dbdb72e0b8">fail</a>(<span class="stringliteral">&quot;traceback insufficient for deconvolution&quot;</span>);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#af3f22cc5e8bf95664147a354b18abbe2">log2</a>(<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#abe91d9cce4bbf77e3368b4af65b56e91">deconv2</a>[b]) + 1 &gt; traceback)</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                <a class="code" href="../../d7/d1e/namespaceleansdr.html#aa7ac6e394835c089a0a359dbdb72e0b8">fail</a>(<span class="stringliteral">&quot;traceback insufficient for deconvolution (alt)&quot;</span>);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        }</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#adae747ae94590fc00fbfd4fbaf9cc4ea">  352</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#adae747ae94590fc00fbfd4fbaf9cc4ea">NSYNCS</a> = 4;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html">  354</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html">sync_t</a></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    {</div><div class="line"><a name="l00356"></a><span class="lineno"><a class="line" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">  356</a></span>&#160;        <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">lut</a>[2][2]; <span class="comment">// lut[(re&gt;0)?1:0][(im&gt;0)?1:0] = 0b000000IQ</span></div><div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">  357</a></span>&#160;        iq_t <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>;</div><div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a6ff8808d9f32b232774cf0f7ca66c5de">  358</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a6ff8808d9f32b232774cf0f7ca66c5de">n_in</a>;</div><div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">  359</a></span>&#160;        signal_t <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>;</div><div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#aa115f39d2de8129a45c8361dd2a7c6e2">  360</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#aa115f39d2de8129a45c8361dd2a7c6e2">n_out</a>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="comment">// Auxiliary shift register for fastlock</span></div><div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a031885539bcddedf8729fcf602242767">  362</a></span>&#160;        iq_t <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a031885539bcddedf8729fcf602242767">in2</a>;</div><div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#aa6de17c2fc900ebfa1935d7f86096c38">  363</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0b7d7e44fd45da6e84123ecd1bed0099">n_in2</a>, <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#aa6de17c2fc900ebfa1935d7f86096c38">n_out2</a>;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    } <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#adae747ae94590fc00fbfd4fbaf9cc4ea">NSYNCS</a>];</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#aa47fef46b6e9074e31e5abd355774940">  366</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#aa47fef46b6e9074e31e5abd355774940">init_syncs</a>()</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="comment">// EN 300 421, section 4.5, Figure 5 QPSK constellation</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="comment">// Four rotations * two conjugations.</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="comment">// 180° rotation is detected as polarity inversion in mpeg_sync.</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> sync_id = 0; sync_id &lt; <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#adae747ae94590fc00fbfd4fbaf9cc4ea">NSYNCS</a>; ++sync_id)</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        {</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> re_pos = 0; re_pos &lt;= 1; ++re_pos)</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            {</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> im_pos = 0; im_pos &lt;= 1; ++im_pos)</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                    <span class="keywordtype">int</span> re_neg = !re_pos; <span class="comment">//int im_neg = !im_pos;</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                    <span class="keywordtype">int</span> I, Q;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                    <span class="keywordflow">switch</span> (sync_id)</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                    {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                    <span class="keywordflow">case</span> 0: <span class="comment">// Direct 0°</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                        I = re_pos ? 0 : 1;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                        Q = im_pos ? 0 : 1;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                    <span class="keywordflow">case</span> 1: <span class="comment">// Direct 90°</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                        I = im_pos ? 0 : 1;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                        Q = re_neg ? 0 : 1;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                    <span class="keywordflow">case</span> 2: <span class="comment">// Conj 0°</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                        I = re_pos ? 0 : 1;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                        Q = im_pos ? 1 : 0;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                    <span class="keywordflow">case</span> 3: <span class="comment">// Conj 90°</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                        I = im_pos ? 1 : 0;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                        Q = re_neg ? 0 : 1;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                        <span class="keywordflow">case</span> 4:  <span class="comment">// Direct 180°</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                        I = re_neg ? 0 : 1;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                        Q = im_neg ? 0 : 1;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                        <span class="keywordflow">case</span> 5:<span class="comment">// Direct 270°</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                        I = im_neg ? 0 : 1;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                        Q = re_pos ? 0 : 1;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                        <span class="keywordflow">case</span> 6:<span class="comment">// Conj 180°</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                        I = re_neg ? 0 : 1;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                        Q = im_neg ? 1 : 0;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                        <span class="keywordflow">case</span> 7:<span class="comment">// Conj 270°</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                        I = im_neg ? 1 : 0;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                        Q = re_pos ? 0 : 1;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                    }</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                    <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[sync_id].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">lut</a>[re_pos][im_pos] = (I &lt;&lt; 1) | Q;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                }</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            }</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[sync_id].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a6ff8808d9f32b232774cf0f7ca66c5de">n_in</a> = 0;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[sync_id].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#aa115f39d2de8129a45c8361dd2a7c6e2">n_out</a> = 0;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[sync_id].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0b7d7e44fd45da6e84123ecd1bed0099">n_in2</a> = 0;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[sync_id].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#aa6de17c2fc900ebfa1935d7f86096c38">n_out2</a> = 0;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="comment">// TODO: Unroll for each code rate setting.</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="comment">// 1/2: 8 symbols -&gt; 1 byte</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="comment">// 2/3 12 symbols -&gt; 2 bytes</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">// 3/4 16 symbols -&gt; 3 bytes</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// 5/6 24 symbols -&gt; 5 bytes</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="comment">// 7/8 32 symbols -&gt; 7 bytes</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a5558e2bbc9c275755adff422058ada71">  435</a></span>&#160;    <span class="keyword">inline</span> Tbyte <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a5558e2bbc9c275755adff422058ada71">readbyte</a>(sync_t *s, <a class="code" href="../../d3/d92/structleansdr_1_1eucl__ss.html">eucl_ss</a> *&amp;p)</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <span class="keywordflow">while</span> (s-&gt;n_out &lt; 8)</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            iq_t iq = s-&gt;in;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            <span class="keywordflow">while</span> (s-&gt;n_in &lt; traceback)</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            {</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> iqbits = s-&gt;lut[(p-&gt;<a class="code" href="../../d3/d92/structleansdr_1_1eucl__ss.html#ad7c2eb7386828568971b8708af9fc667">nearest</a> &amp; 2) ? 1 : 0][p-&gt;<a class="code" href="../../d3/d92/structleansdr_1_1eucl__ss.html#ad7c2eb7386828568971b8708af9fc667">nearest</a> &amp; 1];</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                ++p;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                iq = (iq &lt;&lt; 2) | iqbits;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                s-&gt;n_in += 2;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            }</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            s-&gt;in = iq;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> b = <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a40514bf82d4434c6463dd58e28f9c9af">punctperiod</a> - 1; b &gt;= 0; --b)</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> bit = <a class="code" href="../../d7/d1e/namespaceleansdr.html#a23cbe621900dd50ab53844646e556301">parity</a>(iq &amp; <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a768f9e3839ea487faa010e27f9ff9c18">deconv</a>[b]);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                s-&gt;out = (s-&gt;out &lt;&lt; 1) | bit;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            }</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            s-&gt;n_out += <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a40514bf82d4434c6463dd58e28f9c9af">punctperiod</a>;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            s-&gt;n_in -= <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a75f1b97fda6be6e9cd20820001eb86cf">punctweight</a>;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        }</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        Tbyte res = (s-&gt;out &gt;&gt; (s-&gt;n_out - 8)) &amp; 255;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        s-&gt;n_out -= 8;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    }</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a8aa895177863f050cfa3d68d3a2122b6">  466</a></span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a8aa895177863f050cfa3d68d3a2122b6">readerrors</a>(sync_t *s, <a class="code" href="../../d3/d92/structleansdr_1_1eucl__ss.html">eucl_ss</a> *&amp;p)</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> res = 0;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">while</span> (s-&gt;n_out2 &lt; 8)</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        {</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            iq_t iq = s-&gt;in2;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            <span class="keywordflow">while</span> (s-&gt;n_in2 &lt; traceback)</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> iqbits = s-&gt;lut[(p-&gt;<a class="code" href="../../d3/d92/structleansdr_1_1eucl__ss.html#ad7c2eb7386828568971b8708af9fc667">nearest</a> &amp; 2) ? 1 : 0][p-&gt;<a class="code" href="../../d3/d92/structleansdr_1_1eucl__ss.html#ad7c2eb7386828568971b8708af9fc667">nearest</a> &amp; 1];</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                ++p;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                iq = (iq &lt;&lt; 2) | iqbits;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                s-&gt;n_in2 += 2;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            s-&gt;in2 = iq;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> b = <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a40514bf82d4434c6463dd58e28f9c9af">punctperiod</a> - 1; b &gt;= 0; --b)</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            {</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> bit = <a class="code" href="../../d7/d1e/namespaceleansdr.html#a23cbe621900dd50ab53844646e556301">parity</a>(iq &amp; <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a768f9e3839ea487faa010e27f9ff9c18">deconv</a>[b]);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> bit2 = <a class="code" href="../../d7/d1e/namespaceleansdr.html#a23cbe621900dd50ab53844646e556301">parity</a>(iq &amp; <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#abe91d9cce4bbf77e3368b4af65b56e91">deconv2</a>[b]);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                <span class="keywordflow">if</span> (bit2 != bit)</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                    ++res;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            }</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            s-&gt;n_out2 += <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a40514bf82d4434c6463dd58e28f9c9af">punctperiod</a>;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            s-&gt;n_in2 -= <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a75f1b97fda6be6e9cd20820001eb86cf">punctweight</a>;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        }</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        s-&gt;n_out2 -= 8;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    }</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a4d7cea3418fa6a37e6d96757a609aa2c">  500</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a4d7cea3418fa6a37e6d96757a609aa2c">run_decoding</a>()</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.read(<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3ad09ae7ae55d237e0c8a2d76d3305ed">skip</a>);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3ad09ae7ae55d237e0c8a2d76d3305ed">skip</a> = 0;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="comment">// 8 byte margin to fill the deconvolver</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.readable() &lt; 64)</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keywordtype">int</span> maxrd = (<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.readable() - 64) / (<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a75f1b97fda6be6e9cd20820001eb86cf">punctweight</a> / 2) * <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a40514bf82d4434c6463dd58e28f9c9af">punctperiod</a> / 8;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordtype">int</span> maxwr = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.writable();</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="keywordtype">int</span> n = (maxrd &lt; maxwr) ? maxrd : maxwr;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <span class="keywordflow">if</span> (!n)</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="comment">// Require enough symbols to discriminate in fastlock mode</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="comment">// (threshold must be less than size of rspacket)</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">if</span> (n &lt; 32)</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="keywordflow">if</span> (fastlock)</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        {</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            <span class="comment">// Try all sync alignments</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            <span class="keywordtype">long</span> errors_best = 1 &lt;&lt; 30;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            sync_t *best = &amp;<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[0];</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            <span class="keywordflow">for</span> (sync_t *s = <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>; s &lt; <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a> + <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#adae747ae94590fc00fbfd4fbaf9cc4ea">NSYNCS</a>; ++s)</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            {</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                <a class="code" href="../../d3/d92/structleansdr_1_1eucl__ss.html">eucl_ss</a> *pin = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.rd();</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                <span class="keywordtype">long</span> errors = 0;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = n; c--;)</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                    errors += <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a8aa895177863f050cfa3d68d3a2122b6">readerrors</a>(s, pin);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                <span class="keywordflow">if</span> (errors &lt; errors_best)</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                    errors_best = errors;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                    best = s;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                }</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            <span class="keywordflow">if</span> (best != <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3722751038c3f0d328759615fdd7d7dc">locked</a>)</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            {</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                <span class="comment">// Another alignment produces fewer bit errors</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>-&gt;<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html#aaeb22741e64a6fac0a7bee7c86db63be">debug</a>)</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                {</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                    fprintf(stderr, <span class="stringliteral">&quot;{%d-&gt;%d}\n&quot;</span>, (<span class="keywordtype">int</span>)(<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3722751038c3f0d328759615fdd7d7dc">locked</a> - <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>), (<span class="keywordtype">int</span>)(best - <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>));</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                }</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3722751038c3f0d328759615fdd7d7dc">locked</a> = best;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            }</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <span class="comment">// If deconvolution bit error rate &gt; 33%, try next sample alignment</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            <span class="keywordflow">if</span> (errors_best &gt; n * 8 / 3)</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            {</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                <span class="comment">// fprintf(stderr, &quot;&gt;&quot;);</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3ad09ae7ae55d237e0c8a2d76d3305ed">skip</a> = 1;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            }</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        }</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <a class="code" href="../../d3/d92/structleansdr_1_1eucl__ss.html">eucl_ss</a> *pin = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.rd(), *pin0 = pin;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        Tbyte *pout = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.wr(), *pout0 = pout;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="keywordflow">while</span> (n--)</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            *pout++ = <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a5558e2bbc9c275755adff422058ada71">readbyte</a>(<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3722751038c3f0d328759615fdd7d7dc">locked</a>, pin);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        }</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.read(pin - pin0);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.written(pout - pout0);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    }</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ae4b3b5579ef4267e502649d83f209366">  573</a></span>&#160;    <a class="code" href="../../d0/d5e/structleansdr_1_1pipereader.html">pipereader&lt;eucl_ss&gt;</a> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ae4b3b5579ef4267e502649d83f209366">in</a>;</div><div class="line"><a name="l00574"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3ad99478a5684ee56d79d72c6f593104">  574</a></span>&#160;    <a class="code" href="../../de/d0e/structleansdr_1_1pipewriter.html">pipewriter&lt;Tbyte&gt;</a> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3ad99478a5684ee56d79d72c6f593104">out</a>;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="comment">// DECONVOL</span></div><div class="line"><a name="l00576"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a971e682c38a4a6a8c8ae4ae391e2d768">  576</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a971e682c38a4a6a8c8ae4ae391e2d768">nG</a>;</div><div class="line"><a name="l00577"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad35f51462d016b0fb1fa47a22037c46d">  577</a></span>&#160;    <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad35f51462d016b0fb1fa47a22037c46d">conv</a>;  <span class="comment">// [nG] Convolution polynomials; MSB is newest</span></div><div class="line"><a name="l00578"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a60811a9076b3205f45119da968681191">  578</a></span>&#160;    <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a60811a9076b3205f45119da968681191">punct</a>; <span class="comment">// [nG] Puncturing pattern</span></div><div class="line"><a name="l00579"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a75f1b97fda6be6e9cd20820001eb86cf">  579</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a40514bf82d4434c6463dd58e28f9c9af">punctperiod</a>, <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a75f1b97fda6be6e9cd20820001eb86cf">punctweight</a>;</div><div class="line"><a name="l00580"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a768f9e3839ea487faa010e27f9ff9c18">  580</a></span>&#160;    iq_t *<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a768f9e3839ea487faa010e27f9ff9c18">deconv</a>;  <span class="comment">// [punctperiod] Deconvolution polynomials</span></div><div class="line"><a name="l00581"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#abe91d9cce4bbf77e3368b4af65b56e91">  581</a></span>&#160;    iq_t *<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#abe91d9cce4bbf77e3368b4af65b56e91">deconv2</a>; <span class="comment">// [punctperiod] Alternate polynomials (for fastlock)</span></div><div class="line"><a name="l00582"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3722751038c3f0d328759615fdd7d7dc">  582</a></span>&#160;    sync_t *<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3722751038c3f0d328759615fdd7d7dc">locked</a>;</div><div class="line"><a name="l00583"></a><span class="lineno"><a class="line" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3ad09ae7ae55d237e0c8a2d76d3305ed">  583</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3ad09ae7ae55d237e0c8a2d76d3305ed">skip</a>;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;};</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno"><a class="line" href="../../d7/d1e/namespaceleansdr.html#a55412b33a6a0d2de966d262c579ad219">  586</a></span>&#160;<span class="keyword">typedef</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html">deconvol_sync&lt;u8, 0&gt;</a> <a class="code" href="../../d7/d1e/namespaceleansdr.html#a55412b33a6a0d2de966d262c579ad219">deconvol_sync_simple</a>;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;deconvol_sync_simple *<a class="code" href="../../d7/d1e/namespaceleansdr.html#af29950fe367189db5d340659ca2df170">make_deconvol_sync_simple</a>(<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html">scheduler</a> *<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>,</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                                                <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;eucl_ss&gt;</a> &amp;_in,</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                                                <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;u8&gt;</a> &amp;_out,</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                                                <span class="keyword">enum</span> <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2b">code_rate</a> rate);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">// CONVOLUTIONAL ENCODER</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> polys_fec12[] = {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    DVBS_G1,</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    DVBS_G2 <span class="comment">// X1Y1</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;};</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> polys_fec23[] = {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    DVBS_G1, DVBS_G2,</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    DVBS_G2 &lt;&lt; 1 <span class="comment">// X1Y1Y2</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;};</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">// Same code rate as 2/3, usable with QPSK</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> polys_fec46[] = {</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    DVBS_G1, DVBS_G2,</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    DVBS_G2 &lt;&lt; 1, <span class="comment">// X1Y1Y2</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    DVBS_G1 &lt;&lt; 2, DVBS_G2 &lt;&lt; 2,</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    DVBS_G2 &lt;&lt; 3 <span class="comment">// X3Y3Y4</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;};</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> polys_fec34[] = {</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    DVBS_G1,</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    DVBS_G2, <span class="comment">// X1Y1</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    DVBS_G2 &lt;&lt; 1,</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    DVBS_G1 &lt;&lt; 2 <span class="comment">// Y2X3</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;};</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> polys_fec45[] = {</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="comment">// Non standard</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    DVBS_G1,</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    DVBS_G2, <span class="comment">// X1Y1</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    DVBS_G2 &lt;&lt; 1,</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    DVBS_G1 &lt;&lt; 2, <span class="comment">// Y2X3</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    DVBS_G1 &lt;&lt; 3  <span class="comment">// X4</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;};</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> polys_fec56[] = {</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    DVBS_G1,</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    DVBS_G2, <span class="comment">// X1Y1</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    DVBS_G2 &lt;&lt; 1,</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    DVBS_G1 &lt;&lt; 2, <span class="comment">// Y2X3</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    DVBS_G2 &lt;&lt; 3,</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    DVBS_G1 &lt;&lt; 4 <span class="comment">// Y4X5</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;};</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> polys_fec78[] = {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    DVBS_G1,</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    DVBS_G2, <span class="comment">// X1Y1</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    DVBS_G2 &lt;&lt; 1,</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    DVBS_G2 &lt;&lt; 2, <span class="comment">// Y2Y3</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    DVBS_G2 &lt;&lt; 3,</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    DVBS_G1 &lt;&lt; 4, <span class="comment">// Y4X5</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    DVBS_G2 &lt;&lt; 5,</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    DVBS_G1 &lt;&lt; 6 <span class="comment">// Y6X7</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;};</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">// FEC parameters, for convolutional coding only (not S2).</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span>fec_spec</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;{</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordtype">int</span> bits_in;           <span class="comment">// Entering the convolutional coder</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordtype">int</span> bits_out;          <span class="comment">// Exiting the convolutional coder</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> *polys; <span class="comment">// [bits_out]</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;} fec_specs[<a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2baffa7c516f292d5a07e358c4fa8ddac2c">FEC_COUNT</a>] =</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        {1, 2, polys_fec12},</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        {2, 3, polys_fec23},</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        {4, 6, polys_fec46},</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        {3, 4, polys_fec34},</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        {5, 6, polys_fec56},</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        {7, 8, polys_fec78},</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        {4, 5, polys_fec45}, <span class="comment">// Non-standard</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;};</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div><div class="line"><a name="l00666"></a><span class="lineno"><a class="line" href="../../db/d84/structleansdr_1_1dvb__convol.html">  666</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../db/d84/structleansdr_1_1dvb__convol.html">dvb_convol</a> : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;{</div><div class="line"><a name="l00668"></a><span class="lineno"><a class="line" href="../../db/d84/structleansdr_1_1dvb__convol.html#a0fdf28871e197328970168d8199f56c2">  668</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> <a class="code" href="../../db/d84/structleansdr_1_1dvb__convol.html#a0fdf28871e197328970168d8199f56c2">uncoded_byte</a>;</div><div class="line"><a name="l00669"></a><span class="lineno"><a class="line" href="../../db/d84/structleansdr_1_1dvb__convol.html#ada667b96a8b1c44a3e5f6a7f75a99b8a">  669</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> <a class="code" href="../../db/d84/structleansdr_1_1dvb__convol.html#ada667b96a8b1c44a3e5f6a7f75a99b8a">hardsymbol</a>;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno"><a class="line" href="../../db/d84/structleansdr_1_1dvb__convol.html#a0473b32ac897cff8ca3565de5de36c6a">  671</a></span>&#160;    <a class="code" href="../../db/d84/structleansdr_1_1dvb__convol.html#a0473b32ac897cff8ca3565de5de36c6a">dvb_convol</a>(<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html">scheduler</a> *<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>,</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;               <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;uncoded_byte&gt;</a> &amp;_in,</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;               <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;hardsymbol&gt;</a> &amp;_out,</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;               <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2b">code_rate</a> fec,</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;               <span class="keywordtype">int</span> bits_per_symbol) : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a>(sch, <span class="stringliteral">&quot;dvb_convol&quot;</span>),</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                                      <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>(_in),</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                                      <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>(_out, 64) <span class="comment">// BPSK 7/8: 7 bytes in, 64 symbols out</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    {</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        fec_spec *fs = &amp;fec_specs[fec];</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="keywordflow">if</span> (!fs-&gt;bits_in)</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            <a class="code" href="../../d7/d1e/namespaceleansdr.html#aa7ac6e394835c089a0a359dbdb72e0b8">fail</a>(<span class="stringliteral">&quot;Unexpected FEC&quot;</span>);</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        convol.bits_in = fs-&gt;bits_in;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        convol.bits_out = fs-&gt;bits_out;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        convol.polys = fs-&gt;polys;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        convol.bps = bits_per_symbol;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <span class="comment">// FEC must output a whole number of IQ symbols</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <span class="keywordflow">if</span> (convol.bits_out % convol.bps)</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            <a class="code" href="../../d7/d1e/namespaceleansdr.html#aa7ac6e394835c089a0a359dbdb72e0b8">fail</a>(<span class="stringliteral">&quot;Code rate not suitable for this constellation&quot;</span>);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    }</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno"><a class="line" href="../../db/d84/structleansdr_1_1dvb__convol.html#a71f988c35ccca671b4752a08a4c03923">  694</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../db/d84/structleansdr_1_1dvb__convol.html#a71f988c35ccca671b4752a08a4c03923">run</a>()</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    {</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <span class="keywordtype">int</span> count = <a class="code" href="../../d7/d1e/namespaceleansdr.html#aac6fe833df827732441862452ff6c48d">min</a>(<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.readable(), <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.writable() * convol.bps / convol.bits_out * convol.bits_in / 8);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <span class="comment">// Process in multiples of the puncturing period and of 8 bits.</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="keywordtype">int</span> chunk = convol.bits_in;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        count = (count / chunk) * chunk;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        convol.encode(<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.rd(), <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.wr(), count);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.read(count);</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <span class="keywordtype">int</span> nout = count * 8 / convol.bits_in * convol.bits_out / convol.bps;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.written(nout);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    }</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00707"></a><span class="lineno"><a class="line" href="../../db/d84/structleansdr_1_1dvb__convol.html#a2d8fc8f507f8765be6159a100ff0c68b">  707</a></span>&#160;    <a class="code" href="../../d0/d5e/structleansdr_1_1pipereader.html">pipereader&lt;uncoded_byte&gt;</a> <a class="code" href="../../db/d84/structleansdr_1_1dvb__convol.html#a2d8fc8f507f8765be6159a100ff0c68b">in</a>;</div><div class="line"><a name="l00708"></a><span class="lineno"><a class="line" href="../../db/d84/structleansdr_1_1dvb__convol.html#a3ff097611c6107b2e0edf7032d597821">  708</a></span>&#160;    <a class="code" href="../../de/d0e/structleansdr_1_1pipewriter.html">pipewriter&lt;hardsymbol&gt;</a> <a class="code" href="../../db/d84/structleansdr_1_1dvb__convol.html#a3ff097611c6107b2e0edf7032d597821">out</a>;</div><div class="line"><a name="l00709"></a><span class="lineno"><a class="line" href="../../db/d84/structleansdr_1_1dvb__convol.html#a6b4e0cd0bc21fb5d55abf8620138d74f">  709</a></span>&#160;    <a class="code" href="../../d7/df1/structleansdr_1_1convol__multipoly.html">convol_multipoly&lt;uint16_t, 16&gt;</a> <a class="code" href="../../db/d84/structleansdr_1_1dvb__convol.html#a6b4e0cd0bc21fb5d55abf8620138d74f">convol</a>;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;};</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment">// dvb_convol</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment">// NEW ALGEBRAIC DECONVOLUTION</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">// QPSK 1/2 only;</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">// With DVB-S polynomials hardcoded.</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Tin&gt;</div><div class="line"><a name="l00719"></a><span class="lineno"><a class="line" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html">  719</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html">dvb_deconvol_sync</a> : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;{</div><div class="line"><a name="l00721"></a><span class="lineno"><a class="line" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#a628033bdc57f14fb13c6b9cbb17f62ec">  721</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> <a class="code" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#a628033bdc57f14fb13c6b9cbb17f62ec">decoded_byte</a>;</div><div class="line"><a name="l00722"></a><span class="lineno"><a class="line" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#a11989e4f2aaba7842b10c096dcc668a6">  722</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#a11989e4f2aaba7842b10c096dcc668a6">resync_period</a>;</div><div class="line"><a name="l00723"></a><span class="lineno"><a class="line" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#a6147b968ea6468e30c24b4e0da502f68">  723</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> chunk_size = 64; <span class="comment">// At least 2*sizeof(Thist)/8</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno"><a class="line" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#af9949c37446713d171d5e892fae2a591">  725</a></span>&#160;    <a class="code" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#af9949c37446713d171d5e892fae2a591">dvb_deconvol_sync</a>(<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html">scheduler</a> *<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>,</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                      <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;Tin&gt;</a> &amp;_in,</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                      <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;decoded_byte&gt;</a> &amp;_out) : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a>(sch, <span class="stringliteral">&quot;deconvol_sync_multipoly&quot;</span>),</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                                                     resync_period(32),</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                                                     <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>(_in),</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                                                     <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>(_out, chunk_size),</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                                                     resync_phase(0)</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    {</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#aa47fef46b6e9074e31e5abd355774940">init_syncs</a>();</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3722751038c3f0d328759615fdd7d7dc">locked</a> = &amp;<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[0];</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    }</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div><div class="line"><a name="l00737"></a><span class="lineno"><a class="line" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#a17f47172e96a26fefb344511c0ed93ef">  737</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#a17f47172e96a26fefb344511c0ed93ef">run</a>()</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.readable() &gt;= chunk_size * 8 &amp;&amp; <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.writable() &gt;= chunk_size)</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        {</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            <span class="keywordtype">int</span> errors_best = 1 &lt;&lt; 30;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            <a class="code" href="../../d4/d3a/structleansdr_1_1dvb__deconvol__sync_1_1sync__t.html">sync_t</a> *best = NULL;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="../../d4/d3a/structleansdr_1_1dvb__deconvol__sync_1_1sync__t.html">sync_t</a> *s = <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>; s &lt; <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a> + <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#adae747ae94590fc00fbfd4fbaf9cc4ea">NSYNCS</a>; ++s)</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            {</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                <span class="keywordflow">if</span> (resync_phase != 0 &amp;&amp; s != <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3722751038c3f0d328759615fdd7d7dc">locked</a>)</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                    <span class="comment">// Decode only the currently-locked alignment</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                Tin *pin = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.rd();</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                <span class="keyword">static</span> decoded_byte dummy[chunk_size];</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                decoded_byte *pout = (s == <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3722751038c3f0d328759615fdd7d7dc">locked</a>) ? <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.wr() : dummy;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                <span class="keywordtype">int</span> nerrors = s-&gt;deconv.run(pin, s-&gt;lut, pout, chunk_size);</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                <span class="keywordflow">if</span> (nerrors &lt; errors_best)</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                {</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                    errors_best = nerrors;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                    best = s;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                }</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            }</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.read(chunk_size * 8);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.written(chunk_size);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;            <span class="keywordflow">if</span> (best != <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3722751038c3f0d328759615fdd7d7dc">locked</a>)</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;            {</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>-&gt;<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html#aaeb22741e64a6fac0a7bee7c86db63be">debug</a>)</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                    fprintf(stderr, <span class="stringliteral">&quot;%%%d&quot;</span>, (<span class="keywordtype">int</span>)(best - <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>));</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3722751038c3f0d328759615fdd7d7dc">locked</a> = best;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            }</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;            <span class="keywordflow">if</span> (++resync_phase &gt;= resync_period)</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                resync_phase = 0;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        } <span class="comment">// Work to do</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    }     <span class="comment">// run()</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00778"></a><span class="lineno"><a class="line" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#ae9fe259f894faab7b2db2bf08e191771">  778</a></span>&#160;    <a class="code" href="../../d0/d5e/structleansdr_1_1pipereader.html">pipereader&lt;Tin&gt;</a> <a class="code" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#ae9fe259f894faab7b2db2bf08e191771">in</a>;</div><div class="line"><a name="l00779"></a><span class="lineno"><a class="line" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#abc1d464e96267db970b5c4145e3d4611">  779</a></span>&#160;    <a class="code" href="../../de/d0e/structleansdr_1_1pipewriter.html">pipewriter&lt;decoded_byte&gt;</a> <a class="code" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#abc1d464e96267db970b5c4145e3d4611">out</a>;</div><div class="line"><a name="l00780"></a><span class="lineno"><a class="line" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#a8264d89e041a11a63c2dd0e8af933993">  780</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#a8264d89e041a11a63c2dd0e8af933993">resync_phase</a>;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno"><a class="line" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#aa760130fbb5fe61ba10dd98a4d4a4dd3">  782</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#adae747ae94590fc00fbfd4fbaf9cc4ea">NSYNCS</a> = 4;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div><div class="line"><a name="l00784"></a><span class="lineno"><a class="line" href="../../d4/d3a/structleansdr_1_1dvb__deconvol__sync_1_1sync__t.html">  784</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d4/d3a/structleansdr_1_1dvb__deconvol__sync_1_1sync__t.html">sync_t</a></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    {</div><div class="line"><a name="l00786"></a><span class="lineno"><a class="line" href="../../d4/d3a/structleansdr_1_1dvb__deconvol__sync_1_1sync__t.html#a98ac3ecbc741dec2a254d39e70ef2314">  786</a></span>&#160;        <a class="code" href="../../d1/d0a/structleansdr_1_1deconvol__poly2.html">deconvol_poly2&lt;Tin, uint32_t, uint64_t, 0x3ba, 0x38f70&gt;</a> <a class="code" href="../../d4/d3a/structleansdr_1_1dvb__deconvol__sync_1_1sync__t.html#a98ac3ecbc741dec2a254d39e70ef2314">deconv</a>;</div><div class="line"><a name="l00787"></a><span class="lineno"><a class="line" href="../../d4/d3a/structleansdr_1_1dvb__deconvol__sync_1_1sync__t.html#a710a2fac90c21ec1e14cbd526d05804d">  787</a></span>&#160;        <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">lut</a>[4]; <span class="comment">// TBD Swap and flip bits in the polynomials instead.</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    } <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#adae747ae94590fc00fbfd4fbaf9cc4ea">NSYNCS</a>];</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div><div class="line"><a name="l00790"></a><span class="lineno"><a class="line" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#a77ea54837a39ef809db7721309ed8f7c">  790</a></span>&#160;    <a class="code" href="../../d4/d3a/structleansdr_1_1dvb__deconvol__sync_1_1sync__t.html">sync_t</a> *<a class="code" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#a77ea54837a39ef809db7721309ed8f7c">locked</a>;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div><div class="line"><a name="l00792"></a><span class="lineno"><a class="line" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#ab3196ec7d006e7f2649356f040e0a75d">  792</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#ab3196ec7d006e7f2649356f040e0a75d">init_syncs</a>()</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#adae747ae94590fc00fbfd4fbaf9cc4ea">NSYNCS</a>; ++s)</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            <span class="comment">// EN 300 421, section 4.5, Figure 5 QPSK constellation</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            <span class="comment">// Four rotations * two conjugations.</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;            <span class="comment">// 180° rotation is detected as polarity inversion in mpeg_sync.</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            <span class="comment">//         2 | 0</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            <span class="comment">//         --+--</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            <span class="comment">//         3 | 1</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            <span class="comment">// 0°</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;            <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[0].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">lut</a>[0] = 0;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[0].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">lut</a>[1] = 1;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[0].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">lut</a>[2] = 2;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[0].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">lut</a>[3] = 3;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <span class="comment">// 90°</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[1].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">lut</a>[0] = 2;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[1].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">lut</a>[1] = 0;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[1].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">lut</a>[2] = 3;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[1].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">lut</a>[3] = 1;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <span class="comment">// 0° conjugated</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[2].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">lut</a>[0] = 1;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[2].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">lut</a>[1] = 0;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[2].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">lut</a>[2] = 3;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[2].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">lut</a>[3] = 2;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <span class="comment">// 90° conjugated</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[3].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">lut</a>[0] = 0;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[3].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">lut</a>[1] = 2;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[3].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">lut</a>[2] = 1;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[3].<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">lut</a>[3] = 3;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    }</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;};</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="comment">// dvb_deconvol_sync</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00826"></a><span class="lineno"><a class="line" href="../../d7/d1e/namespaceleansdr.html#a7a2b74987519a2fa24b0496c2b5661ba">  826</a></span>&#160;<span class="keyword">typedef</span> <a class="code" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html">dvb_deconvol_sync&lt;eucl_ss&gt;</a> <a class="code" href="../../d7/d1e/namespaceleansdr.html#a7a2b74987519a2fa24b0496c2b5661ba">dvb_deconvol_sync_soft</a>;</div><div class="line"><a name="l00827"></a><span class="lineno"><a class="line" href="../../d7/d1e/namespaceleansdr.html#a482bb5a409c2092ed701a479548d20b5">  827</a></span>&#160;<span class="keyword">typedef</span> <a class="code" href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html">dvb_deconvol_sync&lt;u8&gt;</a> <a class="code" href="../../d7/d1e/namespaceleansdr.html#a482bb5a409c2092ed701a479548d20b5">dvb_deconvol_sync_hard</a>;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment">// BIT ALIGNMENT AND MPEG SYNC DETECTION</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Tbyte, Tbyte BYTE_ERASED&gt;</div><div class="line"><a name="l00832"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html">  832</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html">mpeg_sync</a> : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;{</div><div class="line"><a name="l00834"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a6dfb6c8f0b0d50c207780fdcbfc28fb0">  834</a></span>&#160;    <span class="keywordtype">int</span> scan_syncs, <a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a6dfb6c8f0b0d50c207780fdcbfc28fb0">want_syncs</a>;</div><div class="line"><a name="l00835"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a7a80dab81a3d99468135852003e2103b">  835</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a7a80dab81a3d99468135852003e2103b">lock_timeout</a>;</div><div class="line"><a name="l00836"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a872d3b632c49405fa341dd96a78f5543">  836</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a872d3b632c49405fa341dd96a78f5543">fastlock</a>;</div><div class="line"><a name="l00837"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a2673465a4a326c5653dc32014c5c6bfe">  837</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a2673465a4a326c5653dc32014c5c6bfe">resync_period</a>;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div><div class="line"><a name="l00839"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a8dad92fb87c0ec045a79fc9d78141de8">  839</a></span>&#160;    <a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a8dad92fb87c0ec045a79fc9d78141de8">mpeg_sync</a>(<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html">scheduler</a> *<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>,</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;              <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;Tbyte&gt;</a> &amp;_in,</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;              <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;Tbyte&gt;</a> &amp;_out,</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;              <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html">deconvol_sync&lt;Tbyte, 0&gt;</a> *_deconv,</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;              <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;int&gt;</a> *_state_out = NULL,</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;              <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;unsigned long&gt;</a> *_locktime_out = NULL) : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a>(sch, <span class="stringliteral">&quot;sync_detect&quot;</span>),</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                                                              scan_syncs(8),</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                                                              want_syncs(4),</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                                                              lock_timeout(4),</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                                                              fastlock(false),</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                                                              resync_period(1),</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                                                              <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>(_in),</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                                                              <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>(_out, SIZE_RSPACKET * (scan_syncs + 1)),</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                                                              <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a768f9e3839ea487faa010e27f9ff9c18">deconv</a>(_deconv),</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                                                              polarity(0),</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                                                              resync_phase(0),</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                                                              bitphase(0),</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                                                              synchronized(false),</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                                                              next_sync_count(0),</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                                                              report_state(true)</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    {</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        state_out = _state_out ? <span class="keyword">new</span> <a class="code" href="../../de/d0e/structleansdr_1_1pipewriter.html">pipewriter&lt;int&gt;</a>(*_state_out) : NULL;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        locktime_out = _locktime_out ? <span class="keyword">new</span> <a class="code" href="../../de/d0e/structleansdr_1_1pipewriter.html">pipewriter&lt;unsigned long&gt;</a>(*_locktime_out) : NULL;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    }</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div><div class="line"><a name="l00864"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#ae64cf3adf5f30eaeb459a0a2fe503f29">  864</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#ae64cf3adf5f30eaeb459a0a2fe503f29">run</a>()</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    {</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <span class="keywordflow">if</span> (report_state &amp;&amp; state_out &amp;&amp; state_out-&gt;writable() &gt;= 1)</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        {</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            <span class="comment">// Report unlocked state on first invocation.</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            state_out-&gt;write(0);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            report_state = <span class="keyword">false</span>;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        }</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">synchronized</span>)</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        {</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a4d7cea3418fa6a37e6d96757a609aa2c">run_decoding</a>();</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        }</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        {</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;            <span class="keywordflow">if</span> (fastlock)</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                run_searching_fast();</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                run_searching();</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        }</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    }</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00886"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#abfcb76c1a7ed45d4f17a613f2885b2ac">  886</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#abfcb76c1a7ed45d4f17a613f2885b2ac">run_searching</a>()</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    {</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a73de36a8be9d747f8dd48356e3545188">next_sync</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <span class="keywordtype">int</span> chunk = SIZE_RSPACKET * scan_syncs;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.readable() &gt;= chunk + 1 <span class="comment">// Need 1 ahead for bit shifting</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;               &amp;&amp; <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.writable() &gt;= chunk <span class="comment">// Use as temp buffer</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;               &amp;&amp; (!state_out || state_out-&gt;writable() &gt;= 1))</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        {</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            <span class="keywordflow">if</span> (search_sync())</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;            <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.read(chunk);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;            <span class="comment">// Switch to next bit alignment</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            ++bitphase;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            <span class="keywordflow">if</span> (bitphase == 8)</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;            {</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                bitphase = 0;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                next_sync = <span class="keyword">true</span>;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            }</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        }</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        <span class="keywordflow">if</span> (next_sync)</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        {</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            <span class="comment">// No lock this time</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;            ++next_sync_count;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;            <span class="keywordflow">if</span> (next_sync_count &gt;= 3)</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;            {</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                <span class="comment">// After a few cycles without a lock, resync the deconvolver.</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                next_sync_count = 0;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a768f9e3839ea487faa010e27f9ff9c18">deconv</a>)</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                    <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a768f9e3839ea487faa010e27f9ff9c18">deconv</a>-&gt;next_sync();</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            }</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        }</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    }</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div><div class="line"><a name="l00924"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a364b2edc6f86f8761676bcd374c17366">  924</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a364b2edc6f86f8761676bcd374c17366">run_searching_fast</a>()</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    {</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        <span class="keywordtype">int</span> chunk = SIZE_RSPACKET * scan_syncs;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.readable() &gt;= chunk + 1 <span class="comment">// Need 1 ahead for bit shifting</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;               &amp;&amp; <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.writable() &gt;= chunk <span class="comment">// Use as temp buffer</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;               &amp;&amp; (!state_out || state_out-&gt;writable() &gt;= 1))</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        {</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            <span class="keywordflow">if</span> (resync_phase == 0)</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            {</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                <span class="comment">// Try all bit alighments</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                <span class="keywordflow">for</span> (bitphase = 0; bitphase &lt;= 7; ++bitphase)</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                    <span class="keywordflow">if</span> (search_sync())</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                }</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            }</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.read(SIZE_RSPACKET);</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            <span class="keywordflow">if</span> (++resync_phase &gt;= resync_period)</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                resync_phase = 0;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        }</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    }</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div><div class="line"><a name="l00949"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a48696fff15fc1bd3a531371c6be38dba">  949</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a48696fff15fc1bd3a531371c6be38dba">search_sync</a>()</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    {</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        <span class="keywordtype">int</span> chunk = SIZE_RSPACKET * scan_syncs;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <span class="comment">// Bit-shift [scan_sync] packets according to current [bitphase]</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        Tbyte *pin = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.rd(), *pend = pin + chunk;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        Tbyte *pout = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.wr();</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> w = *pin++;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        <span class="keywordflow">for</span> (; pin &lt;= pend; ++pin, ++pout)</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        {</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;            w = (w &lt;&lt; 8) | *pin;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;            *pout = w &gt;&gt; bitphase;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        }</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        <span class="comment">// Search for [want_sync] start codes at all 204 offsets</span></div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a> = 0; <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a> &lt; SIZE_RSPACKET; ++<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>)</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        {</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;            <span class="keywordtype">int</span> nsyncs_p = 0, nsyncs_n = 0;   <span class="comment">// # start codes assuming pos/neg polarity</span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;            <span class="keywordtype">int</span> phase8_p = -1, phase8_n = -1; <span class="comment">// Position in sequence of 8 packets</span></div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;            Tbyte *p = &amp;<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.wr()[<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>];</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; scan_syncs; ++j, p += SIZE_RSPACKET)</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;            {</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                Tbyte b = *p;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                <span class="keywordflow">if</span> (b == MPEG_SYNC)</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                {</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                    ++nsyncs_p;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                    phase8_n = (8 - j) &amp; 7;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                }</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                <span class="keywordflow">if</span> (b == MPEG_SYNC_INV)</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                {</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                    ++nsyncs_n;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                    phase8_p = (8 - j) &amp; 7;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                }</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;            }</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;            <span class="comment">// Detect most likely polarity</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;            <span class="keywordtype">int</span> nsyncs;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;            <span class="keywordflow">if</span> (nsyncs_p &gt; nsyncs_n)</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            {</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                polarity = 0;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                nsyncs = nsyncs_p;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                phase8 = phase8_p;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            }</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            {</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                polarity = -1;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                nsyncs = nsyncs_n;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                phase8 = phase8_n;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            }</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            <span class="keywordflow">if</span> (nsyncs &gt;= want_syncs &amp;&amp; phase8 &gt;= 0)</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;            {</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>-&gt;<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html#aaeb22741e64a6fac0a7bee7c86db63be">debug</a>)</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                    fprintf(stderr, <span class="stringliteral">&quot;Locked\n&quot;</span>);</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>)</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                { <span class="comment">// Avoid fixpoint detection in scheduler</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                    <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a> = SIZE_RSPACKET;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                    phase8 = (phase8 + 1) &amp; 7;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                }</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.read(<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>); <span class="comment">// Skip to first start code</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                <span class="keyword">synchronized</span> = <span class="keyword">true</span>;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                lock_timeleft = lock_timeout;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                locktime = 0;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                <span class="keywordflow">if</span> (state_out)</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                    state_out-&gt;write(1);</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;            }</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        }</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    }</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div><div class="line"><a name="l01028"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a3f700159c7b14218475ee7a484f8c75a"> 1028</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a3f700159c7b14218475ee7a484f8c75a">run_decoding</a>()</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    {</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.readable() &gt;= SIZE_RSPACKET + 1 &amp;&amp; <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.writable() &gt;= SIZE_RSPACKET &amp;&amp; (!state_out || state_out-&gt;writable() &gt;= 1) &amp;&amp; (!locktime_out || locktime_out-&gt;writable() &gt;= 1))</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        {</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            Tbyte *pin = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.rd(), *pend = pin + SIZE_RSPACKET;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            Tbyte *pout = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.wr();</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> w = *pin++;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            <span class="keywordflow">for</span> (; pin &lt;= pend; ++pin, ++pout)</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            {</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                w = (w &lt;&lt; 8) | *pin;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                *pout = (w &gt;&gt; bitphase) ^ polarity;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            }</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.read(SIZE_RSPACKET);</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;            Tbyte syncbyte = *<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.wr();</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.written(SIZE_RSPACKET);</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            ++locktime;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;            <span class="keywordflow">if</span> (locktime_out)</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                locktime_out-&gt;write(locktime);</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            <span class="comment">// Reset timer if sync byte is correct</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            Tbyte expected = phase8 ? MPEG_SYNC : MPEG_SYNC_INV;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            <span class="keywordflow">if</span> (syncbyte == expected)</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                lock_timeleft = lock_timeout;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;            phase8 = (phase8 + 1) &amp; 7;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;            --lock_timeleft;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            <span class="keywordflow">if</span> (!lock_timeleft)</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;            {</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>-&gt;<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html#aaeb22741e64a6fac0a7bee7c86db63be">debug</a>)</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                    fprintf(stderr, <span class="stringliteral">&quot;Unlocked\n&quot;</span>);</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                <span class="keyword">synchronized</span> = <span class="keyword">false</span>;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                next_sync_count = 0;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                <span class="keywordflow">if</span> (state_out)</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                    state_out-&gt;write(0);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;            }</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        }</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    }</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l01076"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a8fbaf920a857af03af718c4579e3303f"> 1076</a></span>&#160;    <a class="code" href="../../d0/d5e/structleansdr_1_1pipereader.html">pipereader&lt;Tbyte&gt;</a> <a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a8fbaf920a857af03af718c4579e3303f">in</a>;</div><div class="line"><a name="l01077"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#adaf308825f03945f90a033b1cda39a2a"> 1077</a></span>&#160;    <a class="code" href="../../de/d0e/structleansdr_1_1pipewriter.html">pipewriter&lt;Tbyte&gt;</a> <a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#adaf308825f03945f90a033b1cda39a2a">out</a>;</div><div class="line"><a name="l01078"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a271134f928cc1c71478006480c7bb3a6"> 1078</a></span>&#160;    <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html">deconvol_sync&lt;Tbyte, 0&gt;</a> *<a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a271134f928cc1c71478006480c7bb3a6">deconv</a>;</div><div class="line"><a name="l01079"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a7f7c7d9d997e601e0060a0932127ebd6"> 1079</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a7f7c7d9d997e601e0060a0932127ebd6">polarity</a>; <span class="comment">// XOR mask, 0 or 0xff</span></div><div class="line"><a name="l01080"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#abae8829a14449218b950756ee5612db0"> 1080</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#abae8829a14449218b950756ee5612db0">resync_phase</a>;</div><div class="line"><a name="l01081"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#aa25096d8e864e0e81f32e5c375d0fd29"> 1081</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#aa25096d8e864e0e81f32e5c375d0fd29">bitphase</a>;</div><div class="line"><a name="l01082"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a3f6ee080e03d24f02cd4c85f2d1d882a"> 1082</a></span>&#160;    <span class="keywordtype">bool</span> <span class="keyword">synchronized</span>;</div><div class="line"><a name="l01083"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a102bb83134620ec136613ece4721aede"> 1083</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a102bb83134620ec136613ece4721aede">next_sync_count</a>;</div><div class="line"><a name="l01084"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a1846504721cc15375f809290ffd7acb6"> 1084</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a1846504721cc15375f809290ffd7acb6">phase8</a>; <span class="comment">// Position in 8-packet cycle, -1 if not synchronized</span></div><div class="line"><a name="l01085"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a7cada6432412f46be6706e8699ecf718"> 1085</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a7cada6432412f46be6706e8699ecf718">lock_timeleft</a>;</div><div class="line"><a name="l01086"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a3c9ba4ade51e6b62184f6b4915c18866"> 1086</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a3c9ba4ade51e6b62184f6b4915c18866">locktime</a>;</div><div class="line"><a name="l01087"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a271cf4943dab3cf3065ac8fc68c088f1"> 1087</a></span>&#160;    <a class="code" href="../../de/d0e/structleansdr_1_1pipewriter.html">pipewriter&lt;int&gt;</a> *<a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a271cf4943dab3cf3065ac8fc68c088f1">state_out</a>;</div><div class="line"><a name="l01088"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#aab3685ade8d81f1e2636468bb0d2d0ee"> 1088</a></span>&#160;    <a class="code" href="../../de/d0e/structleansdr_1_1pipewriter.html">pipewriter&lt;unsigned long&gt;</a> *<a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#aab3685ade8d81f1e2636468bb0d2d0ee">locktime_out</a>;</div><div class="line"><a name="l01089"></a><span class="lineno"><a class="line" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a4c7eb4b7e45b97ef01ca929e60818a8e"> 1089</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a4c7eb4b7e45b97ef01ca929e60818a8e">report_state</a>;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;};</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Tbyte&gt;</div><div class="line"><a name="l01093"></a><span class="lineno"><a class="line" href="../../d7/d15/structleansdr_1_1rspacket.html"> 1093</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d7/d15/structleansdr_1_1rspacket.html">rspacket</a></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;{</div><div class="line"><a name="l01095"></a><span class="lineno"><a class="line" href="../../d7/d15/structleansdr_1_1rspacket.html#a54e5a92a51fb89cbc364818ff2b22ba4"> 1095</a></span>&#160;    Tbyte data[SIZE_RSPACKET];</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;};</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment">// INTERLEAVER</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div><div class="line"><a name="l01100"></a><span class="lineno"><a class="line" href="../../d1/d15/structleansdr_1_1interleaver.html"> 1100</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d1/d15/structleansdr_1_1interleaver.html">interleaver</a> : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;{</div><div class="line"><a name="l01102"></a><span class="lineno"><a class="line" href="../../d1/d15/structleansdr_1_1interleaver.html#a95081286b92cf8ff7ce4583853b4c88a"> 1102</a></span>&#160;    <a class="code" href="../../d1/d15/structleansdr_1_1interleaver.html#a95081286b92cf8ff7ce4583853b4c88a">interleaver</a>(<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html">scheduler</a> *<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>,</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf</a>&lt;<a class="code" href="../../d7/d15/structleansdr_1_1rspacket.html">rspacket&lt;u8&gt;</a>&gt; &amp;_in,</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;u8&gt;</a> &amp;_out) : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a>(sch, <span class="stringliteral">&quot;interleaver&quot;</span>),</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                                     <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>(_in),</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;                                     <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>(_out, SIZE_RSPACKET)</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    {</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    }</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div><div class="line"><a name="l01110"></a><span class="lineno"><a class="line" href="../../d1/d15/structleansdr_1_1interleaver.html#aeff7e4c2dbed4bbb7dd9a08f68796d7f"> 1110</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d1/d15/structleansdr_1_1interleaver.html#aeff7e4c2dbed4bbb7dd9a08f68796d7f">run</a>()</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    {</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.readable() &gt;= 12 &amp;&amp; <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.writable() &gt;= SIZE_RSPACKET)</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        {</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;            <a class="code" href="../../d7/d15/structleansdr_1_1rspacket.html">rspacket&lt;u8&gt;</a> *pin = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.rd();</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;            <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> *pout = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.wr();</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;            <span class="keywordtype">int</span> delay = 0;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a> = 0; <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a> &lt; SIZE_RSPACKET; ++<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>, ++pout, delay = (delay + 1) % 12)</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            {</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                *pout = pin[11 - delay].<a class="code" href="../../d7/d15/structleansdr_1_1rspacket.html#a54e5a92a51fb89cbc364818ff2b22ba4">data</a>[<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>];</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;            }</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;            <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.read(1);</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;            <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.written(SIZE_RSPACKET);</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        }</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    }</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l01129"></a><span class="lineno"><a class="line" href="../../d1/d15/structleansdr_1_1interleaver.html#a8d02b4cc0e1ea47cb02ba35c0df29f77"> 1129</a></span>&#160;    <a class="code" href="../../d0/d5e/structleansdr_1_1pipereader.html">pipereader&lt;rspacket&lt;u8&gt;</a>&gt; <a class="code" href="../../d1/d15/structleansdr_1_1interleaver.html#a8d02b4cc0e1ea47cb02ba35c0df29f77">in</a>;</div><div class="line"><a name="l01130"></a><span class="lineno"><a class="line" href="../../d1/d15/structleansdr_1_1interleaver.html#a420693372eeff16932428c865949f37f"> 1130</a></span>&#160;    <a class="code" href="../../de/d0e/structleansdr_1_1pipewriter.html">pipewriter&lt;u8&gt;</a> <a class="code" href="../../d1/d15/structleansdr_1_1interleaver.html#a420693372eeff16932428c865949f37f">out</a>;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;};</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment">// interleaver</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment">// DEINTERLEAVER</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Tbyte&gt;</div><div class="line"><a name="l01137"></a><span class="lineno"><a class="line" href="../../db/d25/structleansdr_1_1deinterleaver.html"> 1137</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../db/d25/structleansdr_1_1deinterleaver.html">deinterleaver</a> : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;{</div><div class="line"><a name="l01139"></a><span class="lineno"><a class="line" href="../../db/d25/structleansdr_1_1deinterleaver.html#a12b07a452958a9444f2c96eb7a756fc7"> 1139</a></span>&#160;    <a class="code" href="../../db/d25/structleansdr_1_1deinterleaver.html#a12b07a452958a9444f2c96eb7a756fc7">deinterleaver</a>(<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html">scheduler</a> *<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>,</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                  <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;Tbyte&gt;</a> &amp;_in,</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;                  <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf</a>&lt;<a class="code" href="../../d7/d15/structleansdr_1_1rspacket.html">rspacket&lt;Tbyte&gt;</a>&gt; &amp;_out) : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a>(sch, <span class="stringliteral">&quot;deinterleaver&quot;</span>),</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                                                    <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>(_in),</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                                                    <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>(_out)</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    {</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    }</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div><div class="line"><a name="l01147"></a><span class="lineno"><a class="line" href="../../db/d25/structleansdr_1_1deinterleaver.html#aefd4157a324d6aaccf2eb65c2710de5a"> 1147</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../db/d25/structleansdr_1_1deinterleaver.html#aefd4157a324d6aaccf2eb65c2710de5a">run</a>()</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    {</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.readable() &gt;= 17 * 11 * 12 + SIZE_RSPACKET &amp;&amp; <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.writable() &gt;= 1)</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        {</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;            Tbyte *pin = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.rd() + 17 * 11 * 12, *pend = pin + SIZE_RSPACKET;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;            Tbyte *pout = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.wr()-&gt;data;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> delay = 17 * 11; pin &lt; pend; ++pin, ++pout, delay = (delay - 17 + 17 * 12) % (17 * 12))</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;            {</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;                *pout = pin[-delay * 12];</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;            }</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;            <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.read(SIZE_RSPACKET);</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;            <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.written(1);</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        }</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    }</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l01165"></a><span class="lineno"><a class="line" href="../../db/d25/structleansdr_1_1deinterleaver.html#a1f1d5ef267cc8197eff6d87b4be708e9"> 1165</a></span>&#160;    <a class="code" href="../../d0/d5e/structleansdr_1_1pipereader.html">pipereader&lt;Tbyte&gt;</a> <a class="code" href="../../db/d25/structleansdr_1_1deinterleaver.html#a1f1d5ef267cc8197eff6d87b4be708e9">in</a>;</div><div class="line"><a name="l01166"></a><span class="lineno"><a class="line" href="../../db/d25/structleansdr_1_1deinterleaver.html#aa6a63333f08e7da01a65199b1485e664"> 1166</a></span>&#160;    <a class="code" href="../../de/d0e/structleansdr_1_1pipewriter.html">pipewriter&lt;rspacket&lt;Tbyte&gt;</a>&gt; <a class="code" href="../../db/d25/structleansdr_1_1deinterleaver.html#aa6a63333f08e7da01a65199b1485e664">out</a>;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;};</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment">// deinterleaver</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> SIZE_TSPACKET = 188; <span class="comment">// TBD remove</span></div><div class="line"><a name="l01171"></a><span class="lineno"><a class="line" href="../../d7/d0a/structleansdr_1_1tspacket.html"> 1171</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d7/d0a/structleansdr_1_1tspacket.html">tspacket</a></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;{</div><div class="line"><a name="l01173"></a><span class="lineno"><a class="line" href="../../d7/d0a/structleansdr_1_1tspacket.html#a13b9ac3bff60926a18287768fcf5033b"> 1173</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> SIZE = 188;</div><div class="line"><a name="l01174"></a><span class="lineno"><a class="line" href="../../d7/d0a/structleansdr_1_1tspacket.html#a5cc2e89c4306f3197ad70eeb5710075a"> 1174</a></span>&#160;    <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> data[SIZE_TSPACKET];</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;};</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="comment">// RS ENCODER</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;</div><div class="line"><a name="l01179"></a><span class="lineno"><a class="line" href="../../da/dc5/structleansdr_1_1rs__encoder.html"> 1179</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../da/dc5/structleansdr_1_1rs__encoder.html">rs_encoder</a> : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;{</div><div class="line"><a name="l01181"></a><span class="lineno"><a class="line" href="../../da/dc5/structleansdr_1_1rs__encoder.html#a12102a9bc60ab419f8b3b02abc644cec"> 1181</a></span>&#160;    <a class="code" href="../../da/dc5/structleansdr_1_1rs__encoder.html#a12102a9bc60ab419f8b3b02abc644cec">rs_encoder</a>(<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html">scheduler</a> *<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>,</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;               <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;tspacket&gt;</a> &amp;_in,</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;               <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf</a>&lt;<a class="code" href="../../d7/d15/structleansdr_1_1rspacket.html">rspacket&lt;u8&gt;</a>&gt; &amp;_out) : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a>(sch, <span class="stringliteral">&quot;RS encoder&quot;</span>),</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                                              <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>(_in),</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                                              <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>(_out)</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    {</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    }</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;</div><div class="line"><a name="l01189"></a><span class="lineno"><a class="line" href="../../da/dc5/structleansdr_1_1rs__encoder.html#a1c4651c386f5caf12f34acda3bc7767d"> 1189</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../da/dc5/structleansdr_1_1rs__encoder.html#a1c4651c386f5caf12f34acda3bc7767d">run</a>()</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    {</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.readable() &gt;= 1 &amp;&amp; <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.writable() &gt;= 1)</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        {</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;            <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> *pin = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.rd()-&gt;data;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;            <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> *pout = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.wr()-&gt;data;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;            <span class="comment">// The first 188 bytes are the uncoded message P(X)</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;            memcpy(pout, pin, SIZE_TSPACKET);</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;            <span class="comment">// Append 16 RS parity bytes R(X) = - (P(X)*X^16 mod G(X))</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;            <span class="comment">// so that G(X) divides the coded message S(X) = P(X)*X^16 - R(X).</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;            rs.encode(pout);</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;            <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.read(1);</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.written(1);</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        }</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    }</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l01206"></a><span class="lineno"><a class="line" href="../../da/dc5/structleansdr_1_1rs__encoder.html#a1041f4651964faeae4727f0fae2ce937"> 1206</a></span>&#160;    <a class="code" href="../../d3/d15/structleansdr_1_1rs__engine.html">rs_engine</a> <a class="code" href="../../da/dc5/structleansdr_1_1rs__encoder.html#a1041f4651964faeae4727f0fae2ce937">rs</a>;</div><div class="line"><a name="l01207"></a><span class="lineno"><a class="line" href="../../da/dc5/structleansdr_1_1rs__encoder.html#aa881547b419796028960c43e544fa803"> 1207</a></span>&#160;    <a class="code" href="../../d0/d5e/structleansdr_1_1pipereader.html">pipereader&lt;tspacket&gt;</a> <a class="code" href="../../da/dc5/structleansdr_1_1rs__encoder.html#aa881547b419796028960c43e544fa803">in</a>;</div><div class="line"><a name="l01208"></a><span class="lineno"><a class="line" href="../../da/dc5/structleansdr_1_1rs__encoder.html#ac09105707b016771f0d5a05116a50e52"> 1208</a></span>&#160;    <a class="code" href="../../de/d0e/structleansdr_1_1pipewriter.html">pipewriter&lt;rspacket&lt;u8&gt;</a>&gt; <a class="code" href="../../da/dc5/structleansdr_1_1rs__encoder.html#ac09105707b016771f0d5a05116a50e52">out</a>;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;};</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="comment">// rs_encoder</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment">// RS DECODER</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Tbyte, <span class="keywordtype">int</span> BYTE_ERASED&gt;</div><div class="line"><a name="l01215"></a><span class="lineno"><a class="line" href="../../dd/d35/structleansdr_1_1rs__decoder.html"> 1215</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../dd/d35/structleansdr_1_1rs__decoder.html">rs_decoder</a> : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;{</div><div class="line"><a name="l01217"></a><span class="lineno"><a class="line" href="../../dd/d35/structleansdr_1_1rs__decoder.html#a3099e1f28f23c0101ae869611f1b470e"> 1217</a></span>&#160;    <a class="code" href="../../d3/d15/structleansdr_1_1rs__engine.html">rs_engine</a> <a class="code" href="../../dd/d35/structleansdr_1_1rs__decoder.html#a3099e1f28f23c0101ae869611f1b470e">rs</a>;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div><div class="line"><a name="l01219"></a><span class="lineno"><a class="line" href="../../dd/d35/structleansdr_1_1rs__decoder.html#a4bccae476692c02f81ef06c1d5e86317"> 1219</a></span>&#160;    <a class="code" href="../../dd/d35/structleansdr_1_1rs__decoder.html#a4bccae476692c02f81ef06c1d5e86317">rs_decoder</a>(<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html">scheduler</a> *<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>,</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;               <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf</a>&lt;<a class="code" href="../../d7/d15/structleansdr_1_1rspacket.html">rspacket&lt;Tbyte&gt;</a>&gt; &amp;_in,</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;               <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;tspacket&gt;</a> &amp;_out,</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;               <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;int&gt;</a> *_bitcount = NULL,</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;               <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;int&gt;</a> *_errcount = NULL) : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a>(sch, <span class="stringliteral">&quot;RS decoder&quot;</span>),</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                                                 <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>(_in),</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;                                                 <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>(_out)</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    {</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        bitcount = _bitcount ? <span class="keyword">new</span> <a class="code" href="../../de/d0e/structleansdr_1_1pipewriter.html">pipewriter&lt;int&gt;</a>(*_bitcount) : NULL;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        errcount = _errcount ? <span class="keyword">new</span> <a class="code" href="../../de/d0e/structleansdr_1_1pipewriter.html">pipewriter&lt;int&gt;</a>(*_errcount) : NULL;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    }</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;</div><div class="line"><a name="l01231"></a><span class="lineno"><a class="line" href="../../dd/d35/structleansdr_1_1rs__decoder.html#a441055e3a0bf728946622ca72ef91c87"> 1231</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../dd/d35/structleansdr_1_1rs__decoder.html#a441055e3a0bf728946622ca72ef91c87">run</a>()</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    {</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        <span class="keywordflow">if</span> (bitcount &amp;&amp; bitcount-&gt;writable() &lt; 1)</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        <span class="keywordflow">if</span> (errcount &amp;&amp; errcount-&gt;writable() &lt; 1)</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        <span class="keywordtype">int</span> nbits = 0, nerrs = 0;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.readable() &gt;= 1 &amp;&amp; <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.writable() &gt;= 1)</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        {</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            Tbyte *pin = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.rd()-&gt;data;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> *pout = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.wr()-&gt;data;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            nbits += SIZE_RSPACKET * 8;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            <span class="comment">// The message is the first 188 bytes.</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(Tbyte) == 1)</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                memcpy(pout, pin, SIZE_TSPACKET);</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                <a class="code" href="../../d7/d1e/namespaceleansdr.html#aa7ac6e394835c089a0a359dbdb72e0b8">fail</a>(<span class="stringliteral">&quot;Erasures not implemented&quot;</span>);</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> synd[16];</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;            <span class="keywordtype">bool</span> corrupted = rs.<a class="code" href="../../d3/d15/structleansdr_1_1rs__engine.html#a0cba248ddd29dbbe427a43e495a980f5">syndromes</a>(pin, synd);</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;            <span class="keywordflow">if</span> ( ! corrupted ) {</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                <span class="comment">// Test BM</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                fprintf(stderr, <span class="stringliteral">&quot;Simulating errors\n&quot;</span>);</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                pin[203] ^= 42;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                pin[202] ^= 99;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                corrupted = rs.<a class="code" href="../../d3/d15/structleansdr_1_1rs__engine.html#a0cba248ddd29dbbe427a43e495a980f5">syndromes</a>(pin, synd);</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            }</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;            <span class="keywordflow">if</span> (!corrupted)</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            {</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>-&gt;<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html#aaeb22741e64a6fac0a7bee7c86db63be">debug</a>)</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                    fprintf(stderr, <span class="stringliteral">&quot;_&quot;</span>); <span class="comment">// Packet received without errors.</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;            }</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;            {</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                corrupted = rs.<a class="code" href="../../d3/d15/structleansdr_1_1rs__engine.html#ad228e9e202a6d1b1c1c3c73191671732">correct</a>(synd, pout, pin, &amp;nerrs);</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>-&gt;<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html#aaeb22741e64a6fac0a7bee7c86db63be">debug</a>)</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                {</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                    <span class="keywordflow">if</span> (!corrupted)</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                        fprintf(stderr, <span class="stringliteral">&quot;.&quot;</span>); <span class="comment">// Errors were corrected.</span></div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                        fprintf(stderr, <span class="stringliteral">&quot;!&quot;</span>); <span class="comment">// Packet still corrupted.</span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                }</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;            }</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;            <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.read(1);</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;            <span class="comment">// Output corrupted packets (with a special mark)</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;            <span class="comment">// otherwise the derandomizer will lose synchronization.</span></div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;            <span class="keywordflow">if</span> (corrupted)</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                pout[0] ^= MPEG_SYNC_CORRUPTED;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;            <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.written(1);</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;        }</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        <span class="keywordflow">if</span> (nbits)</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;        {</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            <span class="keywordflow">if</span> (bitcount)</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;                bitcount-&gt;write(nbits);</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;            <span class="keywordflow">if</span> (errcount)</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                errcount-&gt;write(nerrs);</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        }</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    }</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l01303"></a><span class="lineno"><a class="line" href="../../dd/d35/structleansdr_1_1rs__decoder.html#afcfa6031620b9a5b511425a73e85cdb2"> 1303</a></span>&#160;    <a class="code" href="../../d0/d5e/structleansdr_1_1pipereader.html">pipereader&lt;rspacket&lt;Tbyte&gt;</a>&gt; <a class="code" href="../../dd/d35/structleansdr_1_1rs__decoder.html#afcfa6031620b9a5b511425a73e85cdb2">in</a>;</div><div class="line"><a name="l01304"></a><span class="lineno"><a class="line" href="../../dd/d35/structleansdr_1_1rs__decoder.html#a8e428d7889c4ade17aec0b0fb1552300"> 1304</a></span>&#160;    <a class="code" href="../../de/d0e/structleansdr_1_1pipewriter.html">pipewriter&lt;tspacket&gt;</a> <a class="code" href="../../dd/d35/structleansdr_1_1rs__decoder.html#a8e428d7889c4ade17aec0b0fb1552300">out</a>;</div><div class="line"><a name="l01305"></a><span class="lineno"><a class="line" href="../../dd/d35/structleansdr_1_1rs__decoder.html#ae64fc52f5e532eec8125593d4d8cae04"> 1305</a></span>&#160;    <a class="code" href="../../de/d0e/structleansdr_1_1pipewriter.html">pipewriter&lt;int&gt;</a> *bitcount, *<a class="code" href="../../dd/d35/structleansdr_1_1rs__decoder.html#ae64fc52f5e532eec8125593d4d8cae04">errcount</a>;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;};</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;<span class="comment">// rs_decoder</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="comment">// RANDOMIZER</span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;</div><div class="line"><a name="l01311"></a><span class="lineno"><a class="line" href="../../d1/d45/structleansdr_1_1randomizer.html"> 1311</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d1/d45/structleansdr_1_1randomizer.html">randomizer</a> : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;{</div><div class="line"><a name="l01313"></a><span class="lineno"><a class="line" href="../../d1/d45/structleansdr_1_1randomizer.html#aca4bdf7c45e1f15ee0d4cbba9f0d58f6"> 1313</a></span>&#160;    <a class="code" href="../../d1/d45/structleansdr_1_1randomizer.html#aca4bdf7c45e1f15ee0d4cbba9f0d58f6">randomizer</a>(<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html">scheduler</a> *<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>,</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;               <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;tspacket&gt;</a> &amp;_in,</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;               <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;tspacket&gt;</a> &amp;_out) : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a>(sch, <span class="stringliteral">&quot;derandomizer&quot;</span>),</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                                          <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>(_in),</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                                          <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>(_out)</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    {</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;        precompute_pattern();</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        pos = pattern;</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        pattern_end = pattern + <span class="keyword">sizeof</span>(pattern) / <span class="keyword">sizeof</span>(pattern[0]);</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    }</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;</div><div class="line"><a name="l01324"></a><span class="lineno"><a class="line" href="../../d1/d45/structleansdr_1_1randomizer.html#a89f76d5169ab1832397717d611776b74"> 1324</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d1/d45/structleansdr_1_1randomizer.html#a89f76d5169ab1832397717d611776b74">precompute_pattern</a>()</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    {</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        <span class="comment">// EN 300 421, section 4.4.1 Transport multiplex adaptation</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        pattern[0] = 0xff;          <span class="comment">// Invert one in eight sync bytes</span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> st = 000251; <span class="comment">// 0b 000 000 010 101 001 (Fig 2 reversed)</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a> = 1; <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a> &lt; 188 * 8; ++<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>)</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        {</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;            <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a> = 0;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n = 8; n--;)</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;            {</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;                <span class="keywordtype">int</span> bit = ((st &gt;&gt; 13) ^ (st &gt;&gt; 14)) &amp; 1; <span class="comment">// Taps</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                out = (out &lt;&lt; 1) | bit;                  <span class="comment">// MSB first</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                st = (st &lt;&lt; 1) | bit;                    <span class="comment">// Feedback</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;            }</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            pattern[<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>] = (<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a> % 188) ? out : 0; <span class="comment">// Inhibit on sync bytes</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        }</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    }</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;</div><div class="line"><a name="l01345"></a><span class="lineno"><a class="line" href="../../d1/d45/structleansdr_1_1randomizer.html#a8d2b66fb6c3481997ad63c2172856a18"> 1345</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d1/d45/structleansdr_1_1randomizer.html#a8d2b66fb6c3481997ad63c2172856a18">run</a>()</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    {</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.readable() &gt;= 1 &amp;&amp; <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.writable() &gt;= 1)</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        {</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;            <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> *pin = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.rd()-&gt;data, *pend = pin + SIZE_TSPACKET;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;            <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> *pout = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.wr()-&gt;data;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;            <span class="keywordflow">if</span> (pin[0] != MPEG_SYNC)</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;                fprintf(stderr, <span class="stringliteral">&quot;randomizer: bad MPEG sync %02x\n&quot;</span>, pin[0]);</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;            <span class="keywordflow">for</span> (; pin &lt; pend; ++pin, ++pout, ++pos)</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;                *pout = *pin ^ *pos;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            <span class="keywordflow">if</span> (pos == pattern_end)</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                pos = pattern;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;            <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.read(1);</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;            <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.written(1);</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        }</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    }</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l01363"></a><span class="lineno"><a class="line" href="../../d1/d45/structleansdr_1_1randomizer.html#a6a61f99cff4d4a5d10f184c120b37747"> 1363</a></span>&#160;    <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> pattern[188 * 8], *pattern_end, *<a class="code" href="../../d1/d45/structleansdr_1_1randomizer.html#a6a61f99cff4d4a5d10f184c120b37747">pos</a>;</div><div class="line"><a name="l01364"></a><span class="lineno"><a class="line" href="../../d1/d45/structleansdr_1_1randomizer.html#aee3f77dfb82cc4c2c047d5f93b8e1916"> 1364</a></span>&#160;    <a class="code" href="../../d0/d5e/structleansdr_1_1pipereader.html">pipereader&lt;tspacket&gt;</a> <a class="code" href="../../d1/d45/structleansdr_1_1randomizer.html#aee3f77dfb82cc4c2c047d5f93b8e1916">in</a>;</div><div class="line"><a name="l01365"></a><span class="lineno"><a class="line" href="../../d1/d45/structleansdr_1_1randomizer.html#ad6401cc6f61c96b684c8891d6e178751"> 1365</a></span>&#160;    <a class="code" href="../../de/d0e/structleansdr_1_1pipewriter.html">pipewriter&lt;tspacket&gt;</a> <a class="code" href="../../d1/d45/structleansdr_1_1randomizer.html#ad6401cc6f61c96b684c8891d6e178751">out</a>;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;};</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="comment">// randomizer</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment">// DERANDOMIZER</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;</div><div class="line"><a name="l01371"></a><span class="lineno"><a class="line" href="../../d9/d3a/structleansdr_1_1derandomizer.html"> 1371</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d9/d3a/structleansdr_1_1derandomizer.html">derandomizer</a> : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;{</div><div class="line"><a name="l01373"></a><span class="lineno"><a class="line" href="../../d9/d3a/structleansdr_1_1derandomizer.html#a1a9d97f8c9e030fb9b2ae5cb64628b40"> 1373</a></span>&#160;    <a class="code" href="../../d9/d3a/structleansdr_1_1derandomizer.html#a1a9d97f8c9e030fb9b2ae5cb64628b40">derandomizer</a>(<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html">scheduler</a> *<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>,</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;                 <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;tspacket&gt;</a> &amp;_in,</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;                 <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;tspacket&gt;</a> &amp;_out) : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a>(sch, <span class="stringliteral">&quot;derandomizer&quot;</span>),</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;                                            <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>(_in),</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;                                            <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>(_out)</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    {</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;        precompute_pattern();</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        pos = pattern;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        pattern_end = pattern + <span class="keyword">sizeof</span>(pattern) / <span class="keyword">sizeof</span>(pattern[0]);</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    }</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;</div><div class="line"><a name="l01384"></a><span class="lineno"><a class="line" href="../../d9/d3a/structleansdr_1_1derandomizer.html#a4da6a30a41bd1a08425da119c48439c4"> 1384</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d9/d3a/structleansdr_1_1derandomizer.html#a4da6a30a41bd1a08425da119c48439c4">precompute_pattern</a>()</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    {</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        <span class="comment">// EN 300 421, section 4.4.1 Transport multiplex adaptation</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        pattern[0] = 0xff;          <span class="comment">// Restore the inverted sync byte</span></div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> st = 000251; <span class="comment">// 0b 000 000 010 101 001 (Fig 2 reversed)</span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a> = 1; <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a> &lt; 188 * 8; ++<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>)</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        {</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;            <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a> = 0;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n = 8; n--;)</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;            {</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                <span class="keywordtype">int</span> bit = ((st &gt;&gt; 13) ^ (st &gt;&gt; 14)) &amp; 1; <span class="comment">// Taps</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;                out = (out &lt;&lt; 1) | bit;                  <span class="comment">// MSB first</span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;                st = (st &lt;&lt; 1) | bit;                    <span class="comment">// Feedback</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;            }</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;            pattern[<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>] = (<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a> % 188) ? out : 0; <span class="comment">// Inhibit on sync bytes</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        }</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    }</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;</div><div class="line"><a name="l01405"></a><span class="lineno"><a class="line" href="../../d9/d3a/structleansdr_1_1derandomizer.html#a2c5b60fdbc97e12c1612dde0b6978ece"> 1405</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d9/d3a/structleansdr_1_1derandomizer.html#a2c5b60fdbc97e12c1612dde0b6978ece">run</a>()</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    {</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.readable() &gt;= 1 &amp;&amp; <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.writable() &gt;= 1)</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;        {</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;            <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> *pin = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.rd()-&gt;data, *pend = pin + SIZE_TSPACKET;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;            <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> *pout = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.wr()-&gt;data;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;            <span class="keywordflow">if</span> (pin[0] == MPEG_SYNC_INV || pin[0] == (MPEG_SYNC_INV ^ MPEG_SYNC_CORRUPTED))</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;            {</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;                <span class="keywordflow">if</span> (pos != pattern)</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;                {</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>-&gt;<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html#aaeb22741e64a6fac0a7bee7c86db63be">debug</a>)</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;                        fprintf(stderr, <span class="stringliteral">&quot;derandomizer: resynchronizing\n&quot;</span>);</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;                    pos = pattern;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;                }</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;            }</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;            <span class="keywordflow">for</span> (; pin &lt; pend; ++pin, ++pout, ++pos)</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;            {</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                *pout = *pin ^ *pos;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;            }</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;            <span class="keywordflow">if</span> (pos == pattern_end)</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;                pos = pattern;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;            <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">in</a>.read(1);</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;            <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> sync = <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.wr()-&gt;data[0];</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;            <span class="keywordflow">if</span> (sync == MPEG_SYNC)</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;            {</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;                <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.written(1);</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;            }</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;            {</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;                <span class="keywordflow">if</span> (sync != (MPEG_SYNC ^ MPEG_SYNC_CORRUPTED))</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>-&gt;<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html#aaeb22741e64a6fac0a7bee7c86db63be">debug</a>)</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;                        fprintf(stderr, <span class="stringliteral">&quot;(%02x)&quot;</span>, sync);</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;                <a class="code" href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">out</a>.wr()-&gt;data[1] |= 0x80; <span class="comment">// Set the Transport Error Indicator bit</span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;                <span class="comment">// We could output corrupted packets here, in case the</span></div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;                <span class="comment">// MPEG decoder can use them somehow.</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;                <span class="comment">//out.written(1);</span></div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;            }</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        }</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    }</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l01453"></a><span class="lineno"><a class="line" href="../../d9/d3a/structleansdr_1_1derandomizer.html#a85bee4789e9ba070982651f3cbeb47b5"> 1453</a></span>&#160;    <a class="code" href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">u8</a> pattern[188 * 8], *pattern_end, *<a class="code" href="../../d9/d3a/structleansdr_1_1derandomizer.html#a85bee4789e9ba070982651f3cbeb47b5">pos</a>;</div><div class="line"><a name="l01454"></a><span class="lineno"><a class="line" href="../../d9/d3a/structleansdr_1_1derandomizer.html#ae7ce86596e0e0ee3546cec7ed52c6c73"> 1454</a></span>&#160;    <a class="code" href="../../d0/d5e/structleansdr_1_1pipereader.html">pipereader&lt;tspacket&gt;</a> <a class="code" href="../../d9/d3a/structleansdr_1_1derandomizer.html#ae7ce86596e0e0ee3546cec7ed52c6c73">in</a>;</div><div class="line"><a name="l01455"></a><span class="lineno"><a class="line" href="../../d9/d3a/structleansdr_1_1derandomizer.html#ae3446f855c937e083a94c34d506cb169"> 1455</a></span>&#160;    <a class="code" href="../../de/d0e/structleansdr_1_1pipewriter.html">pipewriter&lt;tspacket&gt;</a> <a class="code" href="../../d9/d3a/structleansdr_1_1derandomizer.html#ae3446f855c937e083a94c34d506cb169">out</a>;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;};</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="comment">// derandomizer</span></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="comment">// VITERBI DECODING</span></div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="comment">// Supports all code rates and constellations</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="comment">// Simplified metric to support large constellations.</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="comment">// This version implements puncturing by expanding the trellis.</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<span class="comment">// TBD Compare performance vs skipping updates in a 1/2 trellis.</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;</div><div class="line"><a name="l01466"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html"> 1466</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html">viterbi_sync</a> : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a></div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;{</div><div class="line"><a name="l01468"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#adf94b731c55fbc81bdcbbe3566dae857"> 1468</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a31b64e5f39f0a41e2f6c0ee55d776f3a">TS</a>, <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#aa2551244c08827c1316bdd3b4fdb93e5">TCS</a>, <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#adf94b731c55fbc81bdcbbe3566dae857">TUS</a>;</div><div class="line"><a name="l01469"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#ab9d589bafa4f2e3eb16fe9af742a29fd"> 1469</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#ab9d589bafa4f2e3eb16fe9af742a29fd">TBM</a>; <span class="comment">// Only 16 bits per IQ, but several IQ per Viterbi CS</span></div><div class="line"><a name="l01470"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#ab551ee43742c37b4440d2f3e1778c3c5"> 1470</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#ab551ee43742c37b4440d2f3e1778c3c5">TPM</a>;</div><div class="line"><a name="l01471"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#aef4b5c6cc0db5c038fb776e8859d5651"> 1471</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d8/d66/structleansdr_1_1viterbi__dec__interface.html">viterbi_dec_interface&lt;TUS, TCS, TBM, TPM&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#aef4b5c6cc0db5c038fb776e8859d5651">dvb_dec_interface</a>;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <span class="comment">// 1/2: 6 bits of state, 1 bit in, 2 bits out</span></div><div class="line"><a name="l01474"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a07e3d23013986e974a934c270a418777"> 1474</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d6/da6/structleansdr_1_1bitpath.html">bitpath&lt;uint32_t, TUS, 1, 32&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a07e3d23013986e974a934c270a418777">path_12</a>;</div><div class="line"><a name="l01475"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a0591c54df1bcb52a86ec6ea888620d39"> 1475</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../df/da2/structleansdr_1_1trellis.html">trellis&lt;TS, 64, TUS, 2, 4&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a0591c54df1bcb52a86ec6ea888620d39">trellis_12</a>;</div><div class="line"><a name="l01476"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a435617b7f52b5be5b5653c1dc14a230f"> 1476</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d3/dbe/structleansdr_1_1viterbi__dec.html">viterbi_dec&lt;TS, 64, TUS, 2, TCS, 4, TBM, TPM, path_12&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a435617b7f52b5be5b5653c1dc14a230f">dvb_dec_12</a>;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    <span class="comment">// 2/3: 6 bits of state, 2 bits in, 3 bits out</span></div><div class="line"><a name="l01479"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a88dd57f1042b1e3d19dbfcd0c11dfc1b"> 1479</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d6/da6/structleansdr_1_1bitpath.html">bitpath&lt;uint64_t, TUS, 3, 21&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a88dd57f1042b1e3d19dbfcd0c11dfc1b">path_23</a>;</div><div class="line"><a name="l01480"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a344c0562abba8458169d535dfb071e51"> 1480</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../df/da2/structleansdr_1_1trellis.html">trellis&lt;TS, 64, TUS, 4, 8&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a344c0562abba8458169d535dfb071e51">trellis_23</a>;</div><div class="line"><a name="l01481"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a8f59574d831080a6bc8d18fb76d550c7"> 1481</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d3/dbe/structleansdr_1_1viterbi__dec.html">viterbi_dec&lt;TS, 64, TUS, 4, TCS, 8, TBM, TPM, path_23&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a8f59574d831080a6bc8d18fb76d550c7">dvb_dec_23</a>;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <span class="comment">// 4/6: 6 bits of state, 4 bits in, 6 bits out</span></div><div class="line"><a name="l01484"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a53029e0dad2d8c78a436df31ba53af8c"> 1484</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d6/da6/structleansdr_1_1bitpath.html">bitpath&lt;uint64_t, TUS, 4, 16&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a53029e0dad2d8c78a436df31ba53af8c">path_46</a>;</div><div class="line"><a name="l01485"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#afc9f7964edede9c68d7424a0f19d2217"> 1485</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../df/da2/structleansdr_1_1trellis.html">trellis&lt;TS, 64, TUS, 16, 64&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#afc9f7964edede9c68d7424a0f19d2217">trellis_46</a>;</div><div class="line"><a name="l01486"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#ad142a87f7077d206fb20629a11d8e5eb"> 1486</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d3/dbe/structleansdr_1_1viterbi__dec.html">viterbi_dec&lt;TS, 64, TUS, 16, TCS, 64, TBM, TPM, path_46&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#ad142a87f7077d206fb20629a11d8e5eb">dvb_dec_46</a>;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="comment">// 3/4: 6 bits of state, 3 bits in, 4 bits out</span></div><div class="line"><a name="l01489"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a0b64e1427803444199cb9063c945fd3d"> 1489</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d6/da6/structleansdr_1_1bitpath.html">bitpath&lt;uint64_t, TUS, 3, 21&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a0b64e1427803444199cb9063c945fd3d">path_34</a>;</div><div class="line"><a name="l01490"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#aaf8574a325ea30d5c11e3b015ebf2cba"> 1490</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../df/da2/structleansdr_1_1trellis.html">trellis&lt;TS, 64, TUS, 8, 16&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#aaf8574a325ea30d5c11e3b015ebf2cba">trellis_34</a>;</div><div class="line"><a name="l01491"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a6ff300da258791fa676b781ebb484162"> 1491</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d3/dbe/structleansdr_1_1viterbi__dec.html">viterbi_dec&lt;TS, 64, TUS, 8, TCS, 16, TBM, TPM, path_34&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a6ff300da258791fa676b781ebb484162">dvb_dec_34</a>;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <span class="comment">// 4/5: 6 bits of state, 4 bits in, 5 bits out (non-standard)</span></div><div class="line"><a name="l01494"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#af99eaf566aa8ebc5cc16e1406d466102"> 1494</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d6/da6/structleansdr_1_1bitpath.html">bitpath&lt;uint64_t, TUS, 4, 16&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#af99eaf566aa8ebc5cc16e1406d466102">path_45</a>;</div><div class="line"><a name="l01495"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#aa9ae77e235ade265bffc9dc3643aa248"> 1495</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../df/da2/structleansdr_1_1trellis.html">trellis&lt;TS, 64, TUS, 16, 32&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#aa9ae77e235ade265bffc9dc3643aa248">trellis_45</a>;</div><div class="line"><a name="l01496"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#acb90cdaccc8cfed8b0e7689c5355ae9a"> 1496</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d3/dbe/structleansdr_1_1viterbi__dec.html">viterbi_dec&lt;TS, 64, TUS, 16, TCS, 32, TBM, TPM, path_45&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#acb90cdaccc8cfed8b0e7689c5355ae9a">dvb_dec_45</a>;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="comment">// 5/6: 6 bits of state, 5 bits in, 6 bits out</span></div><div class="line"><a name="l01499"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a7e76ae3204279ab5484c235e1f5c8f93"> 1499</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d6/da6/structleansdr_1_1bitpath.html">bitpath&lt;uint64_t, TUS, 5, 12&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a7e76ae3204279ab5484c235e1f5c8f93">path_56</a>;</div><div class="line"><a name="l01500"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a0103a79befe6f3a060915eed57cf8004"> 1500</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../df/da2/structleansdr_1_1trellis.html">trellis&lt;TS, 64, TUS, 32, 64&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a0103a79befe6f3a060915eed57cf8004">trellis_56</a>;</div><div class="line"><a name="l01501"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a8ac2d79ca2180456525edbf47c3820d2"> 1501</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d3/dbe/structleansdr_1_1viterbi__dec.html">viterbi_dec&lt;TS, 64, TUS, 32, TCS, 64, TBM, TPM, path_56&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a8ac2d79ca2180456525edbf47c3820d2">dvb_dec_56</a>;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <span class="comment">// 7/8: 6 bits of state, 7 bits in, 8 bits out</span></div><div class="line"><a name="l01504"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a0e70273d1a28071fd228e7c87863a685"> 1504</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d6/da6/structleansdr_1_1bitpath.html">bitpath&lt;uint64_t, TUS, 7, 9&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a0e70273d1a28071fd228e7c87863a685">path_78</a>;</div><div class="line"><a name="l01505"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#af17d3860040ab0385bc15875dda4c105"> 1505</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../df/da2/structleansdr_1_1trellis.html">trellis&lt;TS, 64, TUS, 128, 256&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#af17d3860040ab0385bc15875dda4c105">trellis_78</a>;</div><div class="line"><a name="l01506"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a66c2b6df93fce99f6560f6f730c844f5"> 1506</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../d3/dbe/structleansdr_1_1viterbi__dec.html">viterbi_dec&lt;TS, 64, TUS, 128, TCS, 256, TBM, TPM, path_78&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a66c2b6df93fce99f6560f6f730c844f5">dvb_dec_78</a>;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l01509"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a043a8b89e2469e97cf674c3817dc98f6"> 1509</a></span>&#160;    <a class="code" href="../../d0/d5e/structleansdr_1_1pipereader.html">pipereader&lt;eucl_ss&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a043a8b89e2469e97cf674c3817dc98f6">in</a>;</div><div class="line"><a name="l01510"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#acf53759c5b2bd2520c1a60b41dfbb56d"> 1510</a></span>&#160;    <a class="code" href="../../de/d0e/structleansdr_1_1pipewriter.html">pipewriter&lt;unsigned char&gt;</a> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#acf53759c5b2bd2520c1a60b41dfbb56d">out</a>;</div><div class="line"><a name="l01511"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a9b17cf7e0d83defcbe8435297dea66b0"> 1511</a></span>&#160;    <a class="code" href="../../d9/d7f/structleansdr_1_1cstln__lut.html">cstln_lut&lt;eucl_ss, 256&gt;</a> *<a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a9b17cf7e0d83defcbe8435297dea66b0">cstln</a>;</div><div class="line"><a name="l01512"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a202118d23de73433ed95ae23c6f0a44d"> 1512</a></span>&#160;    fec_spec *<a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a202118d23de73433ed95ae23c6f0a44d">fec</a>;</div><div class="line"><a name="l01513"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a9c71366ce249b45a3a264a9ccd41d7a9"> 1513</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a9c71366ce249b45a3a264a9ccd41d7a9">bits_per_symbol</a>; <span class="comment">// Bits per IQ symbol (not per coded symbol)</span></div><div class="line"><a name="l01514"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#ae9744b7acad64670526f00c6ea67b7bf"> 1514</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#ae9744b7acad64670526f00c6ea67b7bf">nsyncs</a>;</div><div class="line"><a name="l01515"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a686bd2d5000806808aa4c2d8995277ca"> 1515</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a686bd2d5000806808aa4c2d8995277ca">nshifts</a>;</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div><div class="line"><a name="l01517"></a><span class="lineno"><a class="line" href="../../db/d64/structleansdr_1_1viterbi__sync_1_1sync.html"> 1517</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="../../db/d64/structleansdr_1_1viterbi__sync_1_1sync.html">sync</a></div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    {</div><div class="line"><a name="l01519"></a><span class="lineno"><a class="line" href="../../db/d64/structleansdr_1_1viterbi__sync_1_1sync.html#a2d758a9570ab632c88ce2280ee020e79"> 1519</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="../../db/d64/structleansdr_1_1viterbi__sync_1_1sync.html#a2d758a9570ab632c88ce2280ee020e79">shift</a>;</div><div class="line"><a name="l01520"></a><span class="lineno"><a class="line" href="../../db/d64/structleansdr_1_1viterbi__sync_1_1sync.html#ae66d3f8da42c8eeb3b9239afa0fcabca"> 1520</a></span>&#160;        dvb_dec_interface *<a class="code" href="../../db/d64/structleansdr_1_1viterbi__sync_1_1sync.html#ae66d3f8da42c8eeb3b9239afa0fcabca">dec</a>;</div><div class="line"><a name="l01521"></a><span class="lineno"><a class="line" href="../../db/d64/structleansdr_1_1viterbi__sync_1_1sync.html#a7240a90f01eb1b1fb9f81176df8b71ff"> 1521</a></span>&#160;        TCS *<a class="code" href="../../db/d64/structleansdr_1_1viterbi__sync_1_1sync.html#a7240a90f01eb1b1fb9f81176df8b71ff">map</a>; <span class="comment">// [nsymbols]</span></div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    } * <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>;    <span class="comment">// [nsyncs]</span></div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;</div><div class="line"><a name="l01524"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a6587058b78187baec702daa29c5a4c42"> 1524</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a6587058b78187baec702daa29c5a4c42">current_sync</a>;</div><div class="line"><a name="l01525"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a9b74fdd62f817f9aa326921ecb374664"> 1525</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> chunk_size = 128;</div><div class="line"><a name="l01526"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a4ae935ba0a23c09197848985a4fcf3bb"> 1526</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a4ae935ba0a23c09197848985a4fcf3bb">resync_phase</a>;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l01529"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#ab786c4ee701a2d0528d7553d684011f8"> 1529</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#ab786c4ee701a2d0528d7553d684011f8">resync_period</a>;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;</div><div class="line"><a name="l01531"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#aa7dd447d8bc425a334cb237590a83210"> 1531</a></span>&#160;    <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#aa7dd447d8bc425a334cb237590a83210">viterbi_sync</a>(<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html">scheduler</a> *<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>,</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;                 <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;eucl_ss&gt;</a> &amp;_in,</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;                 <a class="code" href="../../d2/d45/structleansdr_1_1pipebuf.html">pipebuf&lt;unsigned char&gt;</a> &amp;_out,</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                 <a class="code" href="../../d9/d7f/structleansdr_1_1cstln__lut.html">cstln_lut&lt;eucl_ss, 256&gt;</a> *_cstln,</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;                 <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2b">code_rate</a> cr) : <a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html">runnable</a>(sch, <span class="stringliteral">&quot;viterbi_sync&quot;</span>),</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                                 in(_in),</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                                 out(_out, chunk_size),</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                                 cstln(_cstln),</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                                 current_sync(0),</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                                 resync_phase(0),</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                                 resync_period(32) <span class="comment">// 1/32 = 9% synchronization overhead TBD</span></div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    {</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;        bits_per_symbol = <a class="code" href="../../d7/d1e/namespaceleansdr.html#a259794d4cd9f9161bf5c90ee58b206b6">log2i</a>(cstln-&gt;<a class="code" href="../../df/d80/structleansdr_1_1cstln__base.html#a512b7fae76353154723afe49890cb4ac">nsymbols</a>);</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        fec = &amp;fec_specs[cr];</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        { <span class="comment">// Sanity check: FEC block size must be a multiple of label size.</span></div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;            <span class="keywordtype">int</span> symbols_per_block = fec-&gt;bits_out / bits_per_symbol;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;            <span class="keywordflow">if</span> (bits_per_symbol * symbols_per_block != fec-&gt;bits_out)</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;                <a class="code" href="../../d7/d1e/namespaceleansdr.html#aa7ac6e394835c089a0a359dbdb72e0b8">fail</a>(<span class="stringliteral">&quot;Code rate not suitable for this constellation&quot;</span>);</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;        }</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;        <span class="keywordtype">int</span> nconj;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;        <span class="keywordflow">switch</span> (cstln-&gt;<a class="code" href="../../df/d80/structleansdr_1_1cstln__base.html#a512b7fae76353154723afe49890cb4ac">nsymbols</a>)</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;        {</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;        <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;            nconj = 1;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;            <span class="keywordflow">break</span>; <span class="comment">// Conjugation is not relevant for BPSK</span></div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;            nconj = 2;</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;        }</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;        <span class="keywordtype">int</span> nrotations;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;        <span class="keywordflow">switch</span> (cstln-&gt;<a class="code" href="../../df/d80/structleansdr_1_1cstln__base.html#a512b7fae76353154723afe49890cb4ac">nsymbols</a>)</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;        {</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;        <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        <span class="keywordflow">case</span> 4:</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;            <span class="comment">// For BPSK and QPSK, 180° rotation is handled as</span></div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;            <span class="comment">// polarity inversion in mpeg_sync.</span></div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;            nrotations = cstln-&gt;<a class="code" href="../../df/d80/structleansdr_1_1cstln__base.html#a0c43d94677dd17941ea9fa697156d321">nrotations</a> / 2;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;            nrotations = cstln-&gt;<a class="code" href="../../df/d80/structleansdr_1_1cstln__base.html#a0c43d94677dd17941ea9fa697156d321">nrotations</a>;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        }</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;        nshifts = fec-&gt;bits_out / bits_per_symbol;</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        nsyncs = nconj * nrotations * nshifts;</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        <span class="comment">// TBD Many HOM constellations are labelled in such a way</span></div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        <span class="comment">// that certain rot/conj combinations are equivalent to</span></div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        <span class="comment">// polarity inversion.  We could reduce nsyncs.</span></div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a> = <span class="keyword">new</span> <a class="code" href="../../db/d64/structleansdr_1_1viterbi__sync_1_1sync.html">sync</a>[nsyncs];</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; nsyncs; ++s)</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        {</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;            <span class="comment">// Bit pattern  [shift|conj|rot]</span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;            <span class="keywordtype">int</span> rot = s % nrotations;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;            <span class="keywordtype">int</span> conj = (s / nrotations) % nconj;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;            <span class="keywordtype">int</span> shift = s / nrotations / nconj;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;            <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[s].shift = shift;</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;            <span class="keywordflow">if</span> (shift) <span class="comment">// Reuse identical map</span></div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;                <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[s].map = <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[conj * nrotations + rot].map;</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;                <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[s].map = init_map(conj,</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;                                        2 * <a class="code" href="../../d0/d2f/dvb_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * rot / cstln-&gt;<a class="code" href="../../df/d80/structleansdr_1_1cstln__base.html#a0c43d94677dd17941ea9fa697156d321">nrotations</a>);</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;sync %3d: conj%d offs%d rot%d/%d map:&quot;</span>,</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;                    s, conj, <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[s].shift, rot, cstln-&gt;<a class="code" href="../../df/d80/structleansdr_1_1cstln__base.html#a0c43d94677dd17941ea9fa697156d321">nrotations</a>);</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;            <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>=0; <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>&lt;cstln-&gt;<a class="code" href="../../df/d80/structleansdr_1_1cstln__base.html#a512b7fae76353154723afe49890cb4ac">nsymbols</a>; ++<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a> )</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot; %2d&quot;</span>, <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[s].map[<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>]);</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;        }</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;        <span class="keywordflow">if</span> (cr == <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2bafefb28fbc382c3aaace561437c2175d0">FEC12</a>)</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        {</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;            trellis_12 *trell = <span class="keyword">new</span> trellis_12();</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;            trell-&gt;<a class="code" href="../../df/da2/structleansdr_1_1trellis.html#ad1dd2aea191e5d51fde101f152c7efa1">init_convolutional</a>(fec-&gt;polys);</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; nsyncs; ++s)</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;                <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[s].dec = <span class="keyword">new</span> dvb_dec_12(trell);</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;        }</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cr == <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2baa690727fd198dbd519e0c4297c0ad340">FEC23</a>)</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;        {</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;            trellis_23 *trell = <span class="keyword">new</span> trellis_23();</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;            trell-&gt;<a class="code" href="../../df/da2/structleansdr_1_1trellis.html#ad1dd2aea191e5d51fde101f152c7efa1">init_convolutional</a>(fec-&gt;polys);</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; nsyncs; ++s)</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;                <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[s].dec = <span class="keyword">new</span> dvb_dec_23(trell);</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;        }</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cr == <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2bac1f654cd167e547979febea95439cd99">FEC46</a>)</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        {</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;            trellis_46 *trell = <span class="keyword">new</span> trellis_46();</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;            trell-&gt;<a class="code" href="../../df/da2/structleansdr_1_1trellis.html#ad1dd2aea191e5d51fde101f152c7efa1">init_convolutional</a>(fec-&gt;polys);</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; nsyncs; ++s)</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;                <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[s].dec = <span class="keyword">new</span> dvb_dec_46(trell);</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        }</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cr == <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2ba69046f3944150aa26eacae39a26bb960">FEC34</a>)</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;        {</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;            trellis_34 *trell = <span class="keyword">new</span> trellis_34();</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;            trell-&gt;<a class="code" href="../../df/da2/structleansdr_1_1trellis.html#ad1dd2aea191e5d51fde101f152c7efa1">init_convolutional</a>(fec-&gt;polys);</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; nsyncs; ++s)</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;                <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[s].dec = <span class="keyword">new</span> dvb_dec_34(trell);</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        }</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cr == <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2babd34833962ab127a97e0717a7dbfa15e">FEC45</a>)</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;        {</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;            trellis_45 *trell = <span class="keyword">new</span> trellis_45();</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;            trell-&gt;<a class="code" href="../../df/da2/structleansdr_1_1trellis.html#ad1dd2aea191e5d51fde101f152c7efa1">init_convolutional</a>(fec-&gt;polys);</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; nsyncs; ++s)</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;                <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[s].dec = <span class="keyword">new</span> dvb_dec_45(trell);</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;        }</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cr == <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2ba82ac441ed55a58a2b9238282c9f3b74b">FEC56</a>)</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;        {</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;            trellis_56 *trell = <span class="keyword">new</span> trellis_56();</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;            trell-&gt;<a class="code" href="../../df/da2/structleansdr_1_1trellis.html#ad1dd2aea191e5d51fde101f152c7efa1">init_convolutional</a>(fec-&gt;polys);</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; nsyncs; ++s)</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;                <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[s].dec = <span class="keyword">new</span> dvb_dec_56(trell);</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;        }</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cr == <a class="code" href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2ba93beb875e9ae351925bb8a66f13a86ee">FEC78</a>)</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;        {</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;            trellis_78 *trell = <span class="keyword">new</span> trellis_78();</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;            trell-&gt;<a class="code" href="../../df/da2/structleansdr_1_1trellis.html#ad1dd2aea191e5d51fde101f152c7efa1">init_convolutional</a>(fec-&gt;polys);</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; nsyncs; ++s)</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;                <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[s].dec = <span class="keyword">new</span> dvb_dec_78(trell);</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;        }</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;        {</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;            <a class="code" href="../../d7/d1e/namespaceleansdr.html#aa7ac6e394835c089a0a359dbdb72e0b8">fail</a>(<span class="stringliteral">&quot;CR not supported&quot;</span>);</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;        }</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    }</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;</div><div class="line"><a name="l01665"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a421feb50b13e40dd340e429ae1b0285d"> 1665</a></span>&#160;    TCS *<a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a421feb50b13e40dd340e429ae1b0285d">init_map</a>(<span class="keywordtype">bool</span> conj, <span class="keywordtype">float</span> angle)</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    {</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;        <span class="comment">// Each constellation has its own pattern for labels.</span></div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;        <span class="comment">// Here we simply tabulate systematically.</span></div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        TCS *map = <span class="keyword">new</span> TCS[cstln-&gt;<a class="code" href="../../df/d80/structleansdr_1_1cstln__base.html#a512b7fae76353154723afe49890cb4ac">nsymbols</a>];</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;        <span class="keywordtype">float</span> ca = cosf(angle), sa = sinf(angle);</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a> = 0; <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a> &lt; cstln-&gt;<a class="code" href="../../df/d80/structleansdr_1_1cstln__base.html#a512b7fae76353154723afe49890cb4ac">nsymbols</a>; ++<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>)</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;        {</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;            <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#ad566f6541e98b74246db1a3a3a85ad49">int8_t</a> I = cstln-&gt;<a class="code" href="../../df/d80/structleansdr_1_1cstln__base.html#aa83e64f60ae56657c0a37b8fde926712">symbols</a>[<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>].<a class="code" href="../../d5/d74/structleansdr_1_1complex.html#ab467907f973b42a094d687a605feeaa5">re</a>;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;            <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#ad566f6541e98b74246db1a3a3a85ad49">int8_t</a> Q = cstln-&gt;<a class="code" href="../../df/d80/structleansdr_1_1cstln__base.html#aa83e64f60ae56657c0a37b8fde926712">symbols</a>[<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>].<a class="code" href="../../d5/d74/structleansdr_1_1complex.html#a748d397bef807f8ffb9261e526d2171a">im</a>;</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;            <span class="keywordflow">if</span> (conj)</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;                Q = -Q;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;            <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#ad566f6541e98b74246db1a3a3a85ad49">int8_t</a> RI = I * ca - Q * sa;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;            <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#ad566f6541e98b74246db1a3a3a85ad49">int8_t</a> RQ = I * sa + Q * ca;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;            <a class="code" href="../../d5/dd7/structleansdr_1_1cstln__lut_1_1result.html">cstln_lut&lt;eucl_ss, 256&gt;::result</a> *pr = cstln-&gt;<a class="code" href="../../d9/d7f/structleansdr_1_1cstln__lut.html#a641b6dee41bcf367dfe99a43f753c73c">lookup</a>(RI, RQ);</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;            map[<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>] = pr-&gt;<a class="code" href="../../d5/dd7/structleansdr_1_1cstln__lut_1_1result.html#aa9cf8141c749eef540dd0ee069a99170">ss</a>.nearest;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;        }</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;        <span class="keywordflow">return</span> map;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    }</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;</div><div class="line"><a name="l01689"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a6a7a4485b8438c31edf37178a2e04034"> 1689</a></span>&#160;    <span class="keyword">inline</span> TUS <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a6a7a4485b8438c31edf37178a2e04034">update_sync</a>(<span class="keywordtype">int</span> s, <a class="code" href="../../d3/d92/structleansdr_1_1eucl__ss.html">eucl_ss</a> *pin, TPM *discr)</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    {</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;        <span class="comment">// Read one FEC ouput block</span></div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        pin += <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[s].shift;</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;        TCS cs = 0;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        TBM cost = 0;</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a> = 0; <a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a> &lt; nshifts; ++<a class="code" href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a>, ++pin)</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        {</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;            cs = (cs &lt;&lt; bits_per_symbol) | <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[s].map[pin-&gt;<a class="code" href="../../d3/d92/structleansdr_1_1eucl__ss.html#ad7c2eb7386828568971b8708af9fc667">nearest</a>];</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;            cost -= pin-&gt;<a class="code" href="../../d3/d92/structleansdr_1_1eucl__ss.html#a4075b8235202362b8dd250b395fbac44">discr2</a>;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;        }</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">syncs</a>[s].dec-&gt;update(cs, cost, discr);</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    }</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;</div><div class="line"><a name="l01705"></a><span class="lineno"><a class="line" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a0ab2602bdf48d711eab9908afd2249ea"> 1705</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a0ab2602bdf48d711eab9908afd2249ea">run</a>()</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    {</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;        <span class="comment">// Number of FEC blocks to fill the bitpath depth.</span></div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        <span class="comment">// Before that we cannot discriminate between synchronizers</span></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        <span class="keywordtype">int</span> discr_delay = 64 / fec-&gt;bits_in;</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;        <span class="comment">// Process [chunk_size] FEC blocks at a time</span></div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        TPM *totaldiscr = <span class="keyword">new</span> TPM[nsyncs];</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;        <span class="keywordflow">while</span> ((<span class="keywordtype">long</span>)in.<a class="code" href="../../d0/d5e/structleansdr_1_1pipereader.html#abf0adc51ae6329757925f4c73040016f">readable</a>() &gt;= nshifts * chunk_size + (nshifts - 1) &amp;&amp; (<span class="keywordtype">long</span>)out.<a class="code" href="../../de/d0e/structleansdr_1_1pipewriter.html#a1e9b3b0c11b8ff961b662b93039d7c8e">writable</a>() * 8 &gt;= fec-&gt;bits_in * chunk_size)</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        {</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; nsyncs; ++s)</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;                totaldiscr[s] = 0;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;            <a class="code" href="../../d8/d3d/rtptypes__win_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> outstream = 0;</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;            <span class="keywordtype">int</span> nout = 0;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;            <a class="code" href="../../d3/d92/structleansdr_1_1eucl__ss.html">eucl_ss</a> *pin = in.<a class="code" href="../../d0/d5e/structleansdr_1_1pipereader.html#a43a7fbc4a52408c19e7a7e4989d2fa20">rd</a>();</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> blocknum = 0; blocknum &lt; chunk_size; ++blocknum, pin += nshifts)</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;            {</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                TPM discr;</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;                TUS result = update_sync(current_sync, pin, &amp;discr);</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;                outstream = (outstream &lt;&lt; fec-&gt;bits_in) | result;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;                nout += fec-&gt;bits_in;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;                <span class="keywordflow">if</span> (blocknum &gt;= discr_delay)</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;                    totaldiscr[current_sync] += discr;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;                <span class="keywordflow">if</span> (!resync_phase)</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;                {</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;                    <span class="comment">// Every [resync_period] chunks, also run the other decoders.</span></div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;                    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; nsyncs; ++s)</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;                    {</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;                        <span class="keywordflow">if</span> (s == current_sync)</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;                            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                        TPM discr;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;                        (void)update_sync(s, pin, &amp;discr);</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;                        <span class="keywordflow">if</span> (blocknum &gt;= discr_delay)</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                            totaldiscr[s] += discr;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;                    }</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;                }</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;                <span class="keywordflow">while</span> (nout &gt;= 8)</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;                {</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;                    out.<a class="code" href="../../de/d0e/structleansdr_1_1pipewriter.html#ad4fbacd588494cd5993e20e54cc735a6">write</a>(outstream &gt;&gt; (nout - 8));</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;                    nout -= 8;</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;                }</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;            } <span class="comment">// chunk_size</span></div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;            in.<a class="code" href="../../d0/d5e/structleansdr_1_1pipereader.html#a4c0c7a1148b2e107ca3559aa548303db">read</a>(chunk_size * nshifts);</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;            <span class="keywordflow">if</span> (nout)</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;                <a class="code" href="../../d7/d1e/namespaceleansdr.html#aa7ac6e394835c089a0a359dbdb72e0b8">fail</a>(<span class="stringliteral">&quot;overlapping out&quot;</span>);</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;            <span class="keywordflow">if</span> (!resync_phase)</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;            {</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;                <span class="comment">// Switch to another decoder ?</span></div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;                <span class="keywordtype">int</span> best = current_sync;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; nsyncs; ++s)</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;                    <span class="keywordflow">if</span> (totaldiscr[s] &gt; totaldiscr[best])</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;                        best = s;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;                <span class="keywordflow">if</span> (best != current_sync)</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;                {</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">sch</a>-&gt;<a class="code" href="../../d4/dd4/structleansdr_1_1scheduler.html#aaeb22741e64a6fac0a7bee7c86db63be">debug</a>)</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;                        fprintf(stderr, <span class="stringliteral">&quot;{%d-&gt;%d}&quot;</span>, current_sync, best);</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                    current_sync = best;</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;                }</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;            }</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;            <span class="keywordflow">if</span> (++resync_phase &gt;= resync_period)</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;                resync_phase = 0;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        }</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        <span class="keyword">delete</span>[] totaldiscr;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    }</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;};</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;<span class="comment">// viterbi_sync</span></div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;} <span class="comment">// namespace leansdr</span></div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;<span class="preprocessor">#endif // LEANSDR_DVB_H</span></div><div class="ttc" id="structleansdr_1_1cstln__lut_1_1result_html_aa9cf8141c749eef540dd0ee069a99170"><div class="ttname"><a href="../../d5/dd7/structleansdr_1_1cstln__lut_1_1result.html#aa9cf8141c749eef540dd0ee069a99170">leansdr::cstln_lut::result::ss</a></div><div class="ttdeci">SOFTSYMB ss</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da2/sdr_8h_source.html#l00684">sdr.h:684</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a60811a9076b3205f45119da968681191"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a60811a9076b3205f45119da968681191">leansdr::deconvol_sync::punct</a></div><div class="ttdeci">uint32_t * punct</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00578">dvb.h:578</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_a2673465a4a326c5653dc32014c5c6bfe"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a2673465a4a326c5653dc32014c5c6bfe">leansdr::mpeg_sync::resync_period</a></div><div class="ttdeci">int resync_period</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00837">dvb.h:837</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a6ff300da258791fa676b781ebb484162"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a6ff300da258791fa676b781ebb484162">leansdr::viterbi_sync::dvb_dec_34</a></div><div class="ttdeci">viterbi_dec&lt; TS, 64, TUS, 8, TCS, 16, TBM, TPM, path_34 &gt; dvb_dec_34</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01491">dvb.h:1491</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_af17d3860040ab0385bc15875dda4c105"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#af17d3860040ab0385bc15875dda4c105">leansdr::viterbi_sync::trellis_78</a></div><div class="ttdeci">trellis&lt; TS, 64, TUS, 128, 256 &gt; trellis_78</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01505">dvb.h:1505</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_1_1sync__t_html_a031885539bcddedf8729fcf602242767"><div class="ttname"><a href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a031885539bcddedf8729fcf602242767">leansdr::deconvol_sync::sync_t::in2</a></div><div class="ttdeci">iq_t in2</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00362">dvb.h:362</a></div></div>
<div class="ttc" id="structleansdr_1_1dvb__deconvol__sync_html_a8264d89e041a11a63c2dd0e8af933993"><div class="ttname"><a href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#a8264d89e041a11a63c2dd0e8af933993">leansdr::dvb_deconvol_sync::resync_phase</a></div><div class="ttdeci">int resync_phase</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00780">dvb.h:780</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_a48696fff15fc1bd3a531371c6be38dba"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a48696fff15fc1bd3a531371c6be38dba">leansdr::mpeg_sync::search_sync</a></div><div class="ttdeci">bool search_sync()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00949">dvb.h:949</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a422d7e5c66005ef4c195baaeed5a2c2ba82ac441ed55a58a2b9238282c9f3b74b"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2ba82ac441ed55a58a2b9238282c9f3b74b">leansdr::FEC56</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00047">dvb.h:47</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a41837a37df55a94cf84d2559c43756db"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a41837a37df55a94cf84d2559c43756db">leansdr::deconvol_sync::response</a></div><div class="ttdeci">iq_t response[maxsbits]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00214">dvb.h:214</a></div></div>
<div class="ttc" id="structleansdr_1_1trellis_html"><div class="ttname"><a href="../../df/da2/structleansdr_1_1trellis.html">leansdr::trellis</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/viterbi_8h_source.html#l00044">viterbi.h:44</a></div></div>
<div class="ttc" id="structleansdr_1_1dvb__convol_html_ada667b96a8b1c44a3e5f6a7f75a99b8a"><div class="ttname"><a href="../../db/d84/structleansdr_1_1dvb__convol.html#ada667b96a8b1c44a3e5f6a7f75a99b8a">leansdr::dvb_convol::hardsymbol</a></div><div class="ttdeci">u8 hardsymbol</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00669">dvb.h:669</a></div></div>
<div class="ttc" id="structleansdr_1_1deinterleaver_html_a1f1d5ef267cc8197eff6d87b4be708e9"><div class="ttname"><a href="../../db/d25/structleansdr_1_1deinterleaver.html#a1f1d5ef267cc8197eff6d87b4be708e9">leansdr::deinterleaver::in</a></div><div class="ttdeci">pipereader&lt; Tbyte &gt; in</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01165">dvb.h:1165</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_a6dfb6c8f0b0d50c207780fdcbfc28fb0"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a6dfb6c8f0b0d50c207780fdcbfc28fb0">leansdr::mpeg_sync::want_syncs</a></div><div class="ttdeci">int want_syncs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00834">dvb.h:834</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a422d7e5c66005ef4c195baaeed5a2c2bac1f654cd167e547979febea95439cd99"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2bac1f654cd167e547979febea95439cd99">leansdr::FEC46</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00045">dvb.h:45</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a422d7e5c66005ef4c195baaeed5a2c2babd34833962ab127a97e0717a7dbfa15e"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2babd34833962ab127a97e0717a7dbfa15e">leansdr::FEC45</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00049">dvb.h:49</a></div></div>
<div class="ttc" id="structleansdr_1_1dvb__deconvol__sync_html"><div class="ttname"><a href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html">leansdr::dvb_deconvol_sync</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00719">dvb.h:719</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_aa9ae77e235ade265bffc9dc3643aa248"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#aa9ae77e235ade265bffc9dc3643aa248">leansdr::viterbi_sync::trellis_45</a></div><div class="ttdeci">trellis&lt; TS, 64, TUS, 16, 32 &gt; trellis_45</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01495">dvb.h:1495</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a0103a79befe6f3a060915eed57cf8004"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a0103a79befe6f3a060915eed57cf8004">leansdr::viterbi_sync::trellis_56</a></div><div class="ttdeci">trellis&lt; TS, 64, TUS, 32, 64 &gt; trellis_56</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01500">dvb.h:1500</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_aab3685ade8d81f1e2636468bb0d2d0ee"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#aab3685ade8d81f1e2636468bb0d2d0ee">leansdr::mpeg_sync::locktime_out</a></div><div class="ttdeci">pipewriter&lt; unsigned long &gt; * locktime_out</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01088">dvb.h:1088</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a0591c54df1bcb52a86ec6ea888620d39"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a0591c54df1bcb52a86ec6ea888620d39">leansdr::viterbi_sync::trellis_12</a></div><div class="ttdeci">trellis&lt; TS, 64, TUS, 2, 4 &gt; trellis_12</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01475">dvb.h:1475</a></div></div>
<div class="ttc" id="structleansdr_1_1interleaver_html_a420693372eeff16932428c865949f37f"><div class="ttname"><a href="../../d1/d15/structleansdr_1_1interleaver.html#a420693372eeff16932428c865949f37f">leansdr::interleaver::out</a></div><div class="ttdeci">pipewriter&lt; u8 &gt; out</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01130">dvb.h:1130</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a259794d4cd9f9161bf5c90ee58b206b6"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a259794d4cd9f9161bf5c90ee58b206b6">leansdr::log2i</a></div><div class="ttdeci">int log2i(uint64_t x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d2d/math_8cpp_source.html#l00048">math.cpp:48</a></div></div>
<div class="ttc" id="namespaceleansdr_html_af29950fe367189db5d340659ca2df170"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#af29950fe367189db5d340659ca2df170">leansdr::make_deconvol_sync_simple</a></div><div class="ttdeci">deconvol_sync_simple * make_deconvol_sync_simple(scheduler *sch, pipebuf&lt; eucl_ss &gt; &amp;_in, pipebuf&lt; u8 &gt; &amp;_out, enum code_rate rate)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d11/dvb_8cpp_source.html#l00006">dvb.cpp:6</a></div></div>
<div class="ttc" id="structleansdr_1_1dvb__convol_html_a6b4e0cd0bc21fb5d55abf8620138d74f"><div class="ttname"><a href="../../db/d84/structleansdr_1_1dvb__convol.html#a6b4e0cd0bc21fb5d55abf8620138d74f">leansdr::dvb_convol::convol</a></div><div class="ttdeci">convol_multipoly&lt; uint16_t, 16 &gt; convol</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00709">dvb.h:709</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_1_1sync__t_html"><div class="ttname"><a href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html">leansdr::deconvol_sync::sync_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00354">dvb.h:354</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_1_1sync_html_a7240a90f01eb1b1fb9f81176df8b71ff"><div class="ttname"><a href="../../db/d64/structleansdr_1_1viterbi__sync_1_1sync.html#a7240a90f01eb1b1fb9f81176df8b71ff">leansdr::viterbi_sync::sync::map</a></div><div class="ttdeci">TCS * map</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01521">dvb.h:1521</a></div></div>
<div class="ttc" id="structleansdr_1_1rs__decoder_html_a3099e1f28f23c0101ae869611f1b470e"><div class="ttname"><a href="../../dd/d35/structleansdr_1_1rs__decoder.html#a3099e1f28f23c0101ae869611f1b470e">leansdr::rs_decoder::rs</a></div><div class="ttdeci">rs_engine rs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01217">dvb.h:1217</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__dec__interface_html"><div class="ttname"><a href="../../d8/d66/structleansdr_1_1viterbi__dec__interface.html">leansdr::viterbi_dec_interface</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/viterbi_8h_source.html#l00125">viterbi.h:125</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_aec5c5742bcbdb39ae2b9dfe54d3106a1"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#aec5c5742bcbdb39ae2b9dfe54d3106a1">leansdr::deconvol_sync::deconvol_sync</a></div><div class="ttdeci">deconvol_sync(scheduler *sch, pipebuf&lt; eucl_ss &gt; &amp;_in, pipebuf&lt; Tbyte &gt; &amp;_out, uint32_t gX, uint32_t gY, uint32_t pX, uint32_t pY)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00117">dvb.h:117</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_adae747ae94590fc00fbfd4fbaf9cc4ea"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#adae747ae94590fc00fbfd4fbaf9cc4ea">leansdr::deconvol_sync::NSYNCS</a></div><div class="ttdeci">static const int NSYNCS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00352">dvb.h:352</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a89a2a66e0698eaf49dcd37f7d6fb9ab2"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a89a2a66e0698eaf49dcd37f7d6fb9ab2">leansdr::deconvol_sync::run</a></div><div class="ttdeci">void run()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00190">dvb.h:190</a></div></div>
<div class="ttc" id="structleansdr_1_1derandomizer_html_a85bee4789e9ba070982651f3cbeb47b5"><div class="ttname"><a href="../../d9/d3a/structleansdr_1_1derandomizer.html#a85bee4789e9ba070982651f3cbeb47b5">leansdr::derandomizer::pos</a></div><div class="ttdeci">u8 * pos</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01453">dvb.h:1453</a></div></div>
<div class="ttc" id="structleansdr_1_1pipereader_html_a43a7fbc4a52408c19e7a7e4989d2fa20"><div class="ttname"><a href="../../d0/d5e/structleansdr_1_1pipereader.html#a43a7fbc4a52408c19e7a7e4989d2fa20">leansdr::pipereader::rd</a></div><div class="ttdeci">T * rd()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d29/framework_8h_source.html#l00362">framework.h:362</a></div></div>
<div class="ttc" id="structleansdr_1_1derandomizer_html"><div class="ttname"><a href="../../d9/d3a/structleansdr_1_1derandomizer.html">leansdr::derandomizer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01371">dvb.h:1371</a></div></div>
<div class="ttc" id="structleansdr_1_1randomizer_html_aca4bdf7c45e1f15ee0d4cbba9f0d58f6"><div class="ttname"><a href="../../d1/d45/structleansdr_1_1randomizer.html#aca4bdf7c45e1f15ee0d4cbba9f0d58f6">leansdr::randomizer::randomizer</a></div><div class="ttdeci">randomizer(scheduler *sch, pipebuf&lt; tspacket &gt; &amp;_in, pipebuf&lt; tspacket &gt; &amp;_out)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01313">dvb.h:1313</a></div></div>
<div class="ttc" id="structleansdr_1_1dvb__deconvol__sync_html_ae9fe259f894faab7b2db2bf08e191771"><div class="ttname"><a href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#ae9fe259f894faab7b2db2bf08e191771">leansdr::dvb_deconvol_sync::in</a></div><div class="ttdeci">pipereader&lt; Tin &gt; in</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00778">dvb.h:778</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_ad35f51462d016b0fb1fa47a22037c46d"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad35f51462d016b0fb1fa47a22037c46d">leansdr::deconvol_sync::conv</a></div><div class="ttdeci">uint32_t * conv</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00577">dvb.h:577</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a422d7e5c66005ef4c195baaeed5a2c2ba69046f3944150aa26eacae39a26bb960"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2ba69046f3944150aa26eacae39a26bb960">leansdr::FEC34</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00046">dvb.h:46</a></div></div>
<div class="ttc" id="structleansdr_1_1rs__encoder_html"><div class="ttname"><a href="../../da/dc5/structleansdr_1_1rs__encoder.html">leansdr::rs_encoder</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01179">dvb.h:1179</a></div></div>
<div class="ttc" id="structleansdr_1_1dvb__deconvol__sync_html_a11989e4f2aaba7842b10c096dcc668a6"><div class="ttname"><a href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#a11989e4f2aaba7842b10c096dcc668a6">leansdr::dvb_deconvol_sync::resync_period</a></div><div class="ttdeci">int resync_period</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00722">dvb.h:722</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a8d89220cf3c82109959ae19ccd4ce70f"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a8d89220cf3c82109959ae19ccd4ce70f">leansdr::deconvol_sync::inverse_convolution</a></div><div class="ttdeci">void inverse_convolution()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00252">dvb.h:252</a></div></div>
<div class="ttc" id="structleansdr_1_1runnable_html"><div class="ttname"><a href="../../dc/dbb/structleansdr_1_1runnable.html">leansdr::runnable</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d29/framework_8h_source.html#l00191">framework.h:191</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a07e3d23013986e974a934c270a418777"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a07e3d23013986e974a934c270a418777">leansdr::viterbi_sync::path_12</a></div><div class="ttdeci">bitpath&lt; uint32_t, TUS, 1, 32 &gt; path_12</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01474">dvb.h:1474</a></div></div>
<div class="ttc" id="structleansdr_1_1pipebuf_html"><div class="ttname"><a href="../../d2/d45/structleansdr_1_1pipebuf.html">leansdr::pipebuf</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d29/framework_8h_source.html#l00203">framework.h:203</a></div></div>
<div class="ttc" id="structleansdr_1_1rs__encoder_html_a12102a9bc60ab419f8b3b02abc644cec"><div class="ttname"><a href="../../da/dc5/structleansdr_1_1rs__encoder.html#a12102a9bc60ab419f8b3b02abc644cec">leansdr::rs_encoder::rs_encoder</a></div><div class="ttdeci">rs_encoder(scheduler *sch, pipebuf&lt; tspacket &gt; &amp;_in, pipebuf&lt; rspacket&lt; u8 &gt;&gt; &amp;_out)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01181">dvb.h:1181</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a40514bf82d4434c6463dd58e28f9c9af"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a40514bf82d4434c6463dd58e28f9c9af">leansdr::deconvol_sync::punctperiod</a></div><div class="ttdeci">int punctperiod</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00579">dvb.h:579</a></div></div>
<div class="ttc" id="structleansdr_1_1dvb__convol_html_a71f988c35ccca671b4752a08a4c03923"><div class="ttname"><a href="../../db/d84/structleansdr_1_1dvb__convol.html#a71f988c35ccca671b4752a08a4c03923">leansdr::dvb_convol::run</a></div><div class="ttdeci">void run()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00694">dvb.h:694</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a422d7e5c66005ef4c195baaeed5a2c2baad3ee196ceeca6fe0cdf5f5ae893f23d"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2baad3ee196ceeca6fe0cdf5f5ae893f23d">leansdr::FEC14</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00052">dvb.h:52</a></div></div>
<div class="ttc" id="structleansdr_1_1rspacket_html_a54e5a92a51fb89cbc364818ff2b22ba4"><div class="ttname"><a href="../../d7/d15/structleansdr_1_1rspacket.html#a54e5a92a51fb89cbc364818ff2b22ba4">leansdr::rspacket::data</a></div><div class="ttdeci">Tbyte data[SIZE_RSPACKET]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01095">dvb.h:1095</a></div></div>
<div class="ttc" id="structleansdr_1_1rs__decoder_html_a4bccae476692c02f81ef06c1d5e86317"><div class="ttname"><a href="../../dd/d35/structleansdr_1_1rs__decoder.html#a4bccae476692c02f81ef06c1d5e86317">leansdr::rs_decoder::rs_decoder</a></div><div class="ttdeci">rs_decoder(scheduler *sch, pipebuf&lt; rspacket&lt; Tbyte &gt;&gt; &amp;_in, pipebuf&lt; tspacket &gt; &amp;_out, pipebuf&lt; int &gt; *_bitcount=NULL, pipebuf&lt; int &gt; *_errcount=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01219">dvb.h:1219</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html">leansdr::viterbi_sync</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01466">dvb.h:1466</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_ab786c4ee701a2d0528d7553d684011f8"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#ab786c4ee701a2d0528d7553d684011f8">leansdr::viterbi_sync::resync_period</a></div><div class="ttdeci">int resync_period</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01529">dvb.h:1529</a></div></div>
<div class="ttc" id="structleansdr_1_1dvb__convol_html_a0fdf28871e197328970168d8199f56c2"><div class="ttname"><a href="../../db/d84/structleansdr_1_1dvb__convol.html#a0fdf28871e197328970168d8199f56c2">leansdr::dvb_convol::uncoded_byte</a></div><div class="ttdeci">u8 uncoded_byte</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00668">dvb.h:668</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a77759874d3693553770cd69c0e97de94"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a77759874d3693553770cd69c0e97de94">leansdr::deconvol_sync::fastlock</a></div><div class="ttdeci">bool fastlock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00210">dvb.h:210</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a6587058b78187baec702daa29c5a4c42"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a6587058b78187baec702daa29c5a4c42">leansdr::viterbi_sync::current_sync</a></div><div class="ttdeci">int current_sync</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01524">dvb.h:1524</a></div></div>
<div class="ttc" id="structleansdr_1_1dvb__deconvol__sync_1_1sync__t_html_a98ac3ecbc741dec2a254d39e70ef2314"><div class="ttname"><a href="../../d4/d3a/structleansdr_1_1dvb__deconvol__sync_1_1sync__t.html#a98ac3ecbc741dec2a254d39e70ef2314">leansdr::dvb_deconvol_sync::sync_t::deconv</a></div><div class="ttdeci">deconvol_poly2&lt; Tin, uint32_t, uint64_t, 0x3ba, 0x38f70 &gt; deconv</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00786">dvb.h:786</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a8aa895177863f050cfa3d68d3a2122b6"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a8aa895177863f050cfa3d68d3a2122b6">leansdr::deconvol_sync::readerrors</a></div><div class="ttdeci">unsigned long readerrors(sync_t *s, eucl_ss *&amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00466">dvb.h:466</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a783fc57e030d418f53acd38e1f5e0545"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a783fc57e030d418f53acd38e1f5e0545">leansdr::deconvol_sync::traceback</a></div><div class="ttdeci">static const int traceback</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00217">dvb.h:217</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a422d7e5c66005ef4c195baaeed5a2c2bafefb28fbc382c3aaace561437c2175d0"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2bafefb28fbc382c3aaace561437c2175d0">leansdr::FEC12</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00043">dvb.h:43</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_a3c9ba4ade51e6b62184f6b4915c18866"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a3c9ba4ade51e6b62184f6b4915c18866">leansdr::mpeg_sync::locktime</a></div><div class="ttdeci">unsigned long locktime</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01086">dvb.h:1086</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a3ad99478a5684ee56d79d72c6f593104"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3ad99478a5684ee56d79d72c6f593104">leansdr::deconvol_sync::out</a></div><div class="ttdeci">pipewriter&lt; Tbyte &gt; out</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00574">dvb.h:574</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a4fe7de6a5551e285d2244bfe230e1a70"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a4fe7de6a5551e285d2244bfe230e1a70">leansdr::u8</a></div><div class="ttdeci">unsigned char u8</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d29/framework_8h_source.html#l00453">framework.h:453</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a0af97560854a69f798f4b50f9dc29582"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a0af97560854a69f798f4b50f9dc29582">leansdr::deconvol_sync::maxsbits</a></div><div class="ttdeci">static const int maxsbits</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00213">dvb.h:213</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_a3f700159c7b14218475ee7a484f8c75a"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a3f700159c7b14218475ee7a484f8c75a">leansdr::mpeg_sync::run_decoding</a></div><div class="ttdeci">void run_decoding()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01028">dvb.h:1028</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_abe91d9cce4bbf77e3368b4af65b56e91"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#abe91d9cce4bbf77e3368b4af65b56e91">leansdr::deconvol_sync::deconv2</a></div><div class="ttdeci">iq_t * deconv2</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00581">dvb.h:581</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a53029e0dad2d8c78a436df31ba53af8c"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a53029e0dad2d8c78a436df31ba53af8c">leansdr::viterbi_sync::path_46</a></div><div class="ttdeci">bitpath&lt; uint64_t, TUS, 4, 16 &gt; path_46</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01484">dvb.h:1484</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_a7f7c7d9d997e601e0060a0932127ebd6"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a7f7c7d9d997e601e0060a0932127ebd6">leansdr::mpeg_sync::polarity</a></div><div class="ttdeci">unsigned char polarity</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01079">dvb.h:1079</a></div></div>
<div class="ttc" id="structleansdr_1_1dvb__convol_html_a2d8fc8f507f8765be6159a100ff0c68b"><div class="ttname"><a href="../../db/d84/structleansdr_1_1dvb__convol.html#a2d8fc8f507f8765be6159a100ff0c68b">leansdr::dvb_convol::in</a></div><div class="ttdeci">pipereader&lt; uncoded_byte &gt; in</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00707">dvb.h:707</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_ab9d589bafa4f2e3eb16fe9af742a29fd"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#ab9d589bafa4f2e3eb16fe9af742a29fd">leansdr::viterbi_sync::TBM</a></div><div class="ttdeci">int32_t TBM</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01469">dvb.h:1469</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_acb90cdaccc8cfed8b0e7689c5355ae9a"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#acb90cdaccc8cfed8b0e7689c5355ae9a">leansdr::viterbi_sync::dvb_dec_45</a></div><div class="ttdeci">viterbi_dec&lt; TS, 64, TUS, 16, TCS, 32, TBM, TPM, path_45 &gt; dvb_dec_45</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01496">dvb.h:1496</a></div></div>
<div class="ttc" id="structleansdr_1_1complex_html_a748d397bef807f8ffb9261e526d2171a"><div class="ttname"><a href="../../d5/d74/structleansdr_1_1complex.html#a748d397bef807f8ffb9261e526d2171a">leansdr::complex::im</a></div><div class="ttdeci">T im</div><div class="ttdef"><b>Definition:</b> <a href="../../df/db1/math_8h_source.html#l00033">math.h:33</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html">leansdr::mpeg_sync</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00832">dvb.h:832</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_ae4b3b5579ef4267e502649d83f209366"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ae4b3b5579ef4267e502649d83f209366">leansdr::deconvol_sync::in</a></div><div class="ttdeci">pipereader&lt; eucl_ss &gt; in</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00573">dvb.h:573</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a6a3cfa2d5e77f922cc428a0533b3bb3e"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a6a3cfa2d5e77f922cc428a0533b3bb3e">leansdr::deconvol_sync::signal_t</a></div><div class="ttdeci">uint64_t signal_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00157">dvb.h:157</a></div></div>
<div class="ttc" id="structleansdr_1_1derandomizer_html_ae7ce86596e0e0ee3546cec7ed52c6c73"><div class="ttname"><a href="../../d9/d3a/structleansdr_1_1derandomizer.html#ae7ce86596e0e0ee3546cec7ed52c6c73">leansdr::derandomizer::in</a></div><div class="ttdeci">pipereader&lt; tspacket &gt; in</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01454">dvb.h:1454</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__poly2_html"><div class="ttname"><a href="../../d1/d0a/structleansdr_1_1deconvol__poly2.html">leansdr::deconvol_poly2&lt; Tin, uint32_t, uint64_t, 0x3ba, 0x38f70 &gt;</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_1_1sync__t_html_a815a770b3c1d8b079a7e2e2f23df0c04"><div class="ttname"><a href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a815a770b3c1d8b079a7e2e2f23df0c04">leansdr::deconvol_sync::sync_t::lut</a></div><div class="ttdeci">u8 lut[2][2]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00356">dvb.h:356</a></div></div>
<div class="ttc" id="viterbi_8h_html"><div class="ttname"><a href="../../d7/db7/viterbi_8h.html">viterbi.h</a></div></div>
<div class="ttc" id="structleansdr_1_1interleaver_html_aeff7e4c2dbed4bbb7dd9a08f68796d7f"><div class="ttname"><a href="../../d1/d15/structleansdr_1_1interleaver.html#aeff7e4c2dbed4bbb7dd9a08f68796d7f">leansdr::interleaver::run</a></div><div class="ttdeci">void run()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01110">dvb.h:1110</a></div></div>
<div class="ttc" id="structleansdr_1_1derandomizer_html_a1a9d97f8c9e030fb9b2ae5cb64628b40"><div class="ttname"><a href="../../d9/d3a/structleansdr_1_1derandomizer.html#a1a9d97f8c9e030fb9b2ae5cb64628b40">leansdr::derandomizer::derandomizer</a></div><div class="ttdeci">derandomizer(scheduler *sch, pipebuf&lt; tspacket &gt; &amp;_in, pipebuf&lt; tspacket &gt; &amp;_out)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01373">dvb.h:1373</a></div></div>
<div class="ttc" id="structleansdr_1_1cstln__base_html_a512b7fae76353154723afe49890cb4ac"><div class="ttname"><a href="../../df/d80/structleansdr_1_1cstln__base.html#a512b7fae76353154723afe49890cb4ac">leansdr::cstln_base::nsymbols</a></div><div class="ttdeci">int nsymbols</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da2/sdr_8h_source.html#l00479">sdr.h:479</a></div></div>
<div class="ttc" id="structleansdr_1_1randomizer_html_a8d2b66fb6c3481997ad63c2172856a18"><div class="ttname"><a href="../../d1/d45/structleansdr_1_1randomizer.html#a8d2b66fb6c3481997ad63c2172856a18">leansdr::randomizer::run</a></div><div class="ttdeci">void run()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01345">dvb.h:1345</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_a364b2edc6f86f8761676bcd374c17366"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a364b2edc6f86f8761676bcd374c17366">leansdr::mpeg_sync::run_searching_fast</a></div><div class="ttdeci">void run_searching_fast()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00924">dvb.h:924</a></div></div>
<div class="ttc" id="structleansdr_1_1eucl__ss_html_a4075b8235202362b8dd250b395fbac44"><div class="ttname"><a href="../../d3/d92/structleansdr_1_1eucl__ss.html#a4075b8235202362b8dd250b395fbac44">leansdr::eucl_ss::discr2</a></div><div class="ttdeci">uint16_t discr2</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da2/sdr_8h_source.html#l00435">sdr.h:435</a></div></div>
<div class="ttc" id="structleansdr_1_1cstln__base_html_a0c43d94677dd17941ea9fa697156d321"><div class="ttname"><a href="../../df/d80/structleansdr_1_1cstln__base.html#a0c43d94677dd17941ea9fa697156d321">leansdr::cstln_base::nrotations</a></div><div class="ttdeci">int nrotations</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da2/sdr_8h_source.html#l00480">sdr.h:480</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a7e76ae3204279ab5484c235e1f5c8f93"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a7e76ae3204279ab5484c235e1f5c8f93">leansdr::viterbi_sync::path_56</a></div><div class="ttdeci">bitpath&lt; uint64_t, TUS, 5, 12 &gt; path_56</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01499">dvb.h:1499</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_1_1sync__t_html_aa6de17c2fc900ebfa1935d7f86096c38"><div class="ttname"><a href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#aa6de17c2fc900ebfa1935d7f86096c38">leansdr::deconvol_sync::sync_t::n_out2</a></div><div class="ttdeci">int n_out2</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00363">dvb.h:363</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a3afe578114ae6a586e5a10ae916e1c71"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a3afe578114ae6a586e5a10ae916e1c71">leansdr::hamming_weight</a></div><div class="ttdeci">int hamming_weight(uint8_t x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d2d/math_8cpp_source.html#l00006">math.cpp:6</a></div></div>
<div class="ttc" id="structleansdr_1_1rs__decoder_html_ae64fc52f5e532eec8125593d4d8cae04"><div class="ttname"><a href="../../dd/d35/structleansdr_1_1rs__decoder.html#ae64fc52f5e532eec8125593d4d8cae04">leansdr::rs_decoder::errcount</a></div><div class="ttdeci">pipewriter&lt; int &gt; * errcount</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01305">dvb.h:1305</a></div></div>
<div class="ttc" id="structleansdr_1_1rs__engine_html_ad228e9e202a6d1b1c1c3c73191671732"><div class="ttname"><a href="../../d3/d15/structleansdr_1_1rs__engine.html#ad228e9e202a6d1b1c1c3c73191671732">leansdr::rs_engine::correct</a></div><div class="ttdeci">bool correct(u8 synd[16], u8 pout[188], u8 pin[204]=NULL, int *bits_corrected=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de1/rs_8h_source.html#l00201">rs.h:201</a></div></div>
<div class="ttc" id="rs_8h_html"><div class="ttname"><a href="../../dc/de1/rs_8h.html">rs.h</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a6344ef8b82fa1aac82d9a0fba72f439f"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a6344ef8b82fa1aac82d9a0fba72f439f">leansdr::deconvol_sync::solve_rec</a></div><div class="ttdeci">void solve_rec(iq_t prefix, unsigned int nprefix, signal_t exp, iq_t *best)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00219">dvb.h:219</a></div></div>
<div class="ttc" id="structleansdr_1_1dvb__deconvol__sync_1_1sync__t_html"><div class="ttname"><a href="../../d4/d3a/structleansdr_1_1dvb__deconvol__sync_1_1sync__t.html">leansdr::dvb_deconvol_sync::sync_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00784">dvb.h:784</a></div></div>
<div class="ttc" id="fixed_8h_html_a47ff3dd3b526d335b62ee3e1d4f175d3"><div class="ttname"><a href="../../dd/d58/fixed_8h.html#a47ff3dd3b526d335b62ee3e1d4f175d3">exp</a></div><div class="ttdeci">Fixed&lt; IntType, IntBits &gt; exp(Fixed&lt; IntType, IntBits &gt; const &amp;x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d58/fixed_8h_source.html#l02289">fixed.h:2289</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a8f59574d831080a6bc8d18fb76d550c7"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a8f59574d831080a6bc8d18fb76d550c7">leansdr::viterbi_sync::dvb_dec_23</a></div><div class="ttdeci">viterbi_dec&lt; TS, 64, TUS, 4, TCS, 8, TBM, TPM, path_23 &gt; dvb_dec_23</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01481">dvb.h:1481</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a421feb50b13e40dd340e429ae1b0285d"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a421feb50b13e40dd340e429ae1b0285d">leansdr::viterbi_sync::init_map</a></div><div class="ttdeci">TCS * init_map(bool conj, float angle)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01665">dvb.h:1665</a></div></div>
<div class="ttc" id="structleansdr_1_1pipewriter_html_a1e9b3b0c11b8ff961b662b93039d7c8e"><div class="ttname"><a href="../../de/d0e/structleansdr_1_1pipewriter.html#a1e9b3b0c11b8ff961b662b93039d7c8e">leansdr::pipewriter::writable</a></div><div class="ttdeci">long writable()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d29/framework_8h_source.html#l00296">framework.h:296</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_aa7dd447d8bc425a334cb237590a83210"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#aa7dd447d8bc425a334cb237590a83210">leansdr::viterbi_sync::viterbi_sync</a></div><div class="ttdeci">viterbi_sync(scheduler *sch, pipebuf&lt; eucl_ss &gt; &amp;_in, pipebuf&lt; unsigned char &gt; &amp;_out, cstln_lut&lt; eucl_ss, 256 &gt; *_cstln, code_rate cr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01531">dvb.h:1531</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_1_1sync__t_html_aa115f39d2de8129a45c8361dd2a7c6e2"><div class="ttname"><a href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#aa115f39d2de8129a45c8361dd2a7c6e2">leansdr::deconvol_sync::sync_t::n_out</a></div><div class="ttdeci">int n_out</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00360">dvb.h:360</a></div></div>
<div class="ttc" id="rtptypes__win_8h_html_a435d1572bf3f880d55459d9805097f62"><div class="ttname"><a href="../../d8/d3d/rtptypes__win_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></div><div class="ttdeci">unsigned int uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3d/rtptypes__win_8h_source.html#l00046">rtptypes_win.h:46</a></div></div>
<div class="ttc" id="structleansdr_1_1randomizer_html_a6a61f99cff4d4a5d10f184c120b37747"><div class="ttname"><a href="../../d1/d45/structleansdr_1_1randomizer.html#a6a61f99cff4d4a5d10f184c120b37747">leansdr::randomizer::pos</a></div><div class="ttdeci">u8 * pos</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01363">dvb.h:1363</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_1_1sync__t_html_a0b7d7e44fd45da6e84123ecd1bed0099"><div class="ttname"><a href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0b7d7e44fd45da6e84123ecd1bed0099">leansdr::deconvol_sync::sync_t::n_in2</a></div><div class="ttdeci">int n_in2</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00363">dvb.h:363</a></div></div>
<div class="ttc" id="structleansdr_1_1deinterleaver_html_aefd4157a324d6aaccf2eb65c2710de5a"><div class="ttname"><a href="../../db/d25/structleansdr_1_1deinterleaver.html#aefd4157a324d6aaccf2eb65c2710de5a">leansdr::deinterleaver::run</a></div><div class="ttdeci">void run()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01147">dvb.h:1147</a></div></div>
<div class="ttc" id="structleansdr_1_1interleaver_html_a8d02b4cc0e1ea47cb02ba35c0df29f77"><div class="ttname"><a href="../../d1/d15/structleansdr_1_1interleaver.html#a8d02b4cc0e1ea47cb02ba35c0df29f77">leansdr::interleaver::in</a></div><div class="ttdeci">pipereader&lt; rspacket&lt; u8 &gt; &gt; in</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01129">dvb.h:1129</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a4d7cea3418fa6a37e6d96757a609aa2c"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a4d7cea3418fa6a37e6d96757a609aa2c">leansdr::deconvol_sync::run_decoding</a></div><div class="ttdeci">void run_decoding()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00500">dvb.h:500</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a422d7e5c66005ef4c195baaeed5a2c2b"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2b">leansdr::code_rate</a></div><div class="ttdeci">code_rate</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00041">dvb.h:41</a></div></div>
<div class="ttc" id="structleansdr_1_1cstln__lut_html"><div class="ttname"><a href="../../d9/d7f/structleansdr_1_1cstln__lut.html">leansdr::cstln_lut</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da2/sdr_8h_source.html#l00485">sdr.h:485</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_a1846504721cc15375f809290ffd7acb6"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a1846504721cc15375f809290ffd7acb6">leansdr::mpeg_sync::phase8</a></div><div class="ttdeci">int phase8</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01084">dvb.h:1084</a></div></div>
<div class="ttc" id="structleansdr_1_1tspacket_html"><div class="ttname"><a href="../../d7/d0a/structleansdr_1_1tspacket.html">leansdr::tspacket</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01171">dvb.h:1171</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a75f1b97fda6be6e9cd20820001eb86cf"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a75f1b97fda6be6e9cd20820001eb86cf">leansdr::deconvol_sync::punctweight</a></div><div class="ttdeci">int punctweight</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00579">dvb.h:579</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_af99eaf566aa8ebc5cc16e1406d466102"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#af99eaf566aa8ebc5cc16e1406d466102">leansdr::viterbi_sync::path_45</a></div><div class="ttdeci">bitpath&lt; uint64_t, TUS, 4, 16 &gt; path_45</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01494">dvb.h:1494</a></div></div>
<div class="ttc" id="structleansdr_1_1pipereader_html_abf0adc51ae6329757925f4c73040016f"><div class="ttname"><a href="../../d0/d5e/structleansdr_1_1pipereader.html#abf0adc51ae6329757925f4c73040016f">leansdr::pipereader::readable</a></div><div class="ttdeci">long readable()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d29/framework_8h_source.html#l00357">framework.h:357</a></div></div>
<div class="ttc" id="structleansdr_1_1eucl__ss_html"><div class="ttname"><a href="../../d3/d92/structleansdr_1_1eucl__ss.html">leansdr::eucl_ss</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da2/sdr_8h_source.html#l00431">sdr.h:431</a></div></div>
<div class="ttc" id="structleansdr_1_1randomizer_html_aee3f77dfb82cc4c2c047d5f93b8e1916"><div class="ttname"><a href="../../d1/d45/structleansdr_1_1randomizer.html#aee3f77dfb82cc4c2c047d5f93b8e1916">leansdr::randomizer::in</a></div><div class="ttdeci">pipereader&lt; tspacket &gt; in</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01364">dvb.h:1364</a></div></div>
<div class="ttc" id="structleansdr_1_1bitpath_html"><div class="ttname"><a href="../../d6/da6/structleansdr_1_1bitpath.html">leansdr::bitpath</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/viterbi_8h_source.html#l00334">viterbi.h:334</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a55412b33a6a0d2de966d262c579ad219"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a55412b33a6a0d2de966d262c579ad219">leansdr::deconvol_sync_simple</a></div><div class="ttdeci">deconvol_sync&lt; u8, 0 &gt; deconvol_sync_simple</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00586">dvb.h:586</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_a7a80dab81a3d99468135852003e2103b"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a7a80dab81a3d99468135852003e2103b">leansdr::mpeg_sync::lock_timeout</a></div><div class="ttdeci">unsigned long lock_timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00835">dvb.h:835</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_ad06e80c81b89f9469808dad0d9fd439c"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#ad06e80c81b89f9469808dad0d9fd439c">leansdr::deconvol_sync::syncs</a></div><div class="ttdeci">struct leansdr::deconvol_sync::sync_t syncs[NSYNCS]</div></div>
<div class="ttc" id="structleansdr_1_1scheduler_html_aaeb22741e64a6fac0a7bee7c86db63be"><div class="ttname"><a href="../../d4/dd4/structleansdr_1_1scheduler.html#aaeb22741e64a6fac0a7bee7c86db63be">leansdr::scheduler::debug</a></div><div class="ttdeci">bool debug</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d29/framework_8h_source.html#l00121">framework.h:121</a></div></div>
<div class="ttc" id="structleansdr_1_1interleaver_html"><div class="ttname"><a href="../../d1/d15/structleansdr_1_1interleaver.html">leansdr::interleaver</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01100">dvb.h:1100</a></div></div>
<div class="ttc" id="structleansdr_1_1cstln__lut_1_1result_html"><div class="ttname"><a href="../../d5/dd7/structleansdr_1_1cstln__lut_1_1result.html">leansdr::cstln_lut::result</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da2/sdr_8h_source.html#l00682">sdr.h:682</a></div></div>
<div class="ttc" id="structleansdr_1_1rs__decoder_html"><div class="ttname"><a href="../../dd/d35/structleansdr_1_1rs__decoder.html">leansdr::rs_decoder</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01215">dvb.h:1215</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a422d7e5c66005ef4c195baaeed5a2c2bae06eaabaa08c8df217ac841692ab2ac7"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2bae06eaabaa08c8df217ac841692ab2ac7">leansdr::FEC13</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00053">dvb.h:53</a></div></div>
<div class="ttc" id="structleansdr_1_1randomizer_html_a89f76d5169ab1832397717d611776b74"><div class="ttname"><a href="../../d1/d45/structleansdr_1_1randomizer.html#a89f76d5169ab1832397717d611776b74">leansdr::randomizer::precompute_pattern</a></div><div class="ttdeci">void precompute_pattern()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01324">dvb.h:1324</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_1_1sync_html_a2d758a9570ab632c88ce2280ee020e79"><div class="ttname"><a href="../../db/d64/structleansdr_1_1viterbi__sync_1_1sync.html#a2d758a9570ab632c88ce2280ee020e79">leansdr::viterbi_sync::sync::shift</a></div><div class="ttdeci">int shift</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01519">dvb.h:1519</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_afc9f7964edede9c68d7424a0f19d2217"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#afc9f7964edede9c68d7424a0f19d2217">leansdr::viterbi_sync::trellis_46</a></div><div class="ttdeci">trellis&lt; TS, 64, TUS, 16, 64 &gt; trellis_46</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01485">dvb.h:1485</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a482bb5a409c2092ed701a479548d20b5"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a482bb5a409c2092ed701a479548d20b5">leansdr::dvb_deconvol_sync_hard</a></div><div class="ttdeci">dvb_deconvol_sync&lt; u8 &gt; dvb_deconvol_sync_hard</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00827">dvb.h:827</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a422d7e5c66005ef4c195baaeed5a2c2bafce630e9456733bc2026e25a2d05fa69"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2bafce630e9456733bc2026e25a2d05fa69">leansdr::FEC910</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00051">dvb.h:51</a></div></div>
<div class="ttc" id="rtptypes__win_8h_html_aba7bc1797add20fe3efdf37ced1182c5"><div class="ttname"><a href="../../d8/d3d/rtptypes__win_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></div><div class="ttdeci">unsigned char uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3d/rtptypes__win_8h_source.html#l00042">rtptypes_win.h:42</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_a8fbaf920a857af03af718c4579e3303f"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a8fbaf920a857af03af718c4579e3303f">leansdr::mpeg_sync::in</a></div><div class="ttdeci">pipereader&lt; Tbyte &gt; in</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01076">dvb.h:1076</a></div></div>
<div class="ttc" id="structleansdr_1_1dvb__convol_html_a3ff097611c6107b2e0edf7032d597821"><div class="ttname"><a href="../../db/d84/structleansdr_1_1dvb__convol.html#a3ff097611c6107b2e0edf7032d597821">leansdr::dvb_convol::out</a></div><div class="ttdeci">pipewriter&lt; hardsymbol &gt; out</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00708">dvb.h:708</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a422d7e5c66005ef4c195baaeed5a2c2bafbc890ded30a355b3e208250a452b588"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2bafbc890ded30a355b3e208250a452b588">leansdr::FEC35</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00055">dvb.h:55</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_adaf308825f03945f90a033b1cda39a2a"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#adaf308825f03945f90a033b1cda39a2a">leansdr::mpeg_sync::out</a></div><div class="ttdeci">pipewriter&lt; Tbyte &gt; out</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01077">dvb.h:1077</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_aaf8574a325ea30d5c11e3b015ebf2cba"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#aaf8574a325ea30d5c11e3b015ebf2cba">leansdr::viterbi_sync::trellis_34</a></div><div class="ttdeci">trellis&lt; TS, 64, TUS, 8, 16 &gt; trellis_34</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01490">dvb.h:1490</a></div></div>
<div class="ttc" id="rtptypes__win_8h_html_a273cf69d639a59973b6019625df33e30"><div class="ttname"><a href="../../d8/d3d/rtptypes__win_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a></div><div class="ttdeci">unsigned short uint16_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3d/rtptypes__win_8h_source.html#l00044">rtptypes_win.h:44</a></div></div>
<div class="ttc" id="structleansdr_1_1rs__decoder_html_afcfa6031620b9a5b511425a73e85cdb2"><div class="ttname"><a href="../../dd/d35/structleansdr_1_1rs__decoder.html#afcfa6031620b9a5b511425a73e85cdb2">leansdr::rs_decoder::in</a></div><div class="ttdeci">pipereader&lt; rspacket&lt; Tbyte &gt; &gt; in</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01303">dvb.h:1303</a></div></div>
<div class="ttc" id="structleansdr_1_1dvb__deconvol__sync_html_af9949c37446713d171d5e892fae2a591"><div class="ttname"><a href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#af9949c37446713d171d5e892fae2a591">leansdr::dvb_deconvol_sync::dvb_deconvol_sync</a></div><div class="ttdeci">dvb_deconvol_sync(scheduler *sch, pipebuf&lt; Tin &gt; &amp;_in, pipebuf&lt; decoded_byte &gt; &amp;_out)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00725">dvb.h:725</a></div></div>
<div class="ttc" id="namespaceleansdr_html_aa7ac6e394835c089a0a359dbdb72e0b8"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#aa7ac6e394835c089a0a359dbdb72e0b8">leansdr::fail</a></div><div class="ttdeci">void fail(const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d9d/framework_8cpp_source.html#l00011">framework.cpp:11</a></div></div>
<div class="ttc" id="structleansdr_1_1rspacket_html"><div class="ttname"><a href="../../d7/d15/structleansdr_1_1rspacket.html">leansdr::rspacket</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01093">dvb.h:1093</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_1_1sync__t_html_ab1700a6f9566d105575e0edba91167fa"><div class="ttname"><a href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#ab1700a6f9566d105575e0edba91167fa">leansdr::deconvol_sync::sync_t::out</a></div><div class="ttdeci">signal_t out</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00359">dvb.h:359</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_1_1sync__t_html_a6ff8808d9f32b232774cf0f7ca66c5de"><div class="ttname"><a href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a6ff8808d9f32b232774cf0f7ca66c5de">leansdr::deconvol_sync::sync_t::n_in</a></div><div class="ttdeci">int n_in</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00358">dvb.h:358</a></div></div>
<div class="ttc" id="convolutional_8h_html"><div class="ttname"><a href="../../d8/da5/convolutional_8h.html">convolutional.h</a></div></div>
<div class="ttc" id="structleansdr_1_1cstln__lut_html_a641b6dee41bcf367dfe99a43f753c73c"><div class="ttname"><a href="../../d9/d7f/structleansdr_1_1cstln__lut.html#a641b6dee41bcf367dfe99a43f753c73c">leansdr::cstln_lut::lookup</a></div><div class="ttdeci">result * lookup(float I, float Q)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da2/sdr_8h_source.html#l00689">sdr.h:689</a></div></div>
<div class="ttc" id="structleansdr_1_1dvb__deconvol__sync_html_a628033bdc57f14fb13c6b9cbb17f62ec"><div class="ttname"><a href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#a628033bdc57f14fb13c6b9cbb17f62ec">leansdr::dvb_deconvol_sync::decoded_byte</a></div><div class="ttdeci">u8 decoded_byte</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00721">dvb.h:721</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a9c71366ce249b45a3a264a9ccd41d7a9"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a9c71366ce249b45a3a264a9ccd41d7a9">leansdr::viterbi_sync::bits_per_symbol</a></div><div class="ttdeci">int bits_per_symbol</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01513">dvb.h:1513</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a435617b7f52b5be5b5653c1dc14a230f"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a435617b7f52b5be5b5653c1dc14a230f">leansdr::viterbi_sync::dvb_dec_12</a></div><div class="ttdeci">viterbi_dec&lt; TS, 64, TUS, 2, TCS, 4, TBM, TPM, path_12 &gt; dvb_dec_12</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01476">dvb.h:1476</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_af3f22cc5e8bf95664147a354b18abbe2"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#af3f22cc5e8bf95664147a354b18abbe2">leansdr::deconvol_sync::log2</a></div><div class="ttdeci">static int log2(uint64_t x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00160">dvb.h:160</a></div></div>
<div class="ttc" id="decimators_8h_html_a38832fab42830736aeebf02e971a4959"><div class="ttname"><a href="../../d6/d6f/decimators_8h.html#a38832fab42830736aeebf02e971a4959">i</a></div><div class="ttdeci">int32_t i</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6f/decimators_8h_source.html#l00244">decimators.h:244</a></div></div>
<div class="ttc" id="structleansdr_1_1derandomizer_html_ae3446f855c937e083a94c34d506cb169"><div class="ttname"><a href="../../d9/d3a/structleansdr_1_1derandomizer.html#ae3446f855c937e083a94c34d506cb169">leansdr::derandomizer::out</a></div><div class="ttdeci">pipewriter&lt; tspacket &gt; out</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01455">dvb.h:1455</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a3722751038c3f0d328759615fdd7d7dc"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3722751038c3f0d328759615fdd7d7dc">leansdr::deconvol_sync::locked</a></div><div class="ttdeci">sync_t * locked</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00582">dvb.h:582</a></div></div>
<div class="ttc" id="structleansdr_1_1deinterleaver_html_aa6a63333f08e7da01a65199b1485e664"><div class="ttname"><a href="../../db/d25/structleansdr_1_1deinterleaver.html#aa6a63333f08e7da01a65199b1485e664">leansdr::deinterleaver::out</a></div><div class="ttdeci">pipewriter&lt; rspacket&lt; Tbyte &gt; &gt; out</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01166">dvb.h:1166</a></div></div>
<div class="ttc" id="rtptypes__win_8h_html_ad566f6541e98b74246db1a3a3a85ad49"><div class="ttname"><a href="../../d8/d3d/rtptypes__win_8h.html#ad566f6541e98b74246db1a3a3a85ad49">int8_t</a></div><div class="ttdeci">char int8_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3d/rtptypes__win_8h_source.html#l00041">rtptypes_win.h:41</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a344c0562abba8458169d535dfb071e51"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a344c0562abba8458169d535dfb071e51">leansdr::viterbi_sync::trellis_23</a></div><div class="ttdeci">trellis&lt; TS, 64, TUS, 4, 8 &gt; trellis_23</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01480">dvb.h:1480</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a9188b03bbe86cfbe1df8a51f004c9f65"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a9188b03bbe86cfbe1df8a51f004c9f65">leansdr::deconvol_sync::LATENCY</a></div><div class="ttdeci">static const int LATENCY</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00250">dvb.h:250</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a043a8b89e2469e97cf674c3817dc98f6"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a043a8b89e2469e97cf674c3817dc98f6">leansdr::viterbi_sync::in</a></div><div class="ttdeci">pipereader&lt; eucl_ss &gt; in</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01509">dvb.h:1509</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a4ae935ba0a23c09197848985a4fcf3bb"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a4ae935ba0a23c09197848985a4fcf3bb">leansdr::viterbi_sync::resync_phase</a></div><div class="ttdeci">int resync_phase</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01526">dvb.h:1526</a></div></div>
<div class="ttc" id="rtptypes__win_8h_html_a32f2e37ee053cf2ce8ca28d1f74630e5"><div class="ttname"><a href="../../d8/d3d/rtptypes__win_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a></div><div class="ttdeci">int int32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3d/rtptypes__win_8h_source.html#l00045">rtptypes_win.h:45</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_aa47fef46b6e9074e31e5abd355774940"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#aa47fef46b6e9074e31e5abd355774940">leansdr::deconvol_sync::init_syncs</a></div><div class="ttdeci">void init_syncs()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00366">dvb.h:366</a></div></div>
<div class="ttc" id="structleansdr_1_1deinterleaver_html"><div class="ttname"><a href="../../db/d25/structleansdr_1_1deinterleaver.html">leansdr::deinterleaver</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01137">dvb.h:1137</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__dec_html"><div class="ttname"><a href="../../d3/dbe/structleansdr_1_1viterbi__dec.html">leansdr::viterbi_dec</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/viterbi_8h_source.html#l00136">viterbi.h:136</a></div></div>
<div class="ttc" id="sdr_8h_html"><div class="ttname"><a href="../../d8/da2/sdr_8h.html">sdr.h</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a0e70273d1a28071fd228e7c87863a685"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a0e70273d1a28071fd228e7c87863a685">leansdr::viterbi_sync::path_78</a></div><div class="ttdeci">bitpath&lt; uint64_t, TUS, 7, 9 &gt; path_78</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01504">dvb.h:1504</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_abfcb76c1a7ed45d4f17a613f2885b2ac"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#abfcb76c1a7ed45d4f17a613f2885b2ac">leansdr::mpeg_sync::run_searching</a></div><div class="ttdeci">void run_searching()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00886">dvb.h:886</a></div></div>
<div class="ttc" id="structleansdr_1_1pipewriter_html"><div class="ttname"><a href="../../de/d0e/structleansdr_1_1pipewriter.html">leansdr::pipewriter&lt; Tbyte &gt;</a></div></div>
<div class="ttc" id="dvb_8h_html_ae71449b1cc6e6250b91f539153a7a0d3"><div class="ttname"><a href="../../d0/d2f/dvb_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a></div><div class="ttdeci">#define M_PI</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00028">dvb.h:28</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a9b17cf7e0d83defcbe8435297dea66b0"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a9b17cf7e0d83defcbe8435297dea66b0">leansdr::viterbi_sync::cstln</a></div><div class="ttdeci">cstln_lut&lt; eucl_ss, 256 &gt; * cstln</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01511">dvb.h:1511</a></div></div>
<div class="ttc" id="structleansdr_1_1rs__encoder_html_aa881547b419796028960c43e544fa803"><div class="ttname"><a href="../../da/dc5/structleansdr_1_1rs__encoder.html#aa881547b419796028960c43e544fa803">leansdr::rs_encoder::in</a></div><div class="ttdeci">pipereader&lt; tspacket &gt; in</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01207">dvb.h:1207</a></div></div>
<div class="ttc" id="structleansdr_1_1dvb__convol_html_a0473b32ac897cff8ca3565de5de36c6a"><div class="ttname"><a href="../../db/d84/structleansdr_1_1dvb__convol.html#a0473b32ac897cff8ca3565de5de36c6a">leansdr::dvb_convol::dvb_convol</a></div><div class="ttdeci">dvb_convol(scheduler *sch, pipebuf&lt; uncoded_byte &gt; &amp;_in, pipebuf&lt; hardsymbol &gt; &amp;_out, code_rate fec, int bits_per_symbol)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00671">dvb.h:671</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a686bd2d5000806808aa4c2d8995277ca"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a686bd2d5000806808aa4c2d8995277ca">leansdr::viterbi_sync::nshifts</a></div><div class="ttdeci">int nshifts</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01515">dvb.h:1515</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a8ac2d79ca2180456525edbf47c3820d2"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a8ac2d79ca2180456525edbf47c3820d2">leansdr::viterbi_sync::dvb_dec_56</a></div><div class="ttdeci">viterbi_dec&lt; TS, 64, TUS, 32, TCS, 64, TBM, TPM, path_56 &gt; dvb_dec_56</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01501">dvb.h:1501</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a971e682c38a4a6a8c8ae4ae391e2d768"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a971e682c38a4a6a8c8ae4ae391e2d768">leansdr::deconvol_sync::nG</a></div><div class="ttdeci">int nG</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00576">dvb.h:576</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a202118d23de73433ed95ae23c6f0a44d"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a202118d23de73433ed95ae23c6f0a44d">leansdr::viterbi_sync::fec</a></div><div class="ttdeci">fec_spec * fec</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01512">dvb.h:1512</a></div></div>
<div class="ttc" id="structleansdr_1_1rs__decoder_html_a441055e3a0bf728946622ca72ef91c87"><div class="ttname"><a href="../../dd/d35/structleansdr_1_1rs__decoder.html#a441055e3a0bf728946622ca72ef91c87">leansdr::rs_decoder::run</a></div><div class="ttdeci">void run()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01231">dvb.h:1231</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a3ad09ae7ae55d237e0c8a2d76d3305ed"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a3ad09ae7ae55d237e0c8a2d76d3305ed">leansdr::deconvol_sync::skip</a></div><div class="ttdeci">int skip</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00583">dvb.h:583</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a5558e2bbc9c275755adff422058ada71"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a5558e2bbc9c275755adff422058ada71">leansdr::deconvol_sync::readbyte</a></div><div class="ttdeci">Tbyte readbyte(sync_t *s, eucl_ss *&amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00435">dvb.h:435</a></div></div>
<div class="ttc" id="structleansdr_1_1eucl__ss_html_ad7c2eb7386828568971b8708af9fc667"><div class="ttname"><a href="../../d3/d92/structleansdr_1_1eucl__ss.html#ad7c2eb7386828568971b8708af9fc667">leansdr::eucl_ss::nearest</a></div><div class="ttdeci">uint8_t nearest</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da2/sdr_8h_source.html#l00436">sdr.h:436</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_ad142a87f7077d206fb20629a11d8e5eb"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#ad142a87f7077d206fb20629a11d8e5eb">leansdr::viterbi_sync::dvb_dec_46</a></div><div class="ttdeci">viterbi_dec&lt; TS, 64, TUS, 16, TCS, 64, TBM, TPM, path_46 &gt; dvb_dec_46</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01486">dvb.h:1486</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a7a2b74987519a2fa24b0496c2b5661ba"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a7a2b74987519a2fa24b0496c2b5661ba">leansdr::dvb_deconvol_sync_soft</a></div><div class="ttdeci">dvb_deconvol_sync&lt; eucl_ss &gt; dvb_deconvol_sync_soft</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00826">dvb.h:826</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a66c2b6df93fce99f6560f6f730c844f5"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a66c2b6df93fce99f6560f6f730c844f5">leansdr::viterbi_sync::dvb_dec_78</a></div><div class="ttdeci">viterbi_dec&lt; TS, 64, TUS, 128, TCS, 256, TBM, TPM, path_78 &gt; dvb_dec_78</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01506">dvb.h:1506</a></div></div>
<div class="ttc" id="structleansdr_1_1derandomizer_html_a2c5b60fdbc97e12c1612dde0b6978ece"><div class="ttname"><a href="../../d9/d3a/structleansdr_1_1derandomizer.html#a2c5b60fdbc97e12c1612dde0b6978ece">leansdr::derandomizer::run</a></div><div class="ttdeci">void run()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01405">dvb.h:1405</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_aef4b5c6cc0db5c038fb776e8859d5651"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#aef4b5c6cc0db5c038fb776e8859d5651">leansdr::viterbi_sync::dvb_dec_interface</a></div><div class="ttdeci">viterbi_dec_interface&lt; TUS, TCS, TBM, TPM &gt; dvb_dec_interface</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01471">dvb.h:1471</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_1_1sync_html_ae66d3f8da42c8eeb3b9239afa0fcabca"><div class="ttname"><a href="../../db/d64/structleansdr_1_1viterbi__sync_1_1sync.html#ae66d3f8da42c8eeb3b9239afa0fcabca">leansdr::viterbi_sync::sync::dec</a></div><div class="ttdeci">dvb_dec_interface * dec</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01520">dvb.h:1520</a></div></div>
<div class="ttc" id="structleansdr_1_1rs__encoder_html_a1041f4651964faeae4727f0fae2ce937"><div class="ttname"><a href="../../da/dc5/structleansdr_1_1rs__encoder.html#a1041f4651964faeae4727f0fae2ce937">leansdr::rs_encoder::rs</a></div><div class="ttdeci">rs_engine rs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01206">dvb.h:1206</a></div></div>
<div class="ttc" id="structleansdr_1_1rs__engine_html_a0cba248ddd29dbbe427a43e495a980f5"><div class="ttname"><a href="../../d3/d15/structleansdr_1_1rs__engine.html#a0cba248ddd29dbbe427a43e495a980f5">leansdr::rs_engine::syndromes</a></div><div class="ttdeci">bool syndromes(const u8 *poly, u8 *synd)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de1/rs_8h_source.html#l00132">rs.h:132</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_1_1sync__t_html_a0bcf9fd8169cfd2b8d273c2da5642cd7"><div class="ttname"><a href="../../da/da9/structleansdr_1_1deconvol__sync_1_1sync__t.html#a0bcf9fd8169cfd2b8d273c2da5642cd7">leansdr::deconvol_sync::sync_t::in</a></div><div class="ttdeci">iq_t in</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00357">dvb.h:357</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_aa25096d8e864e0e81f32e5c375d0fd29"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#aa25096d8e864e0e81f32e5c375d0fd29">leansdr::mpeg_sync::bitphase</a></div><div class="ttdeci">int bitphase</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01081">dvb.h:1081</a></div></div>
<div class="ttc" id="structleansdr_1_1convol__multipoly_html"><div class="ttname"><a href="../../d7/df1/structleansdr_1_1convol__multipoly.html">leansdr::convol_multipoly&lt; uint16_t, 16 &gt;</a></div></div>
<div class="ttc" id="structleansdr_1_1dvb__convol_html"><div class="ttname"><a href="../../db/d84/structleansdr_1_1dvb__convol.html">leansdr::dvb_convol</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00666">dvb.h:666</a></div></div>
<div class="ttc" id="structleansdr_1_1derandomizer_html_a4da6a30a41bd1a08425da119c48439c4"><div class="ttname"><a href="../../d9/d3a/structleansdr_1_1derandomizer.html#a4da6a30a41bd1a08425da119c48439c4">leansdr::derandomizer::precompute_pattern</a></div><div class="ttdeci">void precompute_pattern()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01384">dvb.h:1384</a></div></div>
<div class="ttc" id="structleansdr_1_1trellis_html_ad1dd2aea191e5d51fde101f152c7efa1"><div class="ttname"><a href="../../df/da2/structleansdr_1_1trellis.html#ad1dd2aea191e5d51fde101f152c7efa1">leansdr::trellis::init_convolutional</a></div><div class="ttdeci">void init_convolutional(const uint16_t G[])</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db7/viterbi_8h_source.html#l00065">viterbi.h:65</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a88dd57f1042b1e3d19dbfcd0c11dfc1b"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a88dd57f1042b1e3d19dbfcd0c11dfc1b">leansdr::viterbi_sync::path_23</a></div><div class="ttdeci">bitpath&lt; uint64_t, TUS, 3, 21 &gt; path_23</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01479">dvb.h:1479</a></div></div>
<div class="ttc" id="structleansdr_1_1dvb__deconvol__sync_html_a17f47172e96a26fefb344511c0ed93ef"><div class="ttname"><a href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#a17f47172e96a26fefb344511c0ed93ef">leansdr::dvb_deconvol_sync::run</a></div><div class="ttdeci">void run()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00737">dvb.h:737</a></div></div>
<div class="ttc" id="structleansdr_1_1rs__engine_html"><div class="ttname"><a href="../../d3/d15/structleansdr_1_1rs__engine.html">leansdr::rs_engine</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de1/rs_8h_source.html#l00097">rs.h:97</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a422d7e5c66005ef4c195baaeed5a2c2baa690727fd198dbd519e0c4297c0ad340"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2baa690727fd198dbd519e0c4297c0ad340">leansdr::FEC23</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00044">dvb.h:44</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_adf94b731c55fbc81bdcbbe3566dae857"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#adf94b731c55fbc81bdcbbe3566dae857">leansdr::viterbi_sync::TUS</a></div><div class="ttdeci">uint8_t TUS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01468">dvb.h:1468</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_abae8829a14449218b950756ee5612db0"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#abae8829a14449218b950756ee5612db0">leansdr::mpeg_sync::resync_phase</a></div><div class="ttdeci">int resync_phase</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01080">dvb.h:1080</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_ae9744b7acad64670526f00c6ea67b7bf"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#ae9744b7acad64670526f00c6ea67b7bf">leansdr::viterbi_sync::nsyncs</a></div><div class="ttdeci">int nsyncs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01514">dvb.h:1514</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a422d7e5c66005ef4c195baaeed5a2c2ba93beb875e9ae351925bb8a66f13a86ee"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2ba93beb875e9ae351925bb8a66f13a86ee">leansdr::FEC78</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00048">dvb.h:48</a></div></div>
<div class="ttc" id="namespaceleansdr_html"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html">leansdr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dd9/datvconstellation_8h_source.html#l00028">datvconstellation.h:28</a></div></div>
<div class="ttc" id="structleansdr_1_1rs__encoder_html_ac09105707b016771f0d5a05116a50e52"><div class="ttname"><a href="../../da/dc5/structleansdr_1_1rs__encoder.html#ac09105707b016771f0d5a05116a50e52">leansdr::rs_encoder::out</a></div><div class="ttdeci">pipewriter&lt; rspacket&lt; u8 &gt; &gt; out</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01208">dvb.h:1208</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a31b64e5f39f0a41e2f6c0ee55d776f3a"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a31b64e5f39f0a41e2f6c0ee55d776f3a">leansdr::viterbi_sync::TS</a></div><div class="ttdeci">uint8_t TS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01468">dvb.h:1468</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a23cbe621900dd50ab53844646e556301"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a23cbe621900dd50ab53844646e556301">leansdr::parity</a></div><div class="ttdeci">unsigned char parity(uint8_t x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d2d/math_8cpp_source.html#l00027">math.cpp:27</a></div></div>
<div class="ttc" id="structleansdr_1_1runnable_html_a5826f1ee91703a26d29bff05d0269404"><div class="ttname"><a href="../../dc/dbb/structleansdr_1_1runnable.html#a5826f1ee91703a26d29bff05d0269404">leansdr::runnable::sch</a></div><div class="ttdeci">scheduler * sch</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d29/framework_8h_source.html#l00199">framework.h:199</a></div></div>
<div class="ttc" id="structleansdr_1_1scheduler_html_a248d1229f9b48fcb8a8dc206d43d8ba4"><div class="ttname"><a href="../../d4/dd4/structleansdr_1_1scheduler.html#a248d1229f9b48fcb8a8dc206d43d8ba4">leansdr::scheduler::verbose</a></div><div class="ttdeci">bool verbose</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d29/framework_8h_source.html#l00121">framework.h:121</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a73de36a8be9d747f8dd48356e3545188"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a73de36a8be9d747f8dd48356e3545188">leansdr::deconvol_sync::next_sync</a></div><div class="ttdeci">void next_sync()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00195">dvb.h:195</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a422d7e5c66005ef4c195baaeed5a2c2ba165d59b9a758238902bde817a3b622f7"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2ba165d59b9a758238902bde817a3b622f7">leansdr::FEC89</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00050">dvb.h:50</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a42cc80159225266343565b51f53f9fee"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a42cc80159225266343565b51f53f9fee">leansdr::deconvol_sync::iq_t</a></div><div class="ttdeci">uint64_t iq_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00158">dvb.h:158</a></div></div>
<div class="ttc" id="structleansdr_1_1pipewriter_html_ad4fbacd588494cd5993e20e54cc735a6"><div class="ttname"><a href="../../de/d0e/structleansdr_1_1pipewriter.html#ad4fbacd588494cd5993e20e54cc735a6">leansdr::pipewriter::write</a></div><div class="ttdeci">void write(const T &amp;e)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d29/framework_8h_source.html#l00319">framework.h:319</a></div></div>
<div class="ttc" id="structleansdr_1_1cstln__base_html_aa83e64f60ae56657c0a37b8fde926712"><div class="ttname"><a href="../../df/d80/structleansdr_1_1cstln__base.html#aa83e64f60ae56657c0a37b8fde926712">leansdr::cstln_base::symbols</a></div><div class="ttdeci">complex&lt; int8_t &gt; * symbols</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da2/sdr_8h_source.html#l00478">sdr.h:478</a></div></div>
<div class="ttc" id="structleansdr_1_1randomizer_html"><div class="ttname"><a href="../../d1/d45/structleansdr_1_1randomizer.html">leansdr::randomizer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01311">dvb.h:1311</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_a7cada6432412f46be6706e8699ecf718"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a7cada6432412f46be6706e8699ecf718">leansdr::mpeg_sync::lock_timeleft</a></div><div class="ttdeci">unsigned long lock_timeleft</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01085">dvb.h:1085</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_ab551ee43742c37b4440d2f3e1778c3c5"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#ab551ee43742c37b4440d2f3e1778c3c5">leansdr::viterbi_sync::TPM</a></div><div class="ttdeci">int32_t TPM</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01470">dvb.h:1470</a></div></div>
<div class="ttc" id="structleansdr_1_1randomizer_html_ad6401cc6f61c96b684c8891d6e178751"><div class="ttname"><a href="../../d1/d45/structleansdr_1_1randomizer.html#ad6401cc6f61c96b684c8891d6e178751">leansdr::randomizer::out</a></div><div class="ttdeci">pipewriter&lt; tspacket &gt; out</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01365">dvb.h:1365</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_a4c7eb4b7e45b97ef01ca929e60818a8e"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a4c7eb4b7e45b97ef01ca929e60818a8e">leansdr::mpeg_sync::report_state</a></div><div class="ttdeci">bool report_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01089">dvb.h:1089</a></div></div>
<div class="ttc" id="structleansdr_1_1dvb__deconvol__sync_html_a77ea54837a39ef809db7721309ed8f7c"><div class="ttname"><a href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#a77ea54837a39ef809db7721309ed8f7c">leansdr::dvb_deconvol_sync::locked</a></div><div class="ttdeci">sync_t * locked</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00790">dvb.h:790</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_a102bb83134620ec136613ece4721aede"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a102bb83134620ec136613ece4721aede">leansdr::mpeg_sync::next_sync_count</a></div><div class="ttdeci">int next_sync_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01083">dvb.h:1083</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_ae64cf3adf5f30eaeb459a0a2fe503f29"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#ae64cf3adf5f30eaeb459a0a2fe503f29">leansdr::mpeg_sync::run</a></div><div class="ttdeci">void run()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00864">dvb.h:864</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_acf53759c5b2bd2520c1a60b41dfbb56d"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#acf53759c5b2bd2520c1a60b41dfbb56d">leansdr::viterbi_sync::out</a></div><div class="ttdeci">pipewriter&lt; unsigned char &gt; out</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01510">dvb.h:1510</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_a271cf4943dab3cf3065ac8fc68c088f1"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a271cf4943dab3cf3065ac8fc68c088f1">leansdr::mpeg_sync::state_out</a></div><div class="ttdeci">pipewriter&lt; int &gt; * state_out</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01087">dvb.h:1087</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a422d7e5c66005ef4c195baaeed5a2c2baffa7c516f292d5a07e358c4fa8ddac2c"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2baffa7c516f292d5a07e358c4fa8ddac2c">leansdr::FEC_COUNT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00056">dvb.h:56</a></div></div>
<div class="ttc" id="structleansdr_1_1deinterleaver_html_a12b07a452958a9444f2c96eb7a756fc7"><div class="ttname"><a href="../../db/d25/structleansdr_1_1deinterleaver.html#a12b07a452958a9444f2c96eb7a756fc7">leansdr::deinterleaver::deinterleaver</a></div><div class="ttdeci">deinterleaver(scheduler *sch, pipebuf&lt; Tbyte &gt; &amp;_in, pipebuf&lt; rspacket&lt; Tbyte &gt;&gt; &amp;_out)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01139">dvb.h:1139</a></div></div>
<div class="ttc" id="structleansdr_1_1complex_html_ab467907f973b42a094d687a605feeaa5"><div class="ttname"><a href="../../d5/d74/structleansdr_1_1complex.html#ab467907f973b42a094d687a605feeaa5">leansdr::complex::re</a></div><div class="ttdeci">T re</div><div class="ttdef"><b>Definition:</b> <a href="../../df/db1/math_8h_source.html#l00033">math.h:33</a></div></div>
<div class="ttc" id="structleansdr_1_1interleaver_html_a95081286b92cf8ff7ce4583853b4c88a"><div class="ttname"><a href="../../d1/d15/structleansdr_1_1interleaver.html#a95081286b92cf8ff7ce4583853b4c88a">leansdr::interleaver::interleaver</a></div><div class="ttdeci">interleaver(scheduler *sch, pipebuf&lt; rspacket&lt; u8 &gt;&gt; &amp;_in, pipebuf&lt; u8 &gt; &amp;_out)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01102">dvb.h:1102</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_a872d3b632c49405fa341dd96a78f5543"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a872d3b632c49405fa341dd96a78f5543">leansdr::mpeg_sync::fastlock</a></div><div class="ttdeci">bool fastlock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00836">dvb.h:836</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_aa2551244c08827c1316bdd3b4fdb93e5"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#aa2551244c08827c1316bdd3b4fdb93e5">leansdr::viterbi_sync::TCS</a></div><div class="ttdeci">uint8_t TCS</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01468">dvb.h:1468</a></div></div>
<div class="ttc" id="structleansdr_1_1rs__decoder_html_a8e428d7889c4ade17aec0b0fb1552300"><div class="ttname"><a href="../../dd/d35/structleansdr_1_1rs__decoder.html#a8e428d7889c4ade17aec0b0fb1552300">leansdr::rs_decoder::out</a></div><div class="ttdeci">pipewriter&lt; tspacket &gt; out</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01304">dvb.h:1304</a></div></div>
<div class="ttc" id="structleansdr_1_1scheduler_html"><div class="ttname"><a href="../../d4/dd4/structleansdr_1_1scheduler.html">leansdr::scheduler</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d29/framework_8h_source.html#l00114">framework.h:114</a></div></div>
<div class="ttc" id="structleansdr_1_1pipereader_html_a4c0c7a1148b2e107ca3559aa548303db"><div class="ttname"><a href="../../d0/d5e/structleansdr_1_1pipereader.html#a4c0c7a1148b2e107ca3559aa548303db">leansdr::pipereader::read</a></div><div class="ttdeci">void read(unsigned long n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d29/framework_8h_source.html#l00367">framework.h:367</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_1_1sync_html"><div class="ttname"><a href="../../db/d64/structleansdr_1_1viterbi__sync_1_1sync.html">leansdr::viterbi_sync::sync</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01517">dvb.h:1517</a></div></div>
<div class="ttc" id="namespaceleansdr_html_a422d7e5c66005ef4c195baaeed5a2c2bab8d812a27f59c3d1c5c5202228fa56b5"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#a422d7e5c66005ef4c195baaeed5a2c2bab8d812a27f59c3d1c5c5202228fa56b5">leansdr::FEC25</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00054">dvb.h:54</a></div></div>
<div class="ttc" id="structleansdr_1_1dvb__deconvol__sync_html_ab3196ec7d006e7f2649356f040e0a75d"><div class="ttname"><a href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#ab3196ec7d006e7f2649356f040e0a75d">leansdr::dvb_deconvol_sync::init_syncs</a></div><div class="ttdeci">void init_syncs()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00792">dvb.h:792</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a0ab2602bdf48d711eab9908afd2249ea"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a0ab2602bdf48d711eab9908afd2249ea">leansdr::viterbi_sync::run</a></div><div class="ttdeci">void run()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01705">dvb.h:1705</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_a271134f928cc1c71478006480c7bb3a6"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a271134f928cc1c71478006480c7bb3a6">leansdr::mpeg_sync::deconv</a></div><div class="ttdeci">deconvol_sync&lt; Tbyte, 0 &gt; * deconv</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01078">dvb.h:1078</a></div></div>
<div class="ttc" id="structleansdr_1_1dvb__deconvol__sync_html_abc1d464e96267db970b5c4145e3d4611"><div class="ttname"><a href="../../d7/d7a/structleansdr_1_1dvb__deconvol__sync.html#abc1d464e96267db970b5c4145e3d4611">leansdr::dvb_deconvol_sync::out</a></div><div class="ttdeci">pipewriter&lt; decoded_byte &gt; out</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00779">dvb.h:779</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a768f9e3839ea487faa010e27f9ff9c18"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a768f9e3839ea487faa010e27f9ff9c18">leansdr::deconvol_sync::deconv</a></div><div class="ttdeci">iq_t * deconv</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00580">dvb.h:580</a></div></div>
<div class="ttc" id="structleansdr_1_1rs__encoder_html_a1c4651c386f5caf12f34acda3bc7767d"><div class="ttname"><a href="../../da/dc5/structleansdr_1_1rs__encoder.html#a1c4651c386f5caf12f34acda3bc7767d">leansdr::rs_encoder::run</a></div><div class="ttdeci">void run()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01189">dvb.h:1189</a></div></div>
<div class="ttc" id="structleansdr_1_1mpeg__sync_html_a8dad92fb87c0ec045a79fc9d78141de8"><div class="ttname"><a href="../../d9/d97/structleansdr_1_1mpeg__sync.html#a8dad92fb87c0ec045a79fc9d78141de8">leansdr::mpeg_sync::mpeg_sync</a></div><div class="ttdeci">mpeg_sync(scheduler *sch, pipebuf&lt; Tbyte &gt; &amp;_in, pipebuf&lt; Tbyte &gt; &amp;_out, deconvol_sync&lt; Tbyte, 0 &gt; *_deconv, pipebuf&lt; int &gt; *_state_out=NULL, pipebuf&lt; unsigned long &gt; *_locktime_out=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00839">dvb.h:839</a></div></div>
<div class="ttc" id="structleansdr_1_1pipereader_html"><div class="ttname"><a href="../../d0/d5e/structleansdr_1_1pipereader.html">leansdr::pipereader</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d29/framework_8h_source.html#l00348">framework.h:348</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a6a7a4485b8438c31edf37178a2e04034"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a6a7a4485b8438c31edf37178a2e04034">leansdr::viterbi_sync::update_sync</a></div><div class="ttdeci">TUS update_sync(int s, eucl_ss *pin, TPM *discr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01689">dvb.h:1689</a></div></div>
<div class="ttc" id="namespaceleansdr_html_aac6fe833df827732441862452ff6c48d"><div class="ttname"><a href="../../d7/d1e/namespaceleansdr.html#aac6fe833df827732441862452ff6c48d">leansdr::min</a></div><div class="ttdeci">T min(const T &amp;x, const T &amp;y)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d29/framework_8h_source.html#l00440">framework.h:440</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html">leansdr::deconvol_sync</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00115">dvb.h:115</a></div></div>
<div class="ttc" id="rtptypes__win_8h_html_aec6fcb673ff035718c238c8c9d544c47"><div class="ttname"><a href="../../d8/d3d/rtptypes__win_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a></div><div class="ttdeci">unsigned __int64 uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d3d/rtptypes__win_8h_source.html#l00048">rtptypes_win.h:48</a></div></div>
<div class="ttc" id="structleansdr_1_1viterbi__sync_html_a0b64e1427803444199cb9063c945fd3d"><div class="ttname"><a href="../../d6/d7d/structleansdr_1_1viterbi__sync.html#a0b64e1427803444199cb9063c945fd3d">leansdr::viterbi_sync::path_34</a></div><div class="ttdeci">bitpath&lt; uint64_t, TUS, 3, 21 &gt; path_34</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l01489">dvb.h:1489</a></div></div>
<div class="ttc" id="structleansdr_1_1deconvol__sync_html_a705e9e0d663c0fcae87aecfbea157db6"><div class="ttname"><a href="../../d4/d0c/structleansdr_1_1deconvol__sync.html#a705e9e0d663c0fcae87aecfbea157db6">leansdr::deconvol_sync::convolve</a></div><div class="ttdeci">iq_t convolve(signal_t s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d2f/dvb_8h_source.html#l00168">dvb.h:168</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 2 2019 17:56:30 for SDRAngel by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
