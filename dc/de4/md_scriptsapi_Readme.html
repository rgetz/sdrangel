<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SDRAngel: Python scripts interfacing with the API</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../sdrangel_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SDRAngel
   &#160;<span id="projectnumber">4.11.5</span>
   </div>
   <div id="projectbrief">Developer docs for &lt;a href=&quot;https://github.com/f4exb/sdrangel&quot;&gt;SDRangel&lt;\a&gt;, an Open Source Qt5 / OpenGL 3.0+ SDR and signal analyzer frontend to various hardware.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Python scripts interfacing with the API </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>These scripts are designed to work in Python 3 preferably with version 3.6 or higher. Dependencies are installed with pip in a virtual environment. The sequence of operations is the following:</p>
<div class="fragment"><div class="line">virtualenv -p /usr/bin/python3 venv # Create virtual environment</div><div class="line">. ./venv/bin/activate               # Activate virtual environment</div><div class="line">pip install -r requirements.txt     # Install requirements</div></div><!-- fragment --><h2>freqtracking.py</h2>
<p>This script is used to achieve frequency tracking with the <a class="el" href="../../da/d2e/classFreqTracker.html">FreqTracker</a> plugin. Ideally you would start it before connecting the Frequency Tracker plugin in SDRangel. It works continuously (daemon style) until stop via Ctl-C.</p>
<p>Options are:</p>
<ul>
<li><code>-h</code> or <code>--help</code> show help message and exit</li>
<li><code>-A</code> or <code>--address</code> listening address (default <code>0.0.0.0</code>)</li>
<li><code>-P</code> or <code>--port</code> listening port (default <code>8888</code>)</li>
<li><code>-a</code> or <code>--address-sdr</code> SDRangel REST API address (defaults to calling address)</li>
<li><code>-p</code> or <code>--port-sdr</code> SDRangel REST API port (default <code>8091</code>)</li>
</ul>
<p>With default options (no parameters) it will listen on all available interfaces including loopback at <code>127.0.0.1</code> and at port <code>8888</code>. It will identify the SDRangel API address with the first request from SDRangel and connect back at port <code>8091</code>.</p>
<p>Normal sequence of operations:</p>
<ul>
<li>Start <code>freqtracking.py</code> in a terminal</li>
<li>In SDRangel connect the Frequency Tracker plugin by clicking on the grey square at the left of the top bar of the Frequency Tracker GUI. It opens the channel settings dialog. Check the 'Reverse API' box. Next to this box is the address and port at which the channel will be connected. If you use the defaults for <code>freqtracking.py</code> you may leave it as it is else you have to adjust it to the address and port of <code>freqtracking.py</code> (options <code>-A</code> and <code>-P</code>).</li>
<li>In the same manner connect the channel you want to be controlled by <code>freqtracking.py</code>. You may connect any number of channels like this. When a channel is removed <code>freqtracking.py</code> will automatically remove it from its list at the first attempt to synchronize that will fail.</li>
</ul>
<h2>ptt_active.py</h2>
<p>PTT (Push To Talk) actively listening system. For a pair of given device set indexes it actively listens to start and stop commands on the corresponding devices to swich over to the other</p>
<p>Options are:</p>
<ul>
<li><code>-h</code> or <code>--help</code> show help message and exit</li>
<li><code>-A</code> or <code>--address</code> listening IP address. Default <code>0.0.0.0</code> (all interfaces)</li>
<li><code>-P</code> or <code>--port</code> listening port. Default <code>8000</code></li>
<li><code>-p</code> or <code>--port-sdr</code> SDRangel instance REST API listening port. Default <code>8091</code></li>
<li><code>-l</code> or <code>--link</code> Pair of indexes of the device sets to link. Default <code>0 1</code></li>
<li><code>-d</code> or <code>--delay</code> Switch over delay in seconds. Default <code>1</code></li>
<li><code>-f</code> or <code>--freq-sync</code> Synchronize devices center frequencies</li>
</ul>
<p>Normal sequence of operations:</p>
<p>In this example we have a Rx device on index 0 and a Tx device on index 1. All settings are assumed to be the default settings.</p>
<ul>
<li>Start <code>ptt_active.py</code> in a terminal</li>
<li>On the Rx device right click on the start/stop button and activate reverse API at address <code>127.0.0.1</code> port <code>8000</code> (default)</li>
<li>On the Tx device right click on the start/stop button and activate reverse API at address <code>127.0.0.1</code> port <code>8000</code> (default)</li>
<li>Start the Rx or Tx device</li>
<li>Stop the running device (Rx or Tx) this will switch over automatically to the other</li>
</ul>
<p>Important: you should initiate switch over by stopping the active device and not by starting the other. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 2 2019 17:56:36 for SDRAngel by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
